define("DS/DELWebPPRNavigator/columns/HideShow3D",[],function(){"use strict";return{dataIndex:"hideShow3D",editableFlag:!0,groupableFlag:!1,editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",getCellSemantics:function(e){var t,n=e.nodeModel;switch(n.getAttributeValue("hideShow3D")){case n.ENUM_3DVISIBILITY.OFF:t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-off pad_eye_off wux-ui-3ds-lg";break;case n.ENUM_3DVISIBILITY.ON:t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye pad_eye wux-ui-3ds-lg";break;case n.ENUM_3DVISIBILITY.PARTIAL:t="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-partial pad_eye_partial wux-ui-3ds-lg"}return{icon:{iconClasses:t}}}}}),define("DS/DELWebPPRNavigator/DELWebPPRNode",["DS/Tree/TreeNodeModel"],function(e){"use strict";var t=function(t){t=t||{},this._referenceId=null,this._instanceId=null,this._type=null,this.setReferenceId(t.referenceId),this.setReferenceType(t.type),this.options=t,t.instanceId&&this.setInstanceId(t.instanceId),e.apply(this,arguments)};return(t.prototype=Object.create(e.prototype)).constructor=t,t.prototype.setReferenceId=function(e){return UWA.is(e,"string")?(this._referenceId=e,this.getReferenceId()):null},t.prototype.setInstanceId=function(e){return UWA.is(e,"string")?(this._instanceId=e,this.getInstanceId()):null},t.prototype.setReferenceType=function(e){return UWA.is(e,"string")?(this._type=e,this.getReferenceType()):null},t.prototype.getReferenceId=function(){return this._referenceId},t.prototype.getInstanceId=function(){return this._instanceId},t.prototype.getReferenceType=function(){return this._type},t.prototype.get3DHiddenChildren=function(){var e={hidden:[],partialHidden:[]},t=this.getChildren();return t&&t.forEach(function(t){var n=t.getAttributeValue("hideShow3D");n===t.ENUM_3DVISIBILITY.OFF?e.hidden.push(t):n===t.ENUM_3DVISIBILITY.PARTIAL&&e.partialHidden.push(t)}),e},t.prototype.getAll3DHiddenChildren=function(){var e=[],t=[];return function e(t,n,o){var i=t.get3DHiddenChildren();i.hidden.forEach(t=>{n.push(t),e(t,n,o)}),i.partialHidden.forEach(t=>{o.push(t),e(t,n,o)})}(this,e,t),{hidden:e,partialHidden:t}},t.prototype.get3DVisibility=function(){var e=this.getChildren()||[],t=this.get3DHiddenChildren();this.ENUM_3DVISIBILITY.ON;return t.hidden.length===e.length?this.ENUM_3DVISIBILITY.OFF:0===t.hidden.length&&0===t.partialHidden.length?this.ENUM_3DVISIBILITY.ON:this.ENUM_3DVISIBILITY.PARTIAL},t.prototype.changeParent3DVisibility=function(){var e;if(!this.isRoot())for(e=this.getParent();e;)e.getUserHiddenState()?e=null:(e.setAttribute("hideShow3D",e.get3DVisibility()),e=e.isRoot()?null:e.getParent())},t.prototype.getRirPath=function(){for(var e=this,t=[];e;){if(e.isRoot()){t=[e.options.referenceId].concat(t);break}t=[e.options.instanceId,e.options.referenceId].concat(t),e=e.getParent()}return t},t.prototype.setUserHiddenState=function(e){this.options.hiddenStateSet=e},t.prototype.getUserHiddenState=function(){return!0===this.options.hiddenStateSet},t.prototype.isLeaf=function(){var e=this.getChildren();return!e||0===e.length},t.prototype.getConsumedItems=function(){var e={MfgItems:[],Resources:[]};return this.options.consumedMfgItems&&(e.MfgItems=UWA.clone(this.options.consumedMfgItems)),this.options.consumedCapableResource&&(e.Resources=UWA.clone(this.options.consumedCapableResource)),e},Object.defineProperty(t.prototype,"ENUM_3DVISIBILITY",{value:Object.freeze({ON:1,OFF:0,PARTIAL:2}),writable:!1,configurable:!1}),Object.defineProperty(t.prototype,"ENUM_BUILDUP",{value:Object.freeze({ACTIVATE:1,DEACTIVATE:0,LOADING:-1}),writable:!1,configurable:!1}),t}),define("DS/DELWebPPRNavigator/DataGridView",["DS/DataGridView/DataGridView","DS/DELWebPPRNavigator/columns/HideShow3D","DS/DELWebComponentManager/DELWebComponentManager","css!DS/DELWebPPRNavigator/assets/css/datagridview.css"],function(e,t,n){"use strict";return function(o){var i,a=n.getComponent("Utils"),r=("del-ppr-datagridview/"+a.getWidgetId()).toLowerCase();return o=o||{},Object.assign(o,{defaultColumnDef:{editableFlag:!1},rowSelection:"multiple",columnSelection:"none",cellSelection:"none",showOutlineFlag:!0,cellDragEnabledFlag:!0,showContextualMenuColumnFlag:!0}),o.onContextualMenu&&(o.onContextualEvent=function(e){var t=[];return e&&e.collectionView&&(t=(t=e.collectionView.buildDefaultContextualMenu(e)).concat(o.onContextualMenu(e))),t}),UWA.is(o.columns,"array")&&o.columns.forEach(e=>{"hideShow3D"===e.dataIndex&&Object.assign(e,t)}),(i=new e(o)).layout.cellHeight=40,o.container&&i.getContent().inject(o.container),i.onDragStartCell=function(e,t){var n=t.nodeModel,o={protocol:"3DXContent",version:"1.1",source:a.getAppId(),widgetId:a.getWidgetId(),data:{items:[{envId:a?a.getPlatformId():"",serviceId:"3DSpace",contextId:a.getSetting("pad_security_ctx"),objectId:n?n.getReferenceId():"",objectType:n?n.getReferenceType():"",displayName:n?n.getLabel():""}]},biProxyCtx:{widgetId:a.getWidgetId(),appId:a.getSharedAppId()}};return e.dataTransfer.setData("Text",JSON.stringify(o)),e.dataTransfer.setData(r,""),!1},i.onDragStartColumnHeader=function(e){return e.dataTransfer.setData(r,""),!0},o.onSelect&&i.getNodesXSO().onChange(function(e){o.onSelect(e)}),o.onHover&&i.addEventListener("mouseover",o.onHover),o.onClick&&i.addEventListener("click",function(e,t){o.onClick(e,t)}),{ensureNodeModelVisible:function(){i.ensureNodeModelVisible.apply(i,arguments)},setToolbar:function(e){var t,n;return e="object"==typeof e?e:JSON.parse(e),(n=UWA.createElement("div")).className="divToolbar",n.setAttribute("id","divToolbar"),(t=i.setToolbar(e)).inject(n),t.show(),i.getContent().style.top="50px",n},getToolbar:function(){return i.getToolbar()},destroy:function(){i.destroy()},updateColumn:function(e,t){i&&e&&t&&i.layout.setColumnOrGroupProperties(e,t)},registerTypeRepresentations:function(e){i.getTypeRepresentationFactory().registerTypeRepresentations(e)}}}}),define("DS/DELWebPPRNavigator/DELWebPPRNavigator",["UWA/Core","UWA/Class/Promise","DS/DELWebPPRNavigator/DataGridView","DS/CoreEvents/ModelEvents","DS/WebappsUtils/WebappsUtils","i18n!DS/DELWebPPRNavigator/assets/nls/DELPPRNavigator"],function(e,t,n,o,i,a){"use strict";return function(r){const s="root",l="intermediate",d="leaf",c="all",u=r?"Del_Web_PPRNavigator_"+r:"Del_Web_PPRNavigator";var p,f,I,g,h,b,D=new o,v=[],S=function(e){g&&e.dataIndex&&e.options&&g.updateColumn(e.dataIndex,e.options)},y=(h=[{eventName:{event:"updateColumn"},callback:S}],b=[],{subscribeEvents:function(){h.forEach(function(e){b.push(D.subscribe(e.eventName,e.callback))})},unsubscribeEvents:function(){e.is(b,"array")&&(b.forEach(e=>{D.unsubscribe(e)}),b=[])}}),E=function(e,t){var n={data:t,origin:r};D.publish({event:e,data:n})},m=function(e){E("onReframe",{node:e})},w=function(t){e.is(f)&&(f.prepareUpdate(),f.removeRoot(t),f.pushUpdate()),E("onRemoveRoot",{node:t})},C=function(t,n){var o=t.getAll3DHiddenChildren(),i=function(e){e.setAttribute("hideShow3D",t.ENUM_3DVISIBILITY.ON),e.setUserHiddenState(!1)};n=e.is(n,"array")?n:[],e.is(f)&&(f.prepareUpdate(),t.getAttributeValue("hideShow3D")!==t.ENUM_3DVISIBILITY.ON&&(i(t),n.push(t)),o.hidden.forEach(e=>{i(e),n.push(e)}),o.partialHidden.forEach(e=>{i(e)}),t.changeParent3DVisibility(),f.pushUpdate())},R=function(e){var t=[];C(e,t),E("onShowAll",{node:e,nodesToShow:t})},M=function(t){var n=[],o=[],i=t.getRirPath().join();e.is(f)&&(f.prepareUpdate(),f.processDescendants({processNode:function(e){var a=e.nodeModel,r=a.getRirPath(),s={shouldProcessDescendants:!0};return i.includes(r.join())?a===t?s.shouldProcessDescendants=!1:a.getAttributeValue("hideShow3D")===a.ENUM_3DVISIBILITY.OFF&&(a.setUserHiddenState(!1),o.push(a)):(a.isLeaf()&&a.getAttributeValue("hideShow3D")!==a.ENUM_3DVISIBILITY.OFF&&n.push(a),a.setAttribute("hideShow3D",a.ENUM_3DVISIBILITY.OFF)),s}}),f.pushUpdate()),C(t,o),E("onShowOnly",{node:t,nodesToShow:o,nodesToHide:n})},T=function(e){e.expandAll()},N=function(e){e.collapseAll()},P=function(t){var n=[],o=[{name:"expandAll",icon:"flow-tree-expand-down",title:a.get("ContextualMenu.ExpandAll"),handler:T,state:"enabled",availableOn:[c]},{name:"collapseAll",icon:"flow-tree-expand-up",title:a.get("ContextualMenu.CollapseAll"),handler:N,state:"enabled",availableOn:[c]},{name:"reframe",icon:"zoom-fit",title:a.get("ContextualMenu.Reframe"),handler:m,state:"enabled",availableOn:[c]},{name:"showAll",icon:i.getWebappsAssetUrl("DELWebPPRNavigator","icons/32/I_DEL_ShowAll.png"),title:a.get("ContextualMenu.ShowAll"),handler:R,state:"enabled",availableOn:[s,l]},{name:"showOnly",icon:i.getWebappsAssetUrl("DELWebPPRNavigator","icons/32/I_DEL_ShowOnly.png"),title:a.get("ContextualMenu.ShowOnly"),handler:M,state:"enabled",availableOn:[l,d]},{name:"removeRoot",icon:i.getWebappsAssetUrl("DELWebPPRNavigator","icons/32/I_DEL_RemoveRoot.png"),title:a.get("ContextualMenu.RemoveRoot"),handler:w,state:"enabled",availableOn:[s]}];return t&&t.cellInfos&&-1!==t.cellInfos.rowID&&(n=o.filter(function(e){var n=t.cellInfos.nodeModel;return I.indexOf(e.name)>-1&&(!!e.availableOn.includes(c)||(n.isRoot()?e.availableOn.includes(s):n.isLeaf()?e.availableOn.includes(d):e.availableOn.includes(l)))}).map(function(n){return e.is(v,"array")&&v.forEach(e=>{n.name===e.name&&Object.assign(n,e)}),{type:"PushItem",title:n.title,icon:n.icon,action:{callback:function(){n.handler(t.cellInfos.nodeModel)}},state:n.state}})),n};return{initialize:function(o){return f=o.treeDocument||null,p=o.container||null,I=o.contextualMenu||null,new t(function(t){g=new n(Object.assign({},o,{onContextualMenu:P,identifier:u,onSelect:function(e){E("onSelectionChange",{node:e})},onHover:function(e,t){E("onPPRHover",{node:t})},onDelayedModelDataRequest:function(e){E("onDelayedModelDataRequest",e)},onClick:function(t,n){var o,i,a,r,s,l;if(e.is(n)&&-1!==n.rowID&&t.dsModel.layout&&!0!==t.dsModel.layout.getColumnDisabled(n.columnID))switch(o=t.dsModel.layout.getDataIndexFromColumnIndex(n.columnID)){case"hideShow3D":a=function(e){E("onHideShow3DStateChange",{node:e})},s=(i=n).nodeModel,l=s.ENUM_3DVISIBILITY.ON,e.is(i)&&-1!==i.rowID&&(r=s.getAttributeValue("hideShow3D"),e.is(r)&&(r===s.ENUM_3DVISIBILITY.OFF?(l=s.get3DVisibility()===s.ENUM_3DVISIBILITY.PARTIAL?s.ENUM_3DVISIBILITY.PARTIAL:s.ENUM_3DVISIBILITY.ON,s.setUserHiddenState(!1)):(l=s.ENUM_3DVISIBILITY.OFF,s.setUserHiddenState(!0))),s.setAttribute("hideShow3D",l),a&&a(s),s.changeParent3DVisibility());break;default:E("onCellClick",{dataIndex:o,cell:n})}}})),y.subscribeEvents(),t()})},getRootsInfo:function(){var e=this,t=[],n=f?f.getRoots().slice():[];return n&&n.length>0&&n.forEach(n=>{t.push(e.getNodeInfo(n))}),t},getNodeInfo:function(e){var t={};return e&&(t={id:e.getReferenceId(),instanceId:e.getInstanceId(),label:e.getLabel(),description:e.getAttributeValue("description.reference"),type:e.options.type,filter:e.options.filter}),t},updateColumn:function(e,t){S({dataIndex:e,options:t})},setToolbar:function(e){var t;return e&&(g.setToolbar(e).inject(p),t=g.getToolbar()),t},getToolbar:function(){return g.getToolbar()},reset3DVisibility:function(){var t,n=[];f&&(t=f.getRoots(),e.is(t,"array")&&(f.prepareUpdate(),t.forEach(e=>{let t=e.getAll3DHiddenChildren();n.push(e),(n=(n=n.concat(t.hidden)).concat(t.partialHidden)).forEach(e=>{e.setAttribute("hideShow3D",e.ENUM_3DVISIBILITY.ON),e.setUserHiddenState(!1)})}),f.pushUpdate()))},clean:function(){f=p=null,g&&g.destroy(),y.unsubscribeEvents()},getModelEvents:function(){return D},updateContextualMenu:function(t){v=e.is(t,"array")?t:[]},focus:function(){g&&g.ensureNodeModelVisible.apply(g,arguments)},biColorize:function(t,n){var o,i,a,r=[],s=[];t&&f&&(i=t,a={predicateKind:"",colorMap:{map:{},predicate:void 0}},e.is(i.tagColors,"array")&&i.tagColors.length>0&&(a.predicateKind=i.tagColors[0].type,i.tagColors.forEach(function(e){var t,n;void 0===a.colorMap.predicate&&(n=(t=e.predicate.split("/"))[t.length-1],a.colorMap.predicate=n),a.colorMap.map[e.object]=e.color})),o=a,(r=f?f.getAllDescendants():[]).forEach(e=>{-1===s.indexOf(e.getReferenceId())&&s.push(e.getReferenceId())}),f.withTransactionUpdate(function(){r.forEach(t=>{var i=n[t.getReferenceId()],a=i&&i[o.colorMap.predicate]?i[o.colorMap.predicate]:null,r=function(t,n,o){var i,a,r,s,l,d="#00000000",c=[];if("date"===t&&e.is(o,"string"))for(l=new Date(o),c.push([l.getFullYear(),("0"+(l.getMonth()+1)).slice(-2),("0"+l.getDate()).slice(-2)].join("/")),c.push([l.getFullYear(),("0"+(l.getMonth()+1)).slice(-2)].join("/")),c.push(l.getFullYear().toString()),a=!0,i=0,r=c.length;i<r&&a;i++)void 0!==n.map[c[i]]&&(a=!1,d=n.map[c[i]]);else"boolean"===t&&"boolean"==typeof o?(s=o?"TRUE":"FALSE",d=n.map[s]):void 0!==n.map[o]&&(d=n.map[o]);return d}(o.predicateKind,o.colorMap,a);t.updateOptions({isBeingCut:"#00000000"===r,grid:{biColor:r}})})}))},biUnColorize:function(){e.is(f)&&f.withTransactionUpdate(function(){f.getAllDescendants().forEach(function(e){e.updateOptions({isBeingCut:!1,grid:{biColor:"#00000000"}})})})},registerTypeRepresentations:function(e){g&&g.registerTypeRepresentations(e)},destroy:function(){this.clean()}}}});