/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/PIMwebUX/PIMwebGroupDefinitionPanelView",["UWA/Core","UWA/Class","DS/Controls/LineEditor"],function(e,t,n){"use strict";return t.extend({init:function(t){var i=t.parent,l=t.editorText?t.editorText:"",a=e.createElement("div"),o=new n({disabled:!0,value:l,requiredFlag:!0,selectAllOnFocus:!0,autoCommitFlag:!0}).inject(a);o.elements.container.setStyles({width:"100%"}),o.elements.container.childNodes[0].setStyles({width:"100%"}),i.content=a,this.setEditorText=function(e){o.value=e},this.destroy=function(){a&&a.parentNode&&a.parentNode.removeChild(a),a=o=null}}})}),define("DS/PIMwebUX/PIMwebIsrContextGroupView",["UWA/Core","UWA/Class","DS/UIKIT/Iconbar","DS/CoreEvents/Events","DS/DataGridView/DataGridView","DS/Tree/TreeNodeModel","DS/Tree/TreeDocument","DS/Windows/Dialog","DS/Controls/Button","DS/Controls/LineEditor","DS/WebappsUtils/WebappsUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrContextGroupView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d,c,u){"use strict";return t.extend({init:function(t){this.groupTitle=t.groupTitle,this.dialog=t.dialog,this.htmlParent=t.htmlParent,this.id=t.id;var s=t.productContext,r=t.ctrl,d=this;d.tokenCSO={},d.groupDefinitionDialog=null,d.isFilter=!!t.isFilter&&t.isFilter;var c=!!t.readOnly&&t.readOnly;d.isEmpty=!0;var f,p,g;var h=function(){d.model&&(d.model.removeRoots(),d.model=null),d.dataGridListViewDiv&&d.dataGridListViewDiv.remove(),d.dataGridListViewDiv=null,d.groupContent&&d.groupContent.remove(),d.groupContent=null,d._groupDefinitionDialog&&(d._groupDefinitionDialog.editor&&(d._groupDefinitionDialog.editor.remove(),d._groupDefinitionDialog.editor=null),d._groupDefinitionDialog.remove(),d._groupDefinitionDialog=null),i.publish({event:"onContextGroupRemoved",data:d})};this.removeGroupView=function(){h()},this.addInfoInGroup=function(e){!function(e){if(e&&e.length){d.model.prepareUpdate(),d.isFilter&&(d.model.removeRoots(),0!==d.model.getRoots().length&&1!==e.length&&(d.isFilter=!1));for(var t=0;t<e.length;t++){var n=new a({id:e[t].id,label:e[t].label,icons:e[t].icons,pathElement:e[t].pathElement});d.model.addRoot(n)}d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),i.publish({event:"onElemAddedInGroup",data:d})}}(e)},this.getGroupInfo=function(){var e,t={},n=d.model.getRoots();if(!n.length)return t;for(t.isFilter=d.isFilter,t.Elements=[],e=0;e<n.length;e++)t.Elements.push({id:n[e]._options.id,label:n[e]._options.label,icons:n[e]._options.icons,pathElement:n[e]._options.pathElement});return t},f=e.createElement("div",{class:"PIMwebGroupTitleWithIconbar",html:[{tag:"h6",html:[d.groupTitle+" # "+this.id+"  ",{tag:"span",class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}]}]}),c||(p=new n({renderTo:f,items:[{id:"product",fonticon:"product",text:u.isrCtxGroupSelectProduct,handler:function(){r&&r.addElementsInGroup(s.id,d)}},{id:"filter",text:u.isrCtxGroupSelectFilter,fonticon:"filter",handler:function(){r&&r.searchFilters(s.id).then(function(e){!function(e){if(e){d.model.prepareUpdate(),d.model.removeRoots(),d.isFilter=!0;var t=new a({label:e[0].alias,id:e[0].id,icons:e[0].icons});d.model.addRoot(t),d.model.pushUpdate(),d.isEmpty=!1,f.getElementsByTagName("h6")[0].getElementsByTagName("span")[0].hide(),i.publish({event:"onFilterAddedInGroup",data:d})}}(e)})}},{id:"remove",text:u.isrCtxGroupElemRemove,fonticon:"remove",handler:function(){p.getItem("remove").elements.container.addClassName("disabled");var e=g.getNodesXSO().get(),t=e.length;if(t){d.model.prepareUpdate();for(var n=0;n<t;n++)d.model.removeRoot(e[n]);d.model.pushUpdate(),d.model.getRoots().length||(d.isEmpty=!0,d.isFilter=!1,f.getElementsByTagName("span")[0].show(),i.publish({event:"onEmptyGroup",data:d}))}}},{id:"delete",text:u.isrCtxGroupDelete,fonticon:"trash",handler:function(){h()}}]})).getItem("remove").elements.container.addClassName("disabled"),d.dataGridListViewDiv=new e.Element("div"),d.model=new o;var b=(g=new l({identifier:"DataGridViewContext",treeDocument:d.model,columns:[{text:"Tree",dataIndex:"tree"}],rowSelection:"multiple",cellSelection:"none",height:100,width:500,minWidth:100,minHeight:500,showRowBorderFlag:!0,showColumnBorderFlag:!0,placeholder:u.isrCtxGroupEmptyGroup,showOutlineFlag:!0})).getNodesXSO();b.options.getElementID=void 0,b.onPostAdd(function(e){p&&p.getItem("remove").elements.container.hasClassName("disabled")&&p.getItem("remove").elements.container.removeClassName("disabled"),r&&r.onPostRowSelect(e)}),b.onPostRemove(function(e){!g.getNodesXSO().get().length&&p&&p.getItem("remove").elements.container.addClassName("disabled"),r&&r.onPostRowUnselect(e)}),g.layout.columnsHeader=!1,g.inject(d.dataGridListViewDiv),d.groupContent=e.createElement("div",{class:"PIMwebGroupView",html:[e.createElement("div",{class:".PIMwebGroupElement",html:[{tag:"div",class:"PIMwebGroupField",html:[f,d.dataGridListViewDiv]}]})]}),d.groupContent.inject(d.htmlParent),i.publish({event:"onGroupViewCreated",data:d})}})}),define("DS/PIMwebUX/PIMwebOpacitySlider",["UWA/Core","UWA/Class","DS/Controls/Slider","DS/Controls/Button","DS/WebappsUtils/WebappsUtils"],function(e,t,n,i,l){"use strict";var a=l.getWebappsAssetUrl("PIMwebUX","icons/32/");return t.extend({init:function(t){var l,o,s,r,d=this,c=t.parent,u=!1,f=t.userValue,p=1===t.checkedButton?1:2===t.checkedButton?2:0,g=1===p?0:2===p?100:f;l=new e.Element("div",{class:"pimWebOpacitySlider","data-rec-id":"pimWebOpacitySlider",styles:{position:"absolute",display:"none",margin:"1px auto"}}),c.appendChild(l),(o=new i({label:"",checkFlag:1===p,icon:a+"I_PIMOpacity0.png",displayStyle:"icon",recId:"btn1"}).inject(l)).onClick=function(){o.checkFlag=!o.checkFlag,p=o.checkFlag?1:0,s.checkFlag=!1,u=!0,r.value=o.checkFlag?0:f},(r=new n({minValue:0,maxValue:100,stepValue:1,value:g,disabled:!1,valuePopupFlag:!1,recId:"slider"}).inject(l)).elements.container.setStyle("display","inline-flex"),r.elements.container.setStyle("margin","1px 10px 2px 10px"),r.elements.container.setStyle("width","300px"),r.addEventListener("change",function(e){if(u||(s.checkFlag=!1,o.checkFlag=!1,p=0,f=e.dsModel.value),u=!1,g!==e.dsModel.value){var t=g;g=e.dsModel.value,"function"==typeof d.onOpacityChange&&d.onOpacityChange({oldValue:t,newValue:g,userValue:f,checkedButton:p})}r.elements.container.getChildren()[0].setStyle("width","100%"),r.elements.container.getChildren()[0].setStyle("width","100%")}),(s=new i({label:"",checkFlag:2===p,icon:a+"I_PIMOpacity1.png",displayStyle:"icon",recId:"btn2"}).inject(l)).onClick=function(){s.checkFlag=!s.checkFlag,p=s.checkFlag?2:0,o.checkFlag=!1,u=!0,r.value=s.checkFlag?100:f},this.show=function(){l.setStyle("display","inline-flex")},this.hide=function(){l.setStyle("display","none")},this.onOpacityChange=null,this.getSize=function(){return l.getSize()},this.setPosition=function(e){l.setStyles(e)},this.destroy=function(){l&&l.parentNode&&l.parentNode.removeChild(l),d.onOpacityChange=null,d=l=c=o=s=r=null}}})}),define("DS/PIMwebUX/PIMwebUnitsUX",[],function(){"use strict";var e=1/12*(1/.0254),t=1/3*e;return Object.freeze({length:{mm:1e3,m:1,cm:100,km:.001,in:1/.0254,ft:e,micron:1e6,yard:t,mile:1/1609.344,nm:1e9,hm:.01,nmi:1/1852,dm:10,ang:1e10,cmm:1e5,mil:1/.0254*1e3},volume:{mm3:1e9,cm3:1e6,dm3:1e3,m3:1,km3:1e-9,L:1e3,in3:61023.74409473229,ft3:35.31466672148859,gal:1/.003785411784,brl:6.289810770432104,yard3:1.3079506193143924},convertValue:function(e,t,n){if(!("number"!=typeof e||e<=0))return e*(t?1:.001)*n[t?"volume":"length"].ratio},convertValueToString:function(e,t,n){if(!("number"!=typeof e||e<=0)){var i=e*(t?1:.001)*n.ratio,l=1-Math.floor(Math.log(i)/Math.log(10)+1);l>=n.decimal?i=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimal+l)):i&&(i=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimal)))}}})}),define("DS/PIMwebUX/PIMwebIsrPanelSpecTab",["UWA/Core","UWA/Class","DS/CATWebUXPreferences/CATWebUXPreferencesUtils","DS/Controls/LineEditor","DS/Controls/Toggle","DS/Controls/Button","DS/Controls/Expander","DS/Controls/ComboBox","DS/Controls/SpinBox","DS/CoreEvents/Events","DS/Controls/ButtonGroup","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelSpecTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d,c,u){"use strict";return t.extend({init:function(t){var f,p=this,g=t.parent,h=t.type,b=t.lengthUnit?t.lengthUnit:{unit:"Millimeter",decimalPlace:3,TrailingZero:!1},m=!!t.isNonPersistIsr&&t.isNonPersistIsr,I=!!t.readOnly&&t.readOnly,w={};localStorage.getItem("PIMwebIsrSpecs")&&(w=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var C,x,v,S,y,F,L,P,M,R,E,D,O,T,V,k,A,N,U,j,G,W,Q,X,B,z,K,H,_,q,J,Z,Y,$,ee,te,ne,ie,le={ComputationMode:{Clash:!0,Contact:!1,Clearance:!1,ClearanceValMeter:.01},Fasteners:{FstChecked:!1,CheckItfWithFastenedParts:!1},EngineeringCnx:{EnggCnxChecked:!1,CheckNoClash:!0,CheckContact:!0,CheckClearance:!0,NoCheck:!0},KnwRulesChecked:!1,ElecChecked:!1,PathwaysChecked:!1,ReuseExistingItf:{RecomputeOnlyModItf:!0,DeleteOutOfScopeItf:!1},ComputeQuantifer:{PenVolume:!1,PenVector:!0,MinDist:!1},StoredResults:{ClashQuantifier:1,ClearanceQuantifier:1,GeometryDetail:1,ClashGeometry:1,ContactGeometry:1,ClearanceGeometry:1,Accuracy:{valMeter:.01,units:"mm"}},AppRulesExpanded:!0,UsrDefRulesExpanded:!1,UpdateRulesExpanded:!1,StoredQuantifExpanded:!1,StoredResultsExpanded:!1};function ae(e){p.ruleSet=e,k.value=e.alias}function oe(){"customFacetMode"!==h&&(x.checkFlag||V&&V.checkFlag||R.checkFlag?d.publish({event:"onSpecInfoChange",data:"SpecInfoSufficient"}):d.publish({event:"onSpecInfoChange",data:"SpecInfoInsufficient"}))}function se(){"customFacetMode"!==h&&(!R.checkFlag||E.checkFlag||D.checkFlag||O.checkFlag||T.checkFlag?(J.hide(),d.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoSufficient"})):(J.show(),d.publish({event:"onEngCnxInfoChange",data:"EngCnxInfoInsufficient"})))}function re(e){return e||(e=.01),n.convertUnitValueToString(e,"Length",b.unit,b.decimalPlace,b.TrailingZero,{displaySymbol:!0,displaySpace:!0})}function de(e){let t=parseFloat(e);return!e||t<=0||""===e.trim()?.01:n.convert(t,"Length",b.unit,"Meter")}function ce(){for(var e=f.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].hasClassName("wux-controls-expander")||e[t].hasClassName("wux-controls-expander-container")||e[t].hasClassName("wux-controls-expander-header")||(e[t].style.pointerEvents="none",e[t].style.userSelect="none",e[t].setAttribute("disabled",!0)),e[t].hasClassName("fonticon-remove")&&e[t].getParent().addClassName("disabled")}localStorage.getItem("PIMwebIsrSpecs")&&(C=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),f=e.createElement("div",{class:"PIMwebIsrPanelSpecTabContent"}).inject(g);var ue=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(f),fe=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(ue);x=new l({type:"checkbox",label:u.isrSpecClash}).inject(fe),v=new l({type:"checkbox",label:u.isrSpecContact,checkFlag:C?C.ComputationMode.Contact:le.ComputationMode.Contact}).inject(fe),(S=new l({type:"checkbox",label:u.isrSpecClearance})).inject(fe),y=new i({disabled:!0,selectAllOnFocus:!0}).inject(fe),ue.setStyles({borderBottom:"1px solid #d1d4d4"}),y.elements.container.setStyles({marginRight:"15px"}),y.elements.container.childNodes[0].setStyles({marginRight:"15px"}),y.addEventListener("change",function(){let e=de(y.value);y.value=re(e)}),y.value=re(C?C.ComputationMode.ClearanceValMeter:le.ComputationMode.ClearanceValMeter),x.addEventListener("change",function(){oe()}),v.addEventListener("change",function(){v.checkFlag?x.checkFlag=x.disabled=!0:x.disabled=!1}),S.addEventListener("change",function(){S.checkFlag?(x.checkFlag=v.checkFlag=x.disabled=v.disabled=!0,y.disabled=!1):(y.disabled=!0,v.disabled=!1)}),x.checkFlag=C?C.ComputationMode.Clash:le.ComputationMode.Clash,v.checkFlag=C?C.ComputationMode.Contact:le.ComputationMode.Contact,S.checkFlag=C?C.ComputationMode.Clearance:le.ComputationMode.Clearance;var pe=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(F=new l({type:"checkbox",label:u.isrSpecFasteners})).inject(pe),(L=new l({type:"checkbox",label:u.isrSpecCheckItfWithFastenedParts,disabled:!0})).inject(pe),L.elements.container.setStyles({marginLeft:"28px"}),F.addEventListener("change",function(){F.checkFlag?L.disabled=!1:L.disabled=!0}),(P=new l({type:"checkbox",label:u.isrSpecPathways})).inject(pe),(M=new l({type:"checkbox",label:u.isrSpecElecBranches})).inject(pe),F.checkFlag=C?C.Fasteners.FstChecked:le.Fasteners.FstChecked,L.checkFlag=C?C.Fasteners.CheckItfWithFastenedParts:le.Fasteners.CheckItfWithFastenedParts,P.checkFlag=C?C.PathwaysChecked:le.PathwaysChecked,M.checkFlag=C?C.ElecChecked:le.ElecChecked,(B=new o({header:u.isrSpecAppRulesHeader,body:pe,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),B.expandedFlag=C?C.AppRulesExpanded:le.AppRulesExpanded;var ge=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f);if(!m){var he=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(ge);(V=new l({type:"checkbox",label:u.isrSpecKnwRule}).inject(he)).elements.container.setStyles({marginRight:"5px"}),(q=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(he)).setStyles({marginLeft:"5px",marginRight:"5px"}),q.hide(),k=new i({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:u.isrSpecSelectRuleSet}).inject(he),I||(W=new a({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",disabled:!0,onClick:function(){require("DS/PADServices/views/LandingPage").launchSearch({title:u.isrSpecRuleSetSearchPageTitle,precondition:'flattenedtaxonomies:"types/PLMRuleset"',showApplyButton:!0,ok:function(e){ae.call(this,e.map(function(e){return{id:e.resourceid,type:e["ds6w:type_value"],alias:e["ds6w:label"]}}))}.bind(p)})}}).inject(he),V.addEventListener("change",function(){oe(),V.checkFlag?(W.disabled=!1,""===k.value?(d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoInsufficient"}),q.show()):(d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),q.hide())):(k.disabled=W.disabled=!0,d.publish({event:"onKnwInfoChange",data:"KnwRuleInfoSufficient"}),q.hide())})),V.checkFlag=le.KnwRulesChecked}var be=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(ge);R=new l({type:"checkbox",label:u.isrSpecEnggCnx}).inject(be),(J=e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(be)).setStyles({marginLeft:"10px"}),J.hide();var me=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(ge),Ie=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(me),we=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap PIMwebIsrPanelFlexEngCnx"}).inject(me);(E=new l({type:"checkbox",label:u.isrSpecEnggCnxNoClash,disabled:!0}).inject(Ie)).elements.container.setStyles({marginLeft:"28px"}),(D=new l({type:"checkbox",label:u.isrSpecEnggCnxContact,disabled:!0}).inject(we)).elements.container.setStyles({marginLeft:"28px"}),(O=new l({type:"checkbox",label:u.isrSpecEnggCnxClearance,disabled:!0}).inject(Ie)).elements.container.setStyles({marginLeft:"28px"}),(T=new l({type:"checkbox",label:u.isrSpecEnggCnxNoCheck,disabled:!0}).inject(we)).elements.container.setStyles({marginLeft:"28px"}),R.addEventListener("change",function(){oe(),R.checkFlag?E.disabled=D.disabled=O.disabled=T.disabled=!1:(E.disabled=!0,D.disabled=!0,O.disabled=!0,T.disabled=!0),se()}),E.addEventListener("change",function(){se()}),D.addEventListener("change",function(){se()}),O.addEventListener("change",function(){se()}),T.addEventListener("change",function(){se()}),R.setPropertyFromUIInteraction("checkFlag",le.EngineeringCnx.EnggCnxChecked),E.checkFlag=le.EngineeringCnx.CheckNoClash,D.checkFlag=le.EngineeringCnx.CheckContact,O.checkFlag=le.EngineeringCnx.CheckClearance,T.checkFlag=le.EngineeringCnx.NoCheck,(Q=new l({type:"checkbox",label:u.isrChkIntermediateReps,value:0,checkFlag:!1})).inject(ge);var Ce,xe,ve=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f);if((X=new l({type:"checkbox",label:u.isrComputeBetweenIntermediateReps,value:0,disabled:!0,checkFlag:!1})).inject(ve),ve.setStyles({marginLeft:"10px"}),ve.inject(ge),Q.addEventListener("change",function(){Q.checkFlag?X.disabled=!1:X.disabled=!0}),(z=new o({header:u.isrUserDefinedRulesHeader,body:ge,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),z.expandedFlag=C?C.UsrDefRulesExpanded:le.UsrDefRulesExpanded,m||(Ce=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f),(A=new l({type:"checkbox",label:u.isrSpecRecomputeOnlyModified})).inject(Ce),(N=new l({type:"checkbox",label:u.isrSpecDeleteOutOfScopeIsr})).inject(Ce),N.elements.container.setStyles({marginLeft:"28px"}),(K=new o({header:u.isrUpdateRulesHeader,body:Ce,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),K.expandedFlag=C?C.UpdateRulesExpanded:le.UpdateRulesExpanded,A.addEventListener("change",function(){A.checkFlag?N.disabled=!1:(N.disabled=!0,N.checkFlag=!1)}),A.checkFlag=le.ReuseExistingItf.RecomputeOnlyModItf,N.checkFlag=le.ReuseExistingItf.DeleteOutOfScopeItf),m){var Se=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"});(U=new l({type:"checkbox",label:u.isrSpecPenVol})).inject(Se),(j=new l({type:"checkbox",label:u.isrSpecPenVec})).inject(Se),(G=new l({type:"checkbox",label:u.isrSpecMinDist})).inject(Se),(H=new o({header:u.isrNonPersistQuantifiersHeader,body:Se,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),H.expandedFlag=C?C.StoredQuantifExpanded:le.StoredQuantifExpanded,U.checkFlag=C&&C.ComputeQuantifer?C.ComputeQuantifer.PenVolume:le.ComputeQuantifer.PenVolume,j.checkFlag=C&&C.ComputeQuantifer?C.ComputeQuantifer.PenVector:le.ComputeQuantifer.PenVector,G.checkFlag=C&&C.ComputeQuantifer?C.ComputeQuantifer.MinDist:le.ComputeQuantifer.MinDist}else!function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}),i=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);i.innerHTML=u.isrSpecStoredResQuantifiers,i.setStyles({fontWeight:"normal"});var a=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),d=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(a);d.innerHTML=u.isrSpecStoredResClash,d.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(Y=new s({elementsList:[u.isrSpecStoredResNone,u.isrSpecPenVec,u.isrSpecPenVol,u.isrSpecStoredResVecAndVol],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ClashQuantifier:le.StoredResults.ClashQuantifier,displayStyle:"normal"})).inject(a),Y.elements.container.setStyles({width:"30%"});var p=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);p.setStyles({paddingTop:"5px"});var g=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(p);g.innerHTML=u.isrSpecStoredResClearance,g.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(te=new s({elementsList:[u.isrSpecStoredResNone,u.isrSpecMinDist],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ClearanceQuantifier:le.StoredResults.ClearanceQuantifier,displayStyle:"normal"})).inject(p),te.elements.container.setStyles({width:"30%"});var h=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(t);h.innerHTML=u.isrSpecStoredResGeometries,h.setStyles({fontWeight:"normal"}),($=new c({type:"radio"})).addChild(new l({type:"radio",label:u.isrSpecMainIsrType,value:1,checkFlag:C&&C.StoredResults?1===C.StoredResults.GeometryDetail:1===le.StoredResults.GeometryDetail})),$.addChild(new l({type:"radio",label:u.isrSpecAllForEachIsr,value:2,checkFlag:C&&C.StoredResults?2===C.StoredResults.GeometryDetail:2===le.StoredResults.GeometryDetail})),$.inject(t),$.elements.container.setStyles({marginLeft:"25px"});var m=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t),I=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(m);I.innerHTML=u.isrSpecStoredResClash,I.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(ee=new s({elementsList:[u.isrSpecStoredResNone,u.isrSpecStoredResCurve,u.isrSpecStoredResVolume,u.isrSpecStoredResCurveAndVol],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ClashGeometry:le.StoredResults.ClashGeometry,displayStyle:"normal"})).inject(m),ee.elements.container.setStyles({width:"30%"});var w=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);w.setStyles({paddingTop:"5px"});var x=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(w);x.innerHTML=u.isrSpecStoredResContact,x.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(Z=new s({elementsList:[u.isrSpecStoredResNone,u.isrSpecStoredResTriangles],enableSearchFlag:!1,selectedIndex:C&&C.StoredResults?C.StoredResults.ContactGeometry:le.StoredResults.ContactGeometry,displayStyle:"normal"})).inject(w),Z.elements.container.setStyles({width:"30%"});var v=e.createElement("div",{class:"PIMwebIsrPanelFlex",marginBottom:"5px"}).inject(t);v.setStyles({paddingTop:"5px"});var S=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(v);S.innerHTML=u.isrSpecStoredResClearance,S.setStyles({width:"14%",fontWeight:"normal",marginLeft:"25px"}),(ne=new s({elementsList:[u.isrSpecStoredResNone,u.isrSpecStoredResTriangles,u.isrSpecStoredResArea],enableSearchFlag:!1,displayStyle:"normal"})).inject(v),ne.elements.container.setStyles({width:"30%"});var y=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(v);y.innerHTML=u.isrSpecStoredResAccuracy,y.setStyles({width:"16%",fontWeight:"normal",marginRight:"5px",textAlign:"right"}),(ie=new r({value:C&&C.StoredResults.Accuracy.valMeter?n.convert(C.StoredResults.Accuracy.valMeter,"Length","Meter",b.unit):n.convert(le.StoredResults.Accuracy.valMeter,"Length","Meter",b.unit),units:C&&C.StoredResults?C.StoredResults.Accuracy.units:le.StoredResults.Accuracy.units,stepValue:1})).inject(v),ie.elements.container.setStyles({width:"20%"}),ne.addEventListener("change",function(){ie.disabled=!(ne.value===u.isrSpecStoredResArea)}),ne.selectedIndex=C&&C.StoredResults?C.StoredResults.ClearanceGeometry:le.StoredResults.ClearanceGeometry,(_=new o({header:u.isrStoredResultsHeader,body:t,style:"divided"}).inject(f)).elements.bodyContainer.setStyles({padding:"0 10px"}),_.expandedFlag=C&&C.StoredResultsExpanded?C.StoredResultsExpanded:le.StoredResultsExpanded}();"Create"!==t.type&&t.specInfo&&(xe=t.specInfo,x.checkFlag=xe.ComputationMode.Clash,v.checkFlag=xe.ComputationMode.Contact,S.checkFlag=xe.ComputationMode.Clearance,y.value=re(xe.ComputationMode.ClearanceValMeter),F.checkFlag=xe.Fasteners.FstChecked,L.checkFlag=xe.Fasteners.CheckItfWithFastenedParts,R.checkFlag=xe.EngineeringCnx.EnggCnxChecked,E.checkFlag=xe.EngineeringCnx.CheckNoClash,D.checkFlag=xe.EngineeringCnx.CheckContact,O.checkFlag=xe.EngineeringCnx.CheckClearance,T.checkFlag=xe.EngineeringCnx.NoCheck,m||(V.checkFlag=xe.KnowledgeRule.KnwRulesChecked),xe.KnowledgeRule.RuleSet&&ae(xe.KnowledgeRule.RuleSet),M.checkFlag=xe.checkElec,P.checkFlag=xe.checkPathways,Q.checkFlag=xe.CheckInterRep,X.checkFlag=xe.CompBetweenIntermediateReps,m?(U.checkFlag=xe.ComputeQuantifer.PenVolume,j.checkFlag=xe.ComputeQuantifer.PenVector,G.checkFlag=xe.ComputeQuantifer.MinDist):(A.checkFlag=xe.ReuseExistingItf.RecomputeOnlyModItf,N.checkFlag=xe.ReuseExistingItf.DeleteOutOfScopeItf,Y.selectedIndex=xe.StoredResults.ClashQuantifier,te.selectedIndex=xe.StoredResults.ClearanceQuantifier,ee.selectedIndex=xe.StoredResults.ClashGeometry,ne.selectedIndex=xe.StoredResults.ClearanceGeometry,Z.selectedIndex=xe.StoredResults.ContactGeometry,ie.value=n.convert(xe.StoredResults.Accuracy.valMeter,"Length","Meter",b.unit),ie.units=n.Length[b.unit].symbol,$.value=[xe.StoredResults.GeometryDetail]),d.publish({event:"onSpecTabComplete"})),I&&ce(),this.getSpecInfo=function(){var e={};return e.ComputationMode={Clash:x.checkFlag,Contact:v.checkFlag,Clearance:S.checkFlag,ClearanceValMeter:de(y.value)},e.Fasteners={FstChecked:F.checkFlag,CheckItfWithFastenedParts:L.checkFlag},e.EngineeringCnx={EnggCnxChecked:R.checkFlag,CheckNoClash:E.checkFlag,CheckContact:D.checkFlag,CheckClearance:O.checkFlag,NoCheck:T.checkFlag},e.checkPathways=P.checkFlag,e.CheckElec=M.checkFlag,m||(e.KnowledgeRule={KnwRulesChecked:V.checkFlag,RuleSet:p.ruleSet},e.ReuseExistingItf={RecomputeOnlyModItf:A.checkFlag,DeleteOutOfScopeItf:N.checkFlag}),m?e.ComputeQuantifer={PenVolume:U.checkFlag,PenVector:j.checkFlag,MinDist:G.checkFlag}:e.StoredResults={ClashQuantifier:Y.selectedIndex,ClearanceQuantifier:te.selectedIndex,GeometryDetail:$.value[0],ClashGeometry:ee.selectedIndex,ContactGeometry:Z.selectedIndex,ClearanceGeometry:ne.selectedIndex,Accuracy:{valMeter:n.convert(ie.value,"Length",b.unit,"Meter"),units:ie.units}},e.CheckInterRep=!!Q&&Q.checkFlag,e.CompBetweenIntermediateReps=!!X&&X.checkFlag,e},this.getPIMwebIsrSpecPrefs=function(){var e={ComputationMode:{Clash:x.checkFlag,Contact:v.checkFlag,Clearance:S.checkFlag,ClearanceValMeter:de(y.value)},Fasteners:{FstChecked:F.checkFlag,CheckItfWithFastenedParts:L.checkFlag},PathwaysChecked:P.checkFlag,ElecChecked:M.checkFlag,ComputeQuantifer:!m&&w&&w.ComputeQuantifer?w.ComputeQuantifer:m?{PenVolume:U.checkFlag,PenVector:j.checkFlag,MinDist:G.checkFlag}:le.ComputeQuantifer,AppRulesExpanded:B.expandedFlag,UsrDefRulesExpanded:z.expandedFlag,UpdateRulesExpanded:K.expandedFlag,StoredResultsExpanded:_?_.expandedFlag:w&&w.StoredResultsExpanded?w.StoredResultsExpanded:le.StoredResultsExpanded,StoredQuantifExpanded:H?H.expandedFlag:w&&w.StoredQuantifExpanded?w.StoredQuantifExpanded:le.StoredQuantifExpanded};return m||(e.StoredResults={ClashQuantifier:Y.selectedIndex,ClearanceQuantifier:te.selectedIndex,GeometryDetail:$.value[0],ClashGeometry:ee.selectedIndex,ContactGeometry:Z.selectedIndex,ClearanceGeometry:ne.selectedIndex,Accuracy:{valMeter:n.convert(ie.value,"Length",b.unit,"Meter"),units:n.Length[b.unit].symbol}}),e},this.disableTab=function(){ce()}}})}),define("DS/PIMwebUX/PIMwebIsrPanelIsrTab",["UWA/Core","UWA/Class","DS/Controls/LineEditor","DS/Controls/Editor","DS/CoreEvents/Events","DS/Controls/ComboBox","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelIsrTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o){"use strict";return t.extend({init:function(t){var s,r,d,c,u,f,p=t.parent,g=t.ctrl,h=t.dialog,b=[];g.getCreationParams().then(function(t){if(t&&t.types&&t.title&&t.name){d=t.name?t.name:"";var m=Object.keys(t.types).length;if(m){for(var I=0;I<m;I++)b.push(t.types[Object.keys(t.types)[I]]);if(l.publish({event:"onIsrTypeInitDone",data:b[0]}),g.setAllNlsType(t.types),f=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(p),b.length>1){h.height=h.height+25,h.minHeight=h.minHeight+25;var w=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(f),C=e.createElement("div").inject(w);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(C).innerHTML=o.isrType,(c=new a({elementsList:b,enableSearchFlag:!1})).inject(w),c.elements.container.setStyles({width:"100%"}),c.addEventListener("change",function(){l.publish({event:"onIsrTypeChange",data:c.value})})}var x;x=c?e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f):e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection  PIMwebFirstTitle"}).inject(f);var v=e.createElement("div").inject(x),S=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(v);S.innerHTML=o.isrTitle,S.setStyles({marginRight:"5px"}),u=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(v),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(u),u.hide(),(s=new n({placeholder:o.titlePlaceholder,value:t.title?t.title:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(x)).elements.container.setStyles({width:"100%"}),s.elements.container.childNodes[0].setStyles({width:"100%"}),s.addEventListener("change",function(){l.publish({event:"onTitleChange",data:s.value})}),l.publish({event:"onTitleChange",data:s.value});var y,F=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(f),L=e.createElement("div").inject(F);e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(L).innerHTML=o.isrDescription,(r=new i({nbRows:7,newLineMode:"shiftEnter",placeholder:o.descriptionPlaceholder,value:"",selectAllOnFocus:!0,autoCommitFlag:!0}).inject(F)).elements.container.setStyles({width:"100%",resize:"both"}),r.elements.container.childNodes[0].setStyles({width:"100%",resize:"both"}),localStorage.getItem("PIMwebIsrSpecs")&&(y=JSON.parse(localStorage.getItem("PIMwebIsrSpecs"))),y&&y.descWidth&&y.descHeight&&r.elements.container.childNodes[0].setStyles({width:y.descWidth,height:y.descHeight})}}}),this.getIsrInfo=function(){return{isrType:c?c.value:1===b.length?b[0]:null,isrTitle:s.value,isrName:d,isrDesc:r.value}},this.getPIMwebIsrTabPrefs=function(){var e={};return r&&(e.descWidth=r.elements.container.childNodes[0].getSize().width,e.descHeight=r.elements.container.childNodes[0].getSize().height),e},this.setIsrTitleValidity=function(e){e?u.hide():u.show()}}})}),define("DS/PIMwebUX/PIMwebDetailedItfListUI",["UWA/Core","UWA/Class","DS/DataGridView/DataGridView","DS/Tree/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PIMwebUX/PIMwebUnitsUX","DS/WebappsUtils/WebappsUtils","DS/CATWebUXPreferences/CATWebUXPreferencesUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebItfListUI","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],function(e,t,n,i,l,a,o,s,r){"use strict";var d="NotAnalyzed",c="OK",u="KO",f="Clash",p="Contact",g="Clearance",h="NoInterference",b="Undefined",m="rgb(204, 9, 47)",I="rgb(255, 138, 46)",w="rgb(111, 188, 75)",C="rgb(0, 157, 219)",x="rgb(254, 224, 0)",v="rgb(111, 188, 75)",S="rgb(204, 9, 47)",y="rgb(254, 224, 0)",F={iconName:"presentation-slide",fontIconFamily:window.WUXManagedFontIcons.Font3DS},L=o.getWebappsAssetUrl("PIMwebUX","icons/22/"),P=["itfQuantifier","itfPenVec","itfMinDist","itfPenVol","itfTolerance"],M=["itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblFstType1","itfLblFstType2","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblMaturity1Shape","itfLblMaturity2Shape","itfLblRevision1Ref","itfLblRevision2Ref","itfLblRevision1Shape","itfLblRevision2Shape","itfOwner","itfOwnerID","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblShape1OwnerID","itfLblShape2OwnerID","current","organization","project","revision","policy","owner","itfCurrent","V_Context_Validity_Status","ISUPTODATE"],R={EnumItfType:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus1:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus2:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}}};R.EnumItfType.semantics.possibleValues[r.Clash]=f,R.EnumItfType.semantics.possibleValues[r.Contact]=p,R.EnumItfType.semantics.possibleValues[r.Clearance]=g,R.EnumItfType.semantics.possibleValues[r.NoInterference]=h,R.EnumItfType.semantics.possibleValues[r.Undefined]=b,R.EnumItfStatus1.semantics.possibleValues[r.itfOK]=c,R.EnumItfStatus1.semantics.possibleValues[r.itfKO]=u,R.EnumItfStatus1.semantics.possibleValues[r.itfToAnalyze]=d,R.EnumItfStatus2.semantics.possibleValues[r.itfOK]=c,R.EnumItfStatus2.semantics.possibleValues[r.itfKO]=u,R.EnumItfStatus2.semantics.possibleValues[r.itfToReAnalyze]=d;var E,D,O,T,V,k=function(e,t){var n=r[e],i=r[t];return n===i?0:n<i?-1:1},A=function(e,t,n,i){return E=n.options.grid.itfPrevAnalysis,D=i.options.grid.itfPrevAnalysis,O=t===d?""===D||void 0===D?"itfToAnalyze":"itfToReAnalyze":t===c?"itfOK":"itfKO",T=r[e===d?""===E||void 0===E?"itfToAnalyze":"itfToReAnalyze":e===c?"itfOK":"itfKO"],V=r[O],T===V?0:T<V?-1:1};function N(e,t){return e||t?e?t?e===t?0:e<t?-1:1:1:-1:0}function U(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfUserType)return"EnumItfType"}function j(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfAnalysis){var t=e.nodeModel.options.grid.itfPrevAnalysis;return""===t||void 0===t?"EnumItfStatus1":"EnumItfStatus2"}}function G(e){if(e&&-1!==e.rowID&&e.nodeModel)return e.nodeModel.options.grid.itfLblSlide?"url":void 0}function W(e){var t=e.cellModel;return t===f?m:t===p?I:t===g?w:t===h?C:t===b?x:null}function Q(e){var t=e.cellModel;return t===c?v:t===u?S:t===d?y:null}function X(e,t){return e<t?-1:e>t?1:0}return t.extend({init:function(t){var o,u,f={},p=null,g=t.readOnly,h=t.cbDnD?t.cbDnD:{},b=t.parent,m=this,I="PIMwebItfListColPref"+(t.suffix?t.suffix:""),w=!1,C=t.deforder,x=t.defCols,v={},S=!0,y=0;if(P=P.concat(t.filterCols?t.filterCols.addColswithNumber:[]),M=M.concat(t.filterCols?t.filterCols.addColsWithSet:[]),t.isWebInWin)w=!0;else if(t.filterCols&&!x&&!t.filterCols.addColsWithSet){const e=M.indexOf("label");e>-1&&M.splice(e,1)}function E(e){(e||e.length||e.volume)&&(w?(e.length.unit&&a.length[e.length.unit]&&(v.length={val:e.length.unit,ratio:a.length[e.length.unit],decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&a.volume[e.volume.unit]&&(v.volume={val:e.volume.unit,ratio:a.volume[e.volume.unit],decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO})):(e.length.unit&&(v.length={val:e.length.unit,decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&(v.volume={val:e.volume.unit,decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO})),e.highExponent&&(v.highExponent=e.highExponent),e.lowExponent&&(v.lowExponent=e.lowExponent))}function D(e,t){if(!("number"!=typeof e||e<=0)){var n,i=t?v.volume:v.length,l=e,a=1-Math.floor(Math.log(l)/Math.log(10)+1),o=i.decimalRW+a+v.highExponent+1;if(w)l=0!==(n=Number((l*(t?1:.001)*i.ratio).toFixed(i.decimalRW)))?n:Number((l*(t?1:.001)*i.ratio).toFixed(o));else if(l){let e=t?s.convert(l,"Volume","CubMet",i.val):s.convert(l,"Length","Millimeter",i.val);l=Number(e.toFixed(i.decimalRW))}return l}}function O(e){if("itfLblSlide"===e)return this.grid[e]?this.grid[e]:0;if("label"===e)return this.label;if(P.indexOf(e)>-1){var t="itfPenVol"===e||S&&"itfQuantifier"===e&&"Clash"===this.grid.itfSystemType;return this.grid[e]?D(this.grid[e],t):void 0}if("itfUserType"===e)return r[this.grid[e]];if("itfAnalysis"===e){var n=this.grid[e]===d?""===this.grid.itfPrevAnalysis?"itfToAnalyze":"itfToReAnalyze":this.grid[e]===c?"itfOK":"itfKO";return r[n]}return r[this.grid[e]]?r[this.grid[e]]:this.grid[e]}function T(e){if(e.nodeModel){var t=p.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===t)return e.nodeModel.options.grid[t]?{icon:F,label:e.nodeModel.options.grid[t]}:void 0;var n="itfPenVol"===t||S&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return D(e.nodeModel.options.grid[t],n)}}function V(e){if(e.nodeModel){var t=p.layout.getDataIndexFromColumnIndex(e.columnID);return r[e.nodeModel.options.grid[t]]||""}}function B(e){if(e.nodeModel){var t=p.layout.getDataIndexFromColumnIndex(e.columnID);return r["itf"+e.nodeModel.options.grid[t]]||""}}function z(e){if("number"==typeof e.cellModel){var t=p.layout.getDataIndexFromColumnIndex(e.columnID),n="itfPenVol"===t||S&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return w?{units:(n?v.volume:v.length).val}:n?{units:s.Volume[v.volume.val].symbol}:{units:s.Length[v.length.val].symbol}}}function K(e){if(-1!==e.rowID&&e.cellModel)return T(e)+" "+z(e).units}function H(e){return!e.cellModel}function _(e){var t="",n=p.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===n)return-1===e.rowID?r.itfLblSlide:e.nodeModel.options.grid.itfLblSlide?String(e.nodeModel.options.grid.itfLblSlide):"";if(-1!==e.rowID&&e.cellModel){if("tree"===n)t+=e.nodeModel.options.label,e.nodeModel.getParents().forEach(function(e){t=e.options.label+"|"+t});else if("itfUserType"===n)t=r[e.cellModel];else if("itfAnalysis"===n){var i=e.nodeModel.options.grid.itfPrevAnalysis,l=e.cellModel;t=r[l===d?""===i?"itfToAnalyze":"itfToReAnalyze":l===c?"itfOK":"itfKO"]}return t}}function q(){setTimeout(function(){p.reapplySortModel();var t=JSON.parse(localStorage.getItem(I));t&&t.filterModel&&!e.equals(t.filterModel,{})&&(u.setFilterModel({}),u.setFilterModel(t.filterModel))},10)}function J(e){return!g&&(!("itfCtxName"===p.columns[e.columnID].dataIndex&&e.nodeModel&&e.nodeModel.getNumberOfChildren()>0)&&((!e.nodeModel||!e.nodeModel.options.grid.isNonEditable&&!e.nodeModel.options.grid.isNonPersistentPIM)&&(!w||(void 0===p.columns[e.columnID].editableFlag||p.columns[e.columnID].editableFlag))))}function Z(e,t){if(!g){var n=p.columns[e.columnID].dataIndex,i=[];"tree"===n&&e.nodeModel.updateOptions({label:t}),(i=p.getTreeDocument().getSelectedNodes().filter(function(e){return e.options.grid.itfuid&&!e.options.grid.isNonEditable})).length||i.push(e.nodeModel),u.withTransactionUpdate(function(){i.forEach(function(e){if(e.options.grid.hasOwnProperty(n)){var i={};i[n]=t,e.options.grid.tree===e.options.grid.itfCtxName&&(i["tree"===n?"itfCtxName":"tree"]=e.options.grid.itfName=t,"itfCtxName"===n&&e.updateOptions({label:t})),e.updateOptions({grid:i})}})}),i.forEach(function(e){if(m.onCellEdit&&e.options.grid.hasOwnProperty(n)){var i=e.options.grid,l="tree"===n?i.tree!==i.itfCtxName?"itfMetricName":"itfCtxName":n,a=e.getChildren()&&e.getChildren().length&&!w?e.getChildren()[0].options.grid.itfuid:i.itfuid;m.onCellEdit({id:a,actualId:i.itfuid,param:l,newValue:t})}})}}function Y(e){if(Array.isArray(e)&&"function"==typeof m.onSelect){var t=[],n=[];e.forEach(function(e){e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var n=e.nodeModel;-1!==t.indexOf(n.options.grid.itfuid)||n.getChildren()||n.isFiltered()||n.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid),e.options.grid&&e.options.grid.itfuid&&n.push(e.options.grid.itfuid)}),m.onSelect({idsSelected:t,actualIdsSelected:n})}}function $(e){if(Array.isArray(e)&&"function"==typeof m.onUnselect){var t=[],n=[];e.forEach(function(e){0===e.getParents().filter(function(e){return e.isSelected()}).length&&(e.hasChildren()||-1!==t.indexOf(e.options.grid.itfuid)?e.processDescendants({processNode:function(e){var n=e.nodeModel,i=n&&n.getParents().some(function(e){return e.isSelected()});!n||i||-1!==t.indexOf(n.options.grid.itfuid)||n.getChildren()||n.isSelected()||t.push(e.nodeModel.options.grid.itfuid)}}):t.push(e.options.grid.itfuid)),e.options.grid&&e.options.grid.itfuid&&n.push(e.options.grid.itfuid)}),w?m.onUnselect(t,n):m.onUnselect(t,null,n)}}function ee(e){e&&(e.itfQuantifier=void 0,"Clash"===e.itfSystemType?e.itfQuantifier=S?e.itfPenVol:e.itfPenVec:"Clearance"===e.itfSystemType&&(e.itfQuantifier=e.itfMinDist))}function te(e){Object.keys(e).forEach(function(t){var n=e[t];n&&n.itfuid&&"Clash"===n.itfSystemType&&(n.itfPenVol&&n.itfPenVec?y=3:n.itfPenVol?y=2===y?3:1:n.itfPenVec&&(y=1===y?3:2),S=3===y||1===y),3!==y&&e[t]&&("object"==typeof e[t]||Array.isArray(e[t]))&&te(e[t])})}function ne(e,t){if(void 0!==e.itfuid){ee(e);var n={label:e.itfName,grid:e,getAttributeValueForFiltering:O};e.icons&&e.itfName&&(n.icons=e.icons.map(e=>L+e));var i=new l(n);return f[e.itfuid]=i,window.__karma__&&(i.toChangeValueForODT=Z),t&&t.addChild(i),i}}function ie(e){3!==y&&te(e);var t=[];Object.keys(e).forEach(function(n){!function e(n,i){var l=i,a=l===u;if(n.hasOwnProperty("row")&&(l=ne(n.row,a?void 0:l),a&&t.push(l)),n.hasOwnProperty("children")){var o=n.children;Object.keys(o).forEach(function(t){o[t].hasOwnProperty("row")&&e(o[t],l)})}}(e[n],u)}),t.length&&u.addRoot(t)}E(e.extend({length:{unit:"mm",decimalRW:3,decimalRO:3},volume:{unit:"mm3",decimalRW:3,decimalRO:3}},t.units)),this.updateInterferences=function(e){0===Object.keys(f).length?ie(e):u.withTransactionUpdate(function(){function t(e,t){!e.search({match:function(e){if(e.nodeModel.options.grid.itfuid===t)return!0}}).length&&f[t]&&(e.addChild(f[t]),3!==y&&te([f[t].options.grid]))}Object.keys(e).forEach(function(n){e[n].hasOwnProperty("row")&&function e(n){Object.keys(n).forEach(function(i){if(n[i]&&n[i].itfuid&&"object"==typeof n[i]){var l=n[i];3!==y&&te([l.itfuid]),f.hasOwnProperty(l.itfuid)&&(ee(l),f[l.itfuid].updateOptions({label:l.itfName,grid:l})),f[l.itfuid]||ne(l,l.childOf?void 0:u),l.childIds&&n.children&&l.childIds.length===Object.keys(n.children).length&&Object.keys(n.children).forEach(function(e){f[l.childIds[e]]?n.children[e]&&n.children[e].row&&t(f[l.itfuid],n.children[e].row.itfuid):ne(n.children[e],f[l.itfuid])}),l.childOf&&f[l.childOf]&&t(f[l.childOf],l.itfuid)}if(n.hasOwnProperty("row")&&e(n[i]),n.hasOwnProperty("children")){var a=n.children;Object.keys(a).forEach(function(t){a[t].hasOwnProperty("row")&&e(a[t])})}})}(e[n])})}),q()},this.showSlideColumn=function(e){o.forEach(function(t){"itfLblSlide"===t.dataIndex&&p.layout.setColumnVisibleFlag(t.dataIndex,e,{isUserInteraction:!0})})},this.removeInterferences=function(){y=0,S=!0,p.getNodesXSO().empty(),u.empty(),f={}},this.getSelectedInterferences=function(e){return e?p.getTreeDocument().getSelectedNodes().map(function(e){return e.options.grid.itfuid}).filter(function(e){return e}):this.getLeafNodeIds(!0)},this.getSelectedRows=function(){var e=[];return p.getNodesXSO().get().forEach(function(t){var n=p.layout.getCellsFromNodeModel(t,!0);n&&e.push(p.getCellInfosAt(n[0]).rowID)}),e.sort(X)},this.selectRows=function(e){var t=e.map(function(e){return p.model[e]});u.withTransactionUpdate(function(){p.unselectAll(),p.setActiveCell(-1,!1,!1),t.forEach(function(e){p.selectNodeModel(e,!0,!1)}),p.ensureNodeModelVisible(t[0],!1,!0)})},this.selectRowsByUID=function(e){var t,n=this.getSelectedInterferences();if(n.length===e.length&&e.every(function(e,t){return e===n[t]}))return 1;p.unselectAll(),p.setActiveCell(-1,!1,!1),e.forEach(function(e){e&&u.search({match:function(n){var i=n.nodeModel.options.grid;(i.itfuid===e||i.childIds&&1===i.childIds.length&&i.childIds.indexOf(e)>-1)&&(p.selectNodeModel(n.nodeModel,!0,!1),t||(t=n.nodeModel))}})}),t&&p.ensureNodeModelVisible(t,!1,!0)},this.selectOrUnselectAll=function(e){e?p.selectAllVisibleNodes():p.unselectAll()},this.selectOrUnselectRows=function(e,t,n,i){var l=e.map(function(e){return p.model[e]});u.withTransactionUpdate(function(){l.forEach(function(e){t?p.selectNodeModel(e,n,i):p.unselectNodeModel(e)})}),p.ensureNodeModelVisible(l[0],!1,!0),i||p.setActiveCell(p.layout.getCellsFromNodeModel(l[0],!0)[0],!1,!0)},this.getNumberOfRows=function(){return p.model.length},this.getVisibleRows=function(){if(p)return p.model.map(function(e){return e.options.grid.itfuid})},this.getInternalChildInfo=function(e){var t;if(e)return u.search({match:function(n){var i=n.nodeModel.options.grid;(i.itfuid===e||i.childIds&&1===i.childIds.length&&i.childIds.indexOf(e)>-1)&&(t=i)}}),t},this.IsPenVolInQuantCol=function(){return S},this.toggleReadOnly=function(){u.withTransactionUpdate(function(){g=!g;var e=["tree","itfCtxName","itfDescription","itfUserType","itfAnalysis"];o.forEach(function(t){e.indexOf(t.dataIndex)>-1&&(t[p?"editableFlag":"isEditable"]=!g)})})},this.getRowInternalData=function(e){return e<=p.model.length?p.model[e].options.grid:{}},this.getColumns=function(){if(!p)return{};var e=[];return p.columns.forEach(function(t){e.push({dataIndex:t.dataIndex,text:t.text,editableFlag:t.editableFlag,visibleFlag:t.visibleFlag})}),e},this.getRowData=function(e,t,n){if(e>p.model.length)return[];var i=[],l=p.model[e].options.grid,a=p.layout.getLeafColumns();return t||(a=p.layout.getVisibleOrderedColumnsIndexes().map(function(e){return a[e]})),a.forEach(function(t){if(l[t.dataIndex]){var a=n?t.text:t.dataIndex;if("function"==typeof t.getCellValueForExport){var o=p.layout.getCellIDFromCoordinates({rowID:e,columnID:p.layout.getColumnIndex(t.dataIndex)});if(void 0!==p.getCellInfosAt(o).cellModel){var s=t.getCellValueForExport(p.getCellInfosAt(o));i[a]=s||" "}}else"time"===t.typeRepresentation?i[a]=new Date(l[t.dataIndex]).toLocaleString():i[a]=l[t.dataIndex]?l[t.dataIndex]:" "}}),n||(i.itfuid=l.itfuid?l.itfuid:void 0),i},this.getRowInfosFromMousePosition=function(e){var t=p.layout.getCellIDFromPositionInView(e),n=p.getCellInfosAt(t).rowID;return n>=0?m.getRowData(n,!1,!0):[]},this.ensureSelectedLineVisibility=function(){var e=p.getNodesXSO().get();e&&0!==e.length&&p.ensureNodeModelVisible(e[0],!1,!0)},this.setUnits=E,this.exportAsCSV=function(e){return p.getAsCSV(e)},this.switchQuantifierColumnVal=function(e){S=e.isPenVolume,u.getAllDescendants().forEach(function(t){"Clash"===t.options.grid.itfSystemType&&(t.options.grid.itfQuantifier=e.isPenVolume?t.options.grid.itfPenVol:t.options.grid.itfPenVec,t.updateOptions({grid:t.options.grid}))}),q()},this.reApplyFilterAndSort=q,this.updateDataGridView=function(e){setTimeout(function(){p.invalidateLayout(e)},0)},this.getLeafNodeIds=function(e){var t=e?p.getTreeDocument().getSelectedNodes():[u],n=[];return 1!==t.length||t[0].getChildren()?t.forEach(function(e){!e.getChildren()&&e.options.grid.itfuid?n.push(e.options.grid.itfuid):e.processDescendants({processNode:function(e){e.nodeModel.getChildren()||e.nodeModel.isFiltered()||!e.nodeModel.options.grid.itfuid||n.push(e.nodeModel.options.grid.itfuid)}})}):n.push(t[0].options.grid.itfuid),n},this.updateModel=function(e,t,n){var i={},l=[];i[t]=n,u.search({match:function(a){e&&a.nodeModel.options.grid.itfuid===e&&("tree"===t&&a.nodeModel.updateOptions({label:n}),a.nodeModel.updateOptions({grid:i}),l.push(a.nodeModel))}}),l.forEach(function(e){"function"==typeof e.onAttributeChangeFromUI&&e.onAttributeChangeFromUI({dataIndex:t,newValue:n})})},this.expandOrCollapse=function(e,t,n,i){var l=e?p.model:n||t.map(function(e){return p.model[e]}),a=[];return l.forEach(function(e){e.canBeExpanded()&&(i&&!e.isExpanded()||!i&&e.isExpanded())&&(n||e.getAllDescendants().forEach(function(e){e.canBeExpanded()&&e.options.grid.itfuid&&(i&&!e.isExpanded()||!i&&e.isExpanded())&&(a.push(e),i?e.expand():e.collapse())}),a.push(e),i?e.expand():e.collapse())}),a},this.onSelect=null,this.onUnselect=null,this.onCellEdit=null,this.contextualEvent=null,function(){!function(){if(!o){var e={itfLblSlide:{dataIndex:"itfLblSlide",icon:F,editableFlag:!1,getCellValue:T,getCellTypeRepresentation:G,getCellValueForExport:_,compareFunction:N,getCellSelectableState:H,pinned:"left",visibleFlag:!1,width:"50"},tree:{dataIndex:"tree",text:r.itfName,editableFlag:!g,getCellEditableState:J,setCellValue:Z,getCellValueForExport:_,alwaysVisibleFlag:!0,width:"15%"},itfCtxName:{dataIndex:"itfCtxName",text:r.itfCtxName,editableFlag:!g,getCellEditableState:J,setCellValue:Z,visibleFlag:!1,width:"auto"},itfSystemType:{dataIndex:"itfSystemType",text:r.itfSystemType,getCellValue:V,editableFlag:!1,width:"auto"},itfUserType:{dataIndex:"itfUserType",text:r.itfUserType,editableFlag:!g,getCellEditableState:J,setCellValue:Z,width:"auto",compareFunction:k,getCellKPIColor:W,getCellTypeRepresentation:U,editionPolicy:"EditionOnOver",getCellValueForExport:_},itfAnalysis:{dataIndex:"itfAnalysis",text:r.itfAnalysis,editableFlag:!g,getCellEditableState:J,setCellValue:Z,width:"auto",compareFunction:A,getCellKPIColor:Q,getCellTypeRepresentation:j,editionPolicy:"EditionOnOver",getCellValueForExport:_},itfPrevAnalysis:{dataIndex:"itfPrevAnalysis",text:r.itfPrevAnalysis,getCellValue:B,editableFlag:!1,width:"auto"},itfLblInst1Path:{dataIndex:"itfLblInst1Path",text:r.itfLblInst1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Path:{dataIndex:"itfLblInst2Path",text:r.itfLblInst2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Path:{dataIndex:"itfLblRef1Path",text:r.itfLblRef1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2Path:{dataIndex:"itfLblRef2Path",text:r.itfLblRef2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst1:{dataIndex:"itfLblFstInst1",text:r.itfLblFstInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1:{dataIndex:"itfLblInst1",text:r.itfLblInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst2:{dataIndex:"itfLblFstInst2",text:r.itfLblFstInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2:{dataIndex:"itfLblInst2",text:r.itfLblInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstType1:{dataIndex:"itfLblFstType1",text:r.itfLblFstType1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef1:{dataIndex:"itfLblFstRef1",text:r.itfLblFstRef1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1:{dataIndex:"itfLblRef1",text:r.itfLblRef1,editableFlag:!1,width:"auto"},itfLblFstType2:{dataIndex:"itfLblFstType2",text:r.itfLblFstType2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef2:{dataIndex:"itfLblFstRef2",text:r.itfLblFstRef2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2:{dataIndex:"itfLblRef2",text:r.itfLblRef2,editableFlag:!1,width:"auto"},itfFeatName1:{dataIndex:"itfFeatName1",text:r.itfFeatName1,editableFlag:!1,width:"auto",visibleFlag:!1},itfFeatName2:{dataIndex:"itfFeatName2",text:r.itfFeatName2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1:{dataIndex:"itfLblShape1",text:r.itfLblShape1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2:{dataIndex:"itfLblShape2",text:r.itfLblShape2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1Owner:{dataIndex:"itfLblInst1Owner",text:r.itfLblInst1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Owner:{dataIndex:"itfLblInst2Owner",text:r.itfLblInst2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Owner:{dataIndex:"itfLblRef1Owner",text:r.itfLblRef1Owner,editableFlag:!1,width:"auto"},itfLblRef2Owner:{dataIndex:"itfLblRef2Owner",text:r.itfLblRef2Owner,editableFlag:!1,width:"auto"},itfLblShape1Owner:{dataIndex:"itfLblShape1Owner",text:r.itfLblShape1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2Owner:{dataIndex:"itfLblShape2Owner",text:r.itfLblShape2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1OwnerID:{dataIndex:"itfLblInst1OwnerID",text:r.itfLblInst1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2OwnerID:{dataIndex:"itfLblInst2OwnerID",text:r.itfLblInst2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Ref:{dataIndex:"itfLblMaturity1Ref",text:r.itfLblMaturity1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Ref:{dataIndex:"itfLblMaturity2Ref",text:r.itfLblMaturity2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Ref:{dataIndex:"itfLblOrganization1Ref",text:r.itfLblOrganization1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Ref:{dataIndex:"itfLblOrganization2Ref",text:r.itfLblOrganization2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Ref:{dataIndex:"itfLblCollabSpace1Ref",text:r.itfLblCollabSpace1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Ref:{dataIndex:"itfLblCollabSpace2Ref",text:r.itfLblCollabSpace2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1OwnerID:{dataIndex:"itfLblRef1OwnerID",text:r.itfLblRef1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2OwnerID:{dataIndex:"itfLblRef2OwnerID",text:r.itfLblRef2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Ref:{dataIndex:"itfLblRevision1Ref",text:r.itfLblRevision1Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Ref:{dataIndex:"itfLblRevision2Ref",text:r.itfLblRevision2Ref,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity1Shape:{dataIndex:"itfLblMaturity1Shape",text:r.itfLblMaturity1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblMaturity2Shape:{dataIndex:"itfLblMaturity2Shape",text:r.itfLblMaturity2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization1Shape:{dataIndex:"itfLblOrganization1Shape",text:r.itfLblOrganization1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblOrganization2Shape:{dataIndex:"itfLblOrganization2Shape",text:r.itfLblOrganization2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace1Shape:{dataIndex:"itfLblCollabSpace1Shape",text:r.itfLblCollabSpace1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblCollabSpace2Shape:{dataIndex:"itfLblCollabSpace2Shape",text:r.itfLblCollabSpace2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1OwnerID:{dataIndex:"itfLblShape1OwnerID",text:r.itfLblShape1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2OwnerID:{dataIndex:"itfLblShape2OwnerID",text:r.itfLblShape2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision1Shape:{dataIndex:"itfLblRevision1Shape",text:r.itfLblRevision1Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRevision2Shape:{dataIndex:"itfLblRevision2Shape",text:r.itfLblRevision2Shape,editableFlag:!1,width:"auto",visibleFlag:!1},itfQuantifier:{dataIndex:"itfQuantifier",text:r.itfQuantifier,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:T,getCellSemantics:z,getCellValueForExport:K},itfPenVol:{dataIndex:"itfPenVol",text:r.itfPenVol,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:T,getCellSemantics:z,getCellValueForExport:K},itfPenVec:{dataIndex:"itfPenVec",text:r.itfPenVec,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:T,getCellSemantics:z,getCellValueForExport:K},itfMinDist:{dataIndex:"itfMinDist",text:r.itfMinDist,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:T,getCellSemantics:z,getCellValueForExport:K},itfDescription:{dataIndex:"itfDescription",text:r.itfDescription,editableFlag:!g,getCellEditableState:J,setCellValue:Z,width:"auto"},itfTolerance:{dataIndex:"itfTolerance",text:r.itfTolerance,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:T,getCellSemantics:z,getCellValueForExport:K},itfOwner:{dataIndex:"itfOwner",text:r.itfOwner,editableFlag:!1,width:"auto"},itfOwnerID:{dataIndex:"itfOwnerID",text:r.itfOwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfCurrent:{dataIndex:"itfCurrent",text:r.itfCurrent,editableFlag:!1,width:"auto",visibleFlag:!1}},t=C||["itfLblSlide","tree","itfCtxName","itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblInst1Path","itfLblInst2Path","itfLblRef1Path","itfLblRef2Path","itfLblFstInst1","itfLblInst1","itfLblFstInst2","itfLblInst2","itfLblFstType1","itfLblFstRef1","itfLblRef1","itfLblFstType2","itfLblFstRef2","itfLblRef2","itfFeatName1","itfFeatName2","itfLblShape1","itfLblShape2","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblMaturity1Ref","itfLblMaturity2Ref","itfLblOrganization1Ref","itfLblOrganization2Ref","itfLblCollabSpace1Ref","itfLblCollabSpace2Ref","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblRevision1Ref","itfLblRevision2Ref","itfLblMaturity1Shape","itfLblMaturity2Shape","itfLblOrganization1Shape","itfLblOrganization2Shape","itfLblCollabSpace1Shape","itfLblCollabSpace2Shape","itfLblShape1OwnerID","itfLblShape2OwnerID","itfLblRevision1Shape","itfLblRevision2Shape","itfQuantifier","itfPenVol","itfPenVec","itfMinDist","itfDescription","itfTolerance","itfOwner","itfOwnerID","itfCurrent"];x&&(Object.assign(e.tree,x.tree),t.forEach(function(t){e[t]?Object.assign(e[t],x[t]):e[t]=x[t]})),o=t.map(function(t){return e[t]})}}();var t=Object.keys(h),l=t.length>0;u=new i({useAsyncPreExpand:!1,shouldAcceptDrag:function(){return l},shouldAcceptDrop:function(){return!1}});var a={identifier:I,treeDocument:u,defaultColumnDef:{width:"auto",height:80},columns:o,rowSelection:"multiple",cellSelection:{defaultValue:"none"},sortModel:[{dataIndex:"tree",sort:"asc"}],rowDragEnabledFlag:!w&&l,allowUnsafeHTMLContent:!1,cellDragEnabledFlag:!w&&l,activateAllCellsRenderedEventFlag:!0,placeholder:r.NoInterference,recId:"pimItfList",onContextualEvent:function(t){var n=[],i=t.cellInfos;if(t&&t.collectionView&&i)if(-1===i.rowID){if(-1===i.columnID)return[];var l,a=p.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);if("tree"===a&&(a="label"),l=P.indexOf(a)>-1||"itfLblSlide"===a?"number":M.indexOf(a)>-1?"set":"stringRegexp",u.getFilterManager().getFilters().hasOwnProperty(a)){var o=u.getFilterManager().getFilters()[a];o&&o.defaultFilterModel&&(o.defaultFilterModel=[])}else u.getFilterManager().setPropertyFilterModel(a,{filterId:l});var s=(n=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!1,columnsManagement:!0,sizeColumnToFit:!0})).splice(n.length-1,1)[0];n.push({title:r.itfExpandAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){u.withTransactionUpdate(function(){u.expandAll()})}}}),n.push({title:r.itfCollapseAllRows,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){u.withTransactionUpdate(function(){u.collapseAll()})}}}),p.layout.getColumnAlwaysVisibleFlag(a)||n.push({title:r.itfHideColumn,type:"PushItem",action:{callback:function(){p.layout.setColumnVisibleFlag(p.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID),!1,{isUserInteraction:!0})}}}),n.push({type:"SeparatorItem",title:""}),w?n.push(Object.assign({},s,{id:"customView",action:{context:t.collectionView}})):n.push(s),"itfQuantifier"===p.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID)&&3===y&&n.push({title:r.itfClashVal,type:"PushItem",submenu:[{title:r.itfPenVol,type:"RadioItem",state:S?"selected":"unselected",action:{callback:function(){S||m.switchQuantifierColumnVal({isPenVolume:!0})}}},{title:r.itfPenVec,type:"RadioItem",state:S?"unselected":"selected",action:{callback:function(){S&&m.switchQuantifierColumnVal({isPenVolume:!1})}}}]})}else{if(!m.getSelectedInterferences().length)return[];var d=p.getNodesXSO().get();d.some(function(e){return e.canBeExpanded()&&(!e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&!e.isExpanded()}))})&&n.push({title:r.itfExpandAll,type:"PushItem",icon:{iconName:"flow-tree-expand-down",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){u.withTransactionUpdate(function(){p.getNodesXSO().get().forEach(function(e){e.expandAll()})})}}}),d.some(function(e){return e.canBeExpanded()&&(e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&e.isExpanded()}))})&&n.push({title:r.itfCollapseAll,type:"PushItem",icon:{iconName:"flow-tree-expand-up",fontIconFamily:window.WUXManagedFontIcons.Font3DS},action:{callback:function(){u.withTransactionUpdate(function(){p.getNodesXSO().get().forEach(function(e){e.collapseAll()})})}}}),g||w||(n=n.concat(m.onContextualEvent()))}if(w&&t&&t.collectionView&&i){var c={isHeaderMenu:-1===i.rowID,isRowMenu:i.rowID>=0},f=e.clone(n,!1);m.contextualEvent(c,f),n=[]}return n}};if(t.forEach(function(e){a[e]=h[e]}),h=null,(p=new n(a)).getContent().addClassName("pimWebTreeListView"),p.getTypeRepresentationFactory().registerTypeRepresentations(R),window.__karma__&&(p.layout.addCellCoordinates=!0),w){var s=new e.createElement("div");p.inject(s),b.appendChild(s)}else b.content=p;p.addEventListener("DSpointerhit",function(e,t){var n=t&&t.columnID>=0?p.columns[t.columnID].dataIndex:null;if("itfLblSlide"===n){var i=t.nodeModel.options.grid.itfuid;m.onSelect({idsSelected:[i],cellClickedIdx:"itfLblSlide",idCellClicked:i})}n&&b&&b.isSmallWidth&&b.isSmallWidth()&&(g||"itfAnalysis"!==n&&"itfUserType"!==n&&"itfDescription"!==n&&"itfMetricName"!==n)&&b.collapsePanel()}),u.getFilterManager().subscribe("filterModelChange",function(){setTimeout(function(){!function(){let t=e.clone(u.getFilterManager().filterModel,!0);t=Object.keys(t).reduce((e,n)=>(t[n].filterModel&&Object.keys(t[n].filterModel).length>0&&(e[n]=t[n]),e),{}),localStorage.setItem(I,JSON.stringify({filterModel:t}))}(),m.ensureSelectedLineVisibility()},10)});var d=p.getNodesXSO();d.options.getElementID=void 0,d.onPostAdd(Y),d.onPostRemove($),u.getModelEvents().subscribe({event:"sortChildren"},function(){setTimeout(function(){m.ensureSelectedLineVisibility()},0)}),u.onPostCollapse(function(){m.updateDataGridView({updateCellLayout:!0,freePool:!0})}),u.onPostExpand(function(){m.updateDataGridView({updateCellLayout:!0,freePool:!0})})}()}})}),define("DS/PIMwebUX/PIMwebItfListUI",["UWA/Core","UWA/Class","DS/DataGridView/DataGridView","DS/Tree/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PIMwebUX/PIMwebUnitsUX","i18n!DS/PIMwebUX/assets/nls/PIMwebItfListUI","css!DS/PIMwebUX/assets/css/PIMwebItfListUI"],function(e,t,n,i,l,a,o){"use strict";var s="NotAnalyzed",r="OK",d="KO",c="Clash",u="Contact",f="Clearance",p="NoInterference",g="Undefined",h="rgb(204, 9, 47)",b="rgb(255, 138, 46)",m="rgb(111, 188, 75)",I="rgb(0, 157, 219)",w="rgb(254, 224, 0)",C="rgb(111, 188, 75)",x="rgb(204, 9, 47)",v="rgb(254, 224, 0)",S={iconName:"presentation-slide",fontIconFamily:window.WUXManagedFontIcons.Font3DS},y=["itfQuantifier","itfPenVec","itfMinDist","itfPenVol","itfTolerance"],F={EnumItfType:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus1:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}},EnumItfStatus2:{stdTemplate:"enumCombo",semantics:{possibleValues:{},valueType:"enumCustom"}}};F.EnumItfType.semantics.possibleValues[o.Clash]=c,F.EnumItfType.semantics.possibleValues[o.Contact]=u,F.EnumItfType.semantics.possibleValues[o.Clearance]=f,F.EnumItfType.semantics.possibleValues[o.NoInterference]=p,F.EnumItfType.semantics.possibleValues[o.Undefined]=g,F.EnumItfStatus1.semantics.possibleValues[o.itfOK]=r,F.EnumItfStatus1.semantics.possibleValues[o.itfKO]=d,F.EnumItfStatus1.semantics.possibleValues[o.itfToAnalyze]=s,F.EnumItfStatus2.semantics.possibleValues[o.itfOK]=r,F.EnumItfStatus2.semantics.possibleValues[o.itfKO]=d,F.EnumItfStatus2.semantics.possibleValues[o.itfToReAnalyze]=s;var L,P,M,R,E,D=function(e,t){var n=o[e],i=o[t];return n===i?0:n<i?-1:1},O=function(e,t,n,i){return L=n.options.grid.itfPrevAnalysis,P=i.options.grid.itfPrevAnalysis,M=t===s?""===P?"itfToAnalyze":"itfToReAnalyze":t===r?"itfOK":"itfKO",R=o[e===s?""===L?"itfToAnalyze":"itfToReAnalyze":e===r?"itfOK":"itfKO"],E=o[M],R===E?0:R<E?-1:1};function T(e,t){return e||t?e?t?e===t?0:e<t?-1:1:1:-1:0}function V(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfUserType)return"EnumItfType"}function k(e){if(e&&-1!==e.rowID&&e.nodeModel&&e.nodeModel.options.grid.itfAnalysis)return""===e.nodeModel.options.grid.itfPrevAnalysis?"EnumItfStatus1":"EnumItfStatus2"}function A(e){if(e&&-1!==e.rowID&&e.nodeModel)return e.nodeModel.options.grid.itfLblSlide?"url":void 0}function N(e){var t=e.cellModel;return t===c?h:t===u?b:t===f?m:t===p?I:t===g?w:null}function U(e){var t=e.cellModel;return t===r?C:t===d?x:t===s?v:null}function j(e,t){return e<t?-1:e>t?1:0}return t.extend({init:function(t){var d,c,u={},f=null,p=t.readOnly,g=t.cbDnD?t.cbDnD:{},h=t.parent,b=this,m="PIMwebItfListColPref"+(t.suffix?t.suffix:""),I=!1,w=t.deforder,C=t.defCols,x={},v=!0,L=0;function P(e){(e||e.length||e.volume)&&(e.length.unit&&a.length[e.length.unit]&&(x.length={val:e.length.unit,ratio:a.length[e.length.unit],decimalRW:e.length.decimalPlaceRW,decimalRO:e.length.decimalPlaceRO}),e.volume.unit&&a.volume[e.volume.unit]&&(x.volume={val:e.volume.unit,ratio:a.volume[e.volume.unit],decimalRW:e.volume.decimalPlaceRW,decimalRO:e.volume.decimalPlaceRO}),e.highExponent&&(x.highExponent=e.highExponent),e.lowExponent&&(x.lowExponent=e.lowExponent))}function M(e,t){if(!("number"!=typeof e||e<=0)){var n=t?x.volume:x.length,i=e;if(I){var l=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimalRW)),a=1-Math.floor(Math.log(i)/Math.log(10)+1),o=n.decimalRW+a+x.highExponent+1;i=0!==l?l:Number((i*(t?1:.001)*n.ratio).toFixed(o))}else i&&(i=Number((i*(t?1:.001)*n.ratio).toFixed(n.decimalRO)));return i}}function R(e){if("itfLblSlide"===e)return this.grid[e]?this.grid[e]:0;if("label"===e)return this.label;if(y.indexOf(e)>-1){var t="itfPenVol"===e||v&&"itfQuantifier"===e&&"Clash"===this.grid.itfSystemType;return this.grid[e]?M(this.grid[e],t):void 0}return this.grid[e]}function E(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===t)return e.nodeModel.options.grid[t]?{icon:S,label:e.nodeModel.options.grid[t]}:void 0;var n="itfPenVol"===t||v&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType;return M(e.nodeModel.options.grid[t],n)}}function G(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return o[e.nodeModel.options.grid[t]]||""}}function W(e){if(e.nodeModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return o["itf"+e.nodeModel.options.grid[t]]||""}}function Q(e){if("number"==typeof e.cellModel){var t=f.layout.getDataIndexFromColumnIndex(e.columnID);return{units:("itfPenVol"===t||v&&"itfQuantifier"===t&&"Clash"===e.nodeModel.options.grid.itfSystemType?x.volume:x.length).val}}}function X(e){if(-1!==e.rowID&&e.cellModel)return E(e)+" "+Q(e).units}function B(e){var t="",n=f.layout.getDataIndexFromColumnIndex(e.columnID);if("itfLblSlide"===n)return-1===e.rowID?o.itfLblSlide:e.nodeModel.options.grid.itfLblSlide?String(e.nodeModel.options.grid.itfLblSlide):"";if(-1!==e.rowID&&e.cellModel){if("itfUserType"===n)t=o[e.cellModel];else{var i=e.nodeModel.options.grid.itfPrevAnalysis,l=e.cellModel;t=o[l===s?""===i?"itfToAnalyze":"itfToReAnalyze":l===r?"itfOK":"itfKO"]}return t}}function z(){setTimeout(function(){f.reapplySortModel();var t=JSON.parse(localStorage.getItem(m));t&&t.filterModel&&!e.equals(t.filterModel,{})&&(c.setFilterModel({}),c.setFilterModel(t.filterModel))},10)}function K(e,t){if(!p){var n=f.columns[e.columnID].dataIndex,i=[];"tree"===n&&e.nodeModel.updateOptions({label:t}),(i=f.getTreeDocument().getSelectedNodes().filter(function(e){return e.options.grid.itfuid})).length||i.push(e.nodeModel),c.withTransactionUpdate(function(){i.forEach(function(e){var i={};i[n]=t,e.updateOptions({grid:i})})}),i.forEach(function(e){b.onCellEdit&&b.onCellEdit({id:e.options.grid.itfuid,param:"tree"===n?"itfCtxName":n,newValue:t})})}}function H(e){Array.isArray(e)&&"function"==typeof b.onSelect&&setTimeout(function(){I?b.onSelect(e):b.onSelect({idsSelected:e.map(function(e){return e.options.grid.itfuid})})},0)}function _(e){setTimeout(function(){Array.isArray(e)&&"function"==typeof b.onUnselect&&(I?b.onUnselect(e):b.onUnselect(e.map(function(e){return e.options.grid.itfuid})))},0)}function q(e){e&&(e.itfQuantifier=void 0,"Clash"===e.itfSystemType?e.itfQuantifier=v?e.itfPenVol:e.itfPenVec:"Clearance"===e.itfSystemType&&(e.itfQuantifier=e.itfMinDist))}t.isWebInWin&&(I=!0),P(e.extend({length:{unit:"mm",decimalRW:3,decimalRO:3},volume:{unit:"mm3",decimalRW:3,decimalRO:3}},t.units)),this.updateInterferences=function(e){var t=[];c.withTransactionUpdate(function(){e.forEach(function(e){u.hasOwnProperty(e.itfuid)?(q(e),u[e.itfuid].updateOptions({label:e.itfCtxName,grid:e})):t.push(e)}),function(e){if(e.length){var t=[],n=L;3!==n&&e.some(function(e){return"Clash"===e.itfSystemType&&(e.itfPenVol&&e.itfPenVec?L=3:e.itfPenVol?L=2===L?3:1:e.itfPenVec&&(L=1===L?3:2),n||(v=f&&2!==L),3===L)}),e.forEach(function(e){if(!u[e.itfuid]){q(e);var n=new l({label:e.itfCtxName,grid:e,getAttributeValueForFiltering:R});u[e.itfuid]=n,t.push(n),window.__karma__&&(n.toChangeValueForODT=K)}}),c.addRoot(t)}}(t),z()})},this.showSlideColumn=function(e){d.forEach(function(t){"itfLblSlide"===t.dataIndex&&f.layout.setColumnVisibleFlag(t.dataIndex,e,{isUserInteraction:!0})})},this.removeInterferences=function(){L=0,v=!0,f.getNodesXSO().empty(),c.empty(),u={}},this.getSelectedInterferences=function(){return f.getTreeDocument().getSelectedNodes().map(function(e){return e.options.grid.itfuid}).filter(function(e){return e})},this.getSelectedRows=function(){var e=[];return f.getNodesXSO().get().forEach(function(t){var n=f.layout.getCellsFromNodeModel(t,!0);n&&e.push(f.getCellInfosAt(n[0]).rowID)}),e.sort(j)},this.selectRows=function(e){var t=e.map(function(e){return f.model[e]});c.withTransactionUpdate(function(){f.unselectAll(),f.setActiveCell(-1,!1,!1),t.forEach(function(e){f.selectNodeModel(e,!0,!1)}),f.ensureNodeModelVisible(t[0],!1)})},this.selectRowsByUID=function(e){var t,n=this.getSelectedInterferences();if(n.length===e.length&&e.every(function(e,t){return e===n[t]}))return 1;f.unselectAll(),f.setActiveCell(-1,!1,!1),e.forEach(function(e){e&&c.search({match:function(n){n.nodeModel.options.grid.itfuid===e&&(f.selectNodeModel(n.nodeModel,!0,!1),t||(t=n.nodeModel))}})}),t&&f.ensureNodeModelVisible(t,!1)},this.getNumberOfRows=function(){return f.model.length},this.getVisibleRows=function(){if(f)return f.model.map(function(e){return e.options.grid.itfuid})},this.IsPenVolInQuantCol=function(){return v},this.toggleReadOnly=function(){c.withTransactionUpdate(function(){p=!p;var e=["tree","itfDescription","itfMetricName","itfUserType","itfAnalysis"];d.forEach(function(t){e.indexOf(t.dataIndex)>-1&&(t[f?"editableFlag":"isEditable"]=!p)})})},this.selectItf=function(e){f.getNodesXSO().empty(),e.forEach(function(e){c.search({match:function(t){e&&t.nodeModel.options.grid.itfuid===e&&(t.nodeModel.select(),f.ensureNodeModelVisible(t.nodeModel,!1))}})})},this.getRowData=function(e,t,n){var i=[],l=f.model[e].options.grid,a=f.layout.getLeafColumns();return t||(a=f.layout.getVisibleOrderedColumnsIndexes().map(function(e){return a[e]})),a.forEach(function(t){var a=n?t.text:t.dataIndex;if("function"==typeof t.getCellValueForExport){var o=f.layout.getCellIDFromCoordinates({rowID:e,columnID:f.layout.getColumnIndex(t.dataIndex)});if(void 0!==f.getCellInfosAt(o).cellModel){var s=t.getCellValueForExport(f.getCellInfosAt(o));i[a]=s||" "}}else"time"===t.typeRepresentation?i[a]=new Date(l[t.dataIndex]).toLocaleString():i[a]=l[t.dataIndex]?l[t.dataIndex]:" "}),n||(i.itfuid=l.itfuid?l.itfuid:void 0),i},this.getRowInfosFromMousePosition=function(e){var t=f.layout.getCellIDFromPositionInView(e),n=f.getCellInfosAt(t).rowID;return n>=0?b.getRowData(n,!1,!0):[]},this.ensureSelectedLineVisibility=function(){var e=f.getNodesXSO().get();e&&0!==e.length&&f.ensureNodeModelVisible(e[0],!1)},this.setUnits=P,this.exportAsCSV=function(e){return f.getAsCSV(e)},this.switchQuantifierColumnVal=function(e){v=e.isPenVolume,c.getAllDescendants().forEach(function(t){"Clash"===t.options.grid.itfSystemType&&(t.options.grid.itfQuantifier=e.isPenVolume?t.options.grid.itfPenVol:t.options.grid.itfPenVec,t.updateOptions({grid:t.options.grid}))}),z()},this.reApplyFilterAndSort=z,this.updateDataGridView=function(e){f.prepareUpdateView(),f.pushUpdateView(e,!0)},this.onSelect=null,this.onUnselect=null,this.onCellEdit=null,this.contextualEvent=null,function(){!function(){if(!d){var e={itfLblSlide:{dataIndex:"itfLblSlide",icon:S,editableFlag:!1,getCellValue:E,getCellTypeRepresentation:A,getCellValueForExport:B,compareFunction:T,pinned:"left",visibleFlag:!1,width:"50"},tree:{dataIndex:"tree",text:o.tree,editableFlag:!p,setCellValue:K,width:"15%"},itfSystemType:{dataIndex:"itfSystemType",text:o.itfSystemType,getCellValue:G,editableFlag:!1,width:"auto"},itfUserType:{dataIndex:"itfUserType",text:o.itfUserType,editableFlag:!p,setCellValue:K,width:"auto",compareFunction:D,getCellKPIColor:N,getCellTypeRepresentation:V,editionPolicy:"EditionOnOver",getCellValueForExport:B},itfAnalysis:{dataIndex:"itfAnalysis",text:o.itfAnalysis,editableFlag:!p,setCellValue:K,width:"auto",compareFunction:O,getCellKPIColor:U,getCellTypeRepresentation:k,editionPolicy:"EditionOnOver",getCellValueForExport:B},itfPrevAnalysis:{dataIndex:"itfPrevAnalysis",text:o.itfPrevAnalysis,getCellValue:W,editableFlag:!1,width:"auto"},itfLblInst1Path:{dataIndex:"itfLblInst1Path",text:o.itfLblInst1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Path:{dataIndex:"itfLblInst2Path",text:o.itfLblInst2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Path:{dataIndex:"itfLblRef1Path",text:o.itfLblRef1Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2Path:{dataIndex:"itfLblRef2Path",text:o.itfLblRef2Path,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst1:{dataIndex:"itfLblFstInst1",text:o.itfLblFstInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1:{dataIndex:"itfLblInst1",text:o.itfLblInst1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstInst2:{dataIndex:"itfLblFstInst2",text:o.itfLblFstInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2:{dataIndex:"itfLblInst2",text:o.itfLblInst2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstType1:{dataIndex:"itfLblFstType1",text:o.itfLblFstType1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef1:{dataIndex:"itfLblFstRef1",text:o.itfLblFstRef1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1:{dataIndex:"itfLblRef1",text:o.itfLblRef1,editableFlag:!1,width:"auto"},itfLblFstType2:{dataIndex:"itfLblFstType2",text:o.itfLblFstType2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblFstRef2:{dataIndex:"itfLblFstRef2",text:o.itfLblFstRef2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2:{dataIndex:"itfLblRef2",text:o.itfLblRef2,editableFlag:!1,width:"auto"},itfLblShape1:{dataIndex:"itfLblShape1",text:o.itfLblShape1,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2:{dataIndex:"itfLblShape2",text:o.itfLblShape2,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1Owner:{dataIndex:"itfLblInst1Owner",text:o.itfLblInst1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2Owner:{dataIndex:"itfLblInst2Owner",text:o.itfLblInst2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1Owner:{dataIndex:"itfLblRef1Owner",text:o.itfLblRef1Owner,editableFlag:!1,width:"auto"},itfLblRef2Owner:{dataIndex:"itfLblRef2Owner",text:o.itfLblRef2Owner,editableFlag:!1,width:"auto"},itfLblShape1Owner:{dataIndex:"itfLblShape1Owner",text:o.itfLblShape1Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2Owner:{dataIndex:"itfLblShape2Owner",text:o.itfLblShape2Owner,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst1OwnerID:{dataIndex:"itfLblInst1OwnerID",text:o.itfLblInst1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblInst2OwnerID:{dataIndex:"itfLblInst2OwnerID",text:o.itfLblInst2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef1OwnerID:{dataIndex:"itfLblRef1OwnerID",text:o.itfLblRef1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblRef2OwnerID:{dataIndex:"itfLblRef2OwnerID",text:o.itfLblRef2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape1OwnerID:{dataIndex:"itfLblShape1OwnerID",text:o.itfLblShape1OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfLblShape2OwnerID:{dataIndex:"itfLblShape2OwnerID",text:o.itfLblShape2OwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfQuantifier:{dataIndex:"itfQuantifier",text:o.itfQuantifier,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:E,getCellSemantics:Q,getCellValueForExport:X},itfPenVol:{dataIndex:"itfPenVol",text:o.itfPenVol,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:E,getCellSemantics:Q,getCellValueForExport:X},itfPenVec:{dataIndex:"itfPenVec",text:o.itfPenVec,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:E,getCellSemantics:Q,getCellValueForExport:X},itfMinDist:{dataIndex:"itfMinDist",text:o.itfMinDist,editableFlag:!1,width:"auto",visibleFlag:!1,typeRepresentation:"double",getCellValue:E,getCellSemantics:Q,getCellValueForExport:X},itfDescription:{dataIndex:"itfDescription",text:o.itfDescription,editableFlag:!p,setCellValue:K,width:"auto"},itfTolerance:{dataIndex:"itfTolerance",text:o.itfTolerance,editableFlag:!1,width:"auto",typeRepresentation:"double",getCellValue:E,getCellSemantics:Q,getCellValueForExport:X},itfOwner:{dataIndex:"itfOwner",text:o.itfOwner,editableFlag:!1,width:"auto"},itfOwnerID:{dataIndex:"itfOwnerID",text:o.itfOwnerID,editableFlag:!1,width:"auto",visibleFlag:!1},itfMetricName:{dataIndex:"itfMetricName",text:o.itfMetricName,editableFlag:!p,setCellValue:K,width:"auto"},itfCurrent:{dataIndex:"itfCurrent",text:o.itfCurrent,editableFlag:!1,width:"auto",visibleFlag:!1}},t=!0===I?w:["itfLblSlide","tree","itfSystemType","itfUserType","itfAnalysis","itfPrevAnalysis","itfLblInst1Path","itfLblInst2Path","itfLblRef1Path","itfLblRef2Path","itfLblFstInst1","itfLblInst1","itfLblFstInst2","itfLblInst2","itfLblFstType1","itfLblFstRef1","itfLblRef1","itfLblFstType2","itfLblFstRef2","itfLblRef2","itfLblShape1","itfLblShape2","itfLblInst1Owner","itfLblInst2Owner","itfLblRef1Owner","itfLblRef2Owner","itfLblShape1Owner","itfLblShape2Owner","itfLblInst1OwnerID","itfLblInst2OwnerID","itfLblRef1OwnerID","itfLblRef2OwnerID","itfLblShape1OwnerID","itfLblShape2OwnerID","itfQuantifier","itfPenVol","itfPenVec","itfMinDist","itfDescription","itfTolerance","itfOwner","itfOwnerID","itfMetricName","itfCurrent"];I&&(Object.assign(e.tree,C.tree),t.forEach(function(t){e[t]||(e[t]=C[t])})),d=t.map(function(t){return e[t]})}}();var t=Object.keys(g),l=t.length>0;c=new i({useAsyncPreExpand:!1,shouldAcceptDrag:function(){return l},shouldAcceptDrop:function(){return!1}});var a={identifier:m,treeDocument:c,defaultColumnDef:{width:"auto",height:80},columns:d,rowSelection:"multiple",cellSelection:{defaultValue:"none"},sortModel:[{dataIndex:"tree",sort:"asc"}],rowDragEnabledFlag:!I&&l,allowUnsafeHTMLContent:!1,cellDragEnabledFlag:!I&&l,activateAllCellsRenderedEventFlag:!0,placeholder:o.NoInterference,recId:"pimItfList",onContextualEvent:function(t){var n=[],i=t.cellInfos;if(!I&&t&&t.collectionView&&i){if(-1===i.rowID){var l=(n=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!1,columnsManagement:!0,sizeColumnToFit:!0})).splice(n.length-1,1)[0];n.push({type:"PushItem",title:o.itfHideColumn,action:{callback:function(){var e=f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);f.layout.setColumnVisibleFlag(e,!1,{isUserInteraction:!0})}}});var a,s=c.getFilterManager().filterModel,r=f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID);"tree"===r&&(r="label"),a=Boolean(s[r]),n.push({type:"PushItem",title:a?o.itfRemoveFilter:o.itfAddFilter,action:{callback:a?function(){delete(s=e.extend({},s))[r],c.setFilterModel(s)}:function(){var e=y.indexOf(r)>-1||"itfLblSlide"===r?"number":"stringRegexp";c.getFilterManager().setPropertyFilterModel(r,{filterId:e})}}}),n.push({type:"SeparatorItem",title:""}),n.push(l),"itfQuantifier"===f.layout.getDataIndexFromColumnIndex(t.cellInfos.columnID)&&3===L&&n.push({title:o.itfClashVal,type:"PushItem",submenu:[{title:o.itfPenVol,type:"RadioItem",state:v?"selected":"unselected",action:{callback:function(){v||b.switchQuantifierColumnVal({isPenVolume:!0})}}},{title:o.itfPenVec,type:"RadioItem",state:v?"unselected":"selected",action:{callback:function(){v&&b.switchQuantifierColumnVal({isPenVolume:!1})}}}]})}else if(!p){if(!b.getSelectedInterferences().length)return[];n=b.onContextualEvent()}}else{if(!b.getSelectedInterferences().length&&i.rowID>=0)return[];var d={column:{isPenVol:v,isQuantiColSubMenu:3===L},rows:[]};b.contextualEvent(t,d)}return n}};if(t.forEach(function(e){a[e]=g[e]}),g=null,(f=new n(a)).getContent().addClassName("pimWebTreeListView"),f.getTypeRepresentationFactory().registerTypeRepresentations(F),window.__karma__&&(f.layout.addCellCoordinates=!0),I){var s=new e.createElement("div");f.inject(s),h.appendChild(s)}else h.content=f;f.addEventListener("DSpointerhit",function(e,t){var n=t&&t.columnID>=0?f.columns[t.columnID].dataIndex:null;if("itfLblSlide"===n){var i=t.nodeModel.options.grid.itfuid;b.onSelect({idsSelected:[i],cellClickedIdx:"itfLblSlide",idCellClicked:i})}n&&h&&h.isSmallWidth&&h.isSmallWidth()&&(p||"itfAnalysis"!==n&&"itfUserType"!==n&&"itfDescription"!==n&&"itfMetricName"!==n)&&h.collapsePanel()}),c.getFilterManager().subscribe("filterModelChange",function(){!function(){let t=e.clone(c.getFilterManager().filterModel,!0);t=Object.keys(t).reduce((e,n)=>(t[n].filterModel&&Array.isArray(t[n].filterModel)&&t[n].filterModel.length>0&&(e[n]=t[n]),e),{}),localStorage.setItem(m,JSON.stringify({filterModel:t}))}(),setTimeout(function(){b.ensureSelectedLineVisibility()},0)});var r=f.getNodesXSO();r.options.getElementID=void 0,r.onPostAdd(H),r.onPostRemove(_),c.getModelEvents().subscribe({event:"sortChildren"},function(){setTimeout(function(){b.ensureSelectedLineVisibility()},0)})}()}})}),define("DS/PIMwebUX/PIMwebIsrPanelContextTab",["UWA/Core","UWA/Class","DS/Controls/Button","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/Controls/Toggle","DS/CoreEvents/Events","DS/PIMwebUX/PIMwebIsrContextGroupView","DS/WebappsUtils/WebappsUtils","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelContextTab","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d){"use strict";return t.extend({init:function(t){if(t){var a=this;a.productContext={},a.groups=[];var r,c,u,f,p,g,h,b,m,I,w,C,x,v,S,y=!!t.readOnly&&t.readOnly,F=t.parent,L=t.dialog,P=t.ctrl?t.ctrl:null,M=t.type,R=t.isNonPersistIsr,E=t.contextInfo?t.contextInfo:null,D=t.pad3DViewer,O=[],T=[],V=0,k={},A=null,N=!1;P?P.getAddedVPMRefRoots().then(function(e){(O=e).length?P.getLoadedVPMRefRootData(O).then(function(e){(T=e).length&&Z()}):Z()}):Z(),this.getContextInfo=function(){var e="betweenAllComponents";return u&&(u.value===d.isrBetweenAllComponents?e="betweenAllComponents":u.value===d.isrInsideGroups?e="insideGroups":u.value===d.isrGroupsAgainstContext?e="groupsAgainstContext":u.value===d.isrGroupsAgainstGroups&&(e="groupsAgainstGroups")),{ProductContext:a.productContext,FilterContext:k,Config:e,Groups:function(){for(var e=[],t=0;t<a.groups.length;t++)e.push(a.groups[t].getGroupInfo());return e}()}},this.createGroupViewWithInfo=function(e,t){q(e,t)},this.addInfoInGroup=function(e,t){!function(e,t){if(e&&e.model){for(var n=0;n<a.groups.length;n++)a.groups[n].id===e.id&&a.groups[n].addInfoInGroup(t);X()}}(e,t)},this.disableTab=function(){J()}}function U(){"customFacetMode"===M||R||(a.productContext&&Object.keys(a.productContext).length?(w.hide(),o.publish({event:"onContextInfoChange",data:"ContextInfoSufficient"})):(w.show(),o.publish({event:"onContextInfoChange",data:"ContextInfoInsufficient"})))}function j(e){if(e&&0!==e.length&&e[0]!==A){var t=[];if(A){for(var n=0;n<r.elementsList.length;n++)r.elementsList[n]!==A.alias&&t.push(r.elementsList[n]);A=null}else t=r.elementsList;if(P)-1===P.getLoadedRoots().indexOf(e[0].id)&&(N=!0,A=e[0]);-1===t.indexOf(e[0].alias)&&t.push(e[0].alias),r.elementsList=[],r.elementsList=t.map(function(e){return e}),r.value=e[0].alias,r.selectedIndex=t.indexOf(e[0].alias),N=!1,f&&(f.disabled=!1),1===r.elementsList.length&&(r.disabled=!0),U()}}function G(e){e&&0!==e.length&&(k=e[0],c.value=k.alias,p&&(p.disabled=!1))}function W(){k={},c.value="",p&&(p.disabled=!0)}function Q(){a.groups.splice(0,a.groups.length),V=0,o.unsubscribe(S),S=void 0,m.innerHTML=d.isrCtxNoGroupDefine,C.show()}function X(){!function(){for(var e=0;e<a.groups.length;e++)if(a.groups[e].isEmpty)return!1;return!0}()?((u.value===d.isrInsideGroups||u.value===d.isrGroupsAgainstContext)&&a.groups.length>=1||u.value===d.isrGroupsAgainstGroups&&a.groups.length>=2||u.value===d.isrBetweenAllComponents?C.hide():C.show(),o.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"})):(u.value===d.isrInsideGroups||u.value===d.isrGroupsAgainstContext)&&a.groups.length>=1||u.value===d.isrGroupsAgainstGroups&&a.groups.length>=2||u.value===d.isrBetweenAllComponents?(C.hide(),o.publish({event:"onGroupInfoChange",data:"GroupInfoSufficient"})):(C.show(),o.publish({event:"onGroupInfoChange",data:"GroupInfoInsufficient"}))}function B(){for(S=o.subscribe({event:"onAllContextGroupRemoved"},Q);a.groups.length;)a.groups[a.groups.length-1].removeGroupView();o.publish({event:"onAllContextGroupRemoved"}),X()}function z(){N?a.productContext=A:r.value&&""!==r.value&&(A&&A.alias===r.value?a.productContext=A:(A&&A.alias!==r.value&&(A=null,r.elementsList=T.map(function(e){return e.alias})),T.map(function(e){r.value===e.alias&&(a.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):c.value="",f&&(f.disabled=!1))}))),1===r.elementsList.length&&(r.disabled=!0),U();for(var e=!0,t=0;t<T.length;t++){var n=T[t];if(r.value===n.alias&&c.value===n.filterAlias){e=!1;break}}e&&W(),B()}function K(e){for(var t=0;t<a.groups.length;t++)if(a.groups[t]===e)return a.groups.splice(t,1),0===a.groups.length?(V=0,m.innerHTML=d.isrCtxNoGroupDefine,C.show()):m.innerHTML=a.groups.length.toString().concat(" ",a.groups.length>1?d.isrCtxGroupsDefined:d.isrCtxGroupDefined),void X()}function H(e){for(var t=0;t<a.groups.length;t++)a.groups[t].id===e.id&&(a.groups[t]=e);X()}function _(e){var t={htmlParent:b,parentTab:a,groupTitle:"Group",dialog:L,pad3DViewer:D,productContext:a.productContext,ctrl:P,id:++V,readOnly:y};e&&(t.isFilter=e);var n=new s(t);a.groups.push(n),m.innerHTML=a.groups.length.toString().concat(" ",a.groups.length>1?d.isrCtxGroupsDefined:d.isrCtxGroupDefined),o.subscribe({event:"onEmptyGroup"},H),o.subscribe({event:"onFilterAddedInGroup"},H),o.subscribe({event:"onElemAddedInGroup"},H),o.subscribe({event:"onGroupViewCreated"},H),o.subscribe({event:"onContextGroupRemoved"},K),X()}function q(e,t){_(t),a.groups[a.groups.length-1].addInfoInGroup(e),X()}function J(){for(var e=v.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].style.userSelect="none",e[t].setAttribute("disabled",!0),e[t].style.pointerEvents="none",(e[t].hasClassName("fonticon-product")||e[t].hasClassName("fonticon-filter")||e[t].hasClassName("fonticon-remove")||e[t].hasClassName("fonticon-trash"))&&e[t].getParent().addClassName("disabled")}function Z(){var s,S,L,D;v=e.createElement("div",{class:"PIMwebIsrPanelContextTabContent"}).inject(F),R||(!function(){var i=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebFirstTitle"}).inject(v),a=e.createElement("div").inject(i);(I=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(a)).innerHTML=d.isrCtxProduct,I.setStyles({marginRight:"5px"}),w=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(a),e.createElement("span",{class:"wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(w),w.hide();var o=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(i);(r=new l({elementsList:T.map(function(e){return e.alias}),enableSearchFlag:!1,placeholder:d.isrSelectProductCtx})).inject(o),r.elements.container.setStyles({width:"100%"}),r.addEventListener("change",function(){z()}),1===r.elementsList.length&&(r.disabled=!0),"Create"===t.type&&new n({icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){P&&P.searchProducts().then(function(e){j(e)})}}).inject(o)}(),s=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection"}).inject(v),S=e.createElement("div").inject(s),L=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(S),D=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(s),L.innerHTML=d.isrCtxFilter,(c=new i({disabled:!0,selectAllOnFocus:!0,autoCommitFlag:!0,placeholder:d.isrSelectFilterCtx}).inject(D)).elements.container.setStyles({width:"100%"}),c.elements.container.childNodes[0].setStyles({width:"100%"}),y||(p=new n({disabled:!0,icon:{iconName:"remove",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){W()}}).inject(D),f=new n({disabled:!0,icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},displayStyle:"icon",onClick:function(){P&&P.searchFilters(a.productContext.id).then(function(e){G(e)})}}).inject(D)),r.value&&""!==r.value&&T.map(function(e){r.value===e.alias&&(a.productContext=e,e.filterAlias?G([{id:e.filterId,alias:e.filterAlias,type:e.filterType,icon:e.filterIcon}]):c.value="",f&&(f.disabled=!1))}),U()),function(){var t=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupHdrSection"}).inject(v),i=e.createElement("div").inject(t);(x=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(i)).innerHTML=d.isrCtxGroups,x.setStyles({marginRight:"5px"}),C=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(i),e.createElement("span",{class:"PIMwebIsrPanelLabel wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-required wux-ui-3ds-lg PIMwebInvalidIcon"}).inject(C),C.hide();var o=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(t),s=e.createElement("p",{class:"PIMwebIsrPanelLabel"}).inject(o);s.innerHTML=d.isrCtxLblCheck,s.setStyles({marginRight:"5px",fontWeight:"normal"}),(u=new l({elementsList:[d.isrInsideGroups,d.isrGroupsAgainstGroups,d.isrGroupsAgainstContext,d.isrBetweenAllComponents],enableSearchFlag:!1,value:d.isrBetweenAllComponents,displayStyle:"normal"})).inject(o),u.elements.container.setStyles({width:"90%"}),u.addEventListener("change",function(){u.value===d.isrInsideGroups||u.value===d.isrGroupsAgainstGroups||u.value===d.isrGroupsAgainstContext?(h.inject(g),m.show()):(m.hide(),B(),h.remove()),X()});var r=e.createElement("div",{class:"PIMwebIsrPanelFlex"}).inject(t);if(e.createElement("div").inject(r).setStyles({width:"10%"}),(m=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(r)).setStyles({width:"90%",fontWeight:"normal"}),m.hide(),g=e.createElement("div",{class:"PIMwebIsrPanelLineEditorSection PIMwebGroupsMainSection"}).inject(v),h=e.createElement("div"),m.innerHTML=d.isrCtxNoGroupDefine,b=e.createElement("div").inject(h),!y){var c=e.createElement("div",{class:"PIMwebIsrPanelFlex PIMwebIsrPanelFlexFlowRowWrap"}).inject(h);new n({label:d.isrCtxAddNewGroup,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){_()}}).inject(c).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new n({label:d.isrCtxAddMoreGroups,icon:{iconName:"group-add",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){P&&P.addMoreGroups(a.productContext.id)}}).inject(c).elements.container.setStyles({marginRight:"5px",paddingLeft:"5px",paddingRight:"5px"}),new n({label:d.isrCtxDeleteAllGroups,icon:{iconName:"group-delete ",fontIconFamily:WUXManagedFontIcons.Font3DS},onClick:function(){B()}}).inject(c).elements.container.setStyles({marginRight:"0px",paddingLeft:"5px",paddingRight:"5px"})}}(),"Create"!==M&&E&&(!function(e){if(e&&(R||(e.ProductContext&&j([e.ProductContext]),r.disabled=!0,e.FilterContext&&G([e.FilterContext])),"betweenAllComponents"===e.Config?u.value=d.isrBetweenAllComponents:"insideGroups"===e.Config?u.value=d.isrInsideGroups:"groupsAgainstContext"===e.Config?u.value=d.isrGroupsAgainstContext:"groupsAgainstGroups"===e.Config&&(u.value=d.isrGroupsAgainstGroups),e.Groups))for(var t=0;t<e.Groups.length;t++)e.Groups[t].Elements&&q(e.Groups[t].Elements,e.Groups[t].isFilter)}(E),R||o.publish({event:"onContextTabComplete"})),y&&J()}}})}),define("DS/PIMwebUX/PIMwebIsrPanelView",["UWA/Core","UWA/Class","DS/PIMwebUX/PIMwebIsrPanelIsrTab","DS/PIMwebUX/PIMwebIsrPanelContextTab","DS/PIMwebUX/PIMwebIsrPanelSpecTab","DS/Controls/Button","DS/Controls/Tab","DS/Controls/LineEditor","DS/Controls/ComboBox","DS/Controls/ButtonGroup","DS/WebappsUtils/WebappsUtils","DS/CoreEvents/Events","i18n!DS/PIMwebUX/assets/nls/PIMwebIsrPanelView","css!DS/PIMwebUX/assets/css/PIMwebIsrPanelView"],function(e,t,n,i,l,a,o,s,r,d,c,u,f){"use strict";return t.extend({init:function(t){var a=e.createElement("div",{class:"PIMwebIsrPanelMainDiv"});t.isWeb?t.parent.content=a:t.parent.appendChild(a);var s,r,d,c,p,g=t.type,h=t.pad3DViewer,b=t.parent,m=t.ctrl,I=t.lengthUnit,w=!!t.isNonPersistIsr&&t.isNonPersistIsr,C=!!t.readOnly&&t.readOnly,x=t.isrAlreadyLoaded,v=-1,S=-1,y=-1,F=null,L=[];function P(e){v<0||!F.tabBar.buttonGroup.getButton(v)||(F.tabBar.buttonGroup.getButton(v).label=e)}"Create"!==g?(c=t.contextInfo,p=t.specInfo,S=0,y=1,L=["6w-what","6w-how"]):(v=0,S=1,y=2,L=["interference-simulation","6w-what","6w-how"]),b.addEventListener("stopResize",function(){F.tabPanelContainer.setStyles({width:b.width-20+"px",height:b.height-90+"px"})});var M,R,E,D,O,T=e.createElement("div",{class:"PIMwebIsrPanelTabSection"}).inject(a);(F=new o({displayStyle:"strip"})).tabBar.pinFlag=!1,F.tabPanelContainer.setStyles({width:b.width-20+"px",height:b.height-90+"px",overflow:"auto"}),"Create"===g&&(u.subscribe({event:"onIsrTypeInitDone"},function(e){P(e),u.unsubscribe({event:"onIsrTypeInitDone"})}),F.add({label:f.isrTabTitle,content:(M=e.createElement("div",{class:"PIMwebIsrPanelIsrTab"}),s=new n({type:g,parent:M,pad3DViewer:h,dialog:b,ctrl:m}),M),icon:{iconName:"interference-simulation",fontIconFamily:WUXManagedFontIcons.Font3DS}})),F.add({label:f.contextTabTitle,content:(R=e.createElement("div",{class:"PIMwebIsrPanelContextTab"}),E={type:g,parent:R,pad3DViewer:h,dialog:b,ctrl:m,readOnly:C,isNonPersistIsr:w},"Create"!==g&&(E.contextInfo=c),r=new i(E),R),icon:{iconName:"6w-what",fontIconFamily:WUXManagedFontIcons.Font3DS}}),F.add({label:f.specTabTitle,content:(D=e.createElement("div",{class:"PIMwebIsrPanelSpecTab"}),O={type:g,parent:D,pad3DViewer:h,dialog:b,ctrl:m,readOnly:C,isNonPersistIsr:w,lengthUnit:I},"Create"!==g&&(O.specInfo=p),d=new l(O),D),icon:{iconName:"6w-how",fontIconFamily:WUXManagedFontIcons.Font3DS}}),F.inject(T),F.value=[0],F.tabBar.centeredFlag=!1;var V=e.createElement("div",{id:"Footer"}).inject(F.tabPanelContainer);if(V.innerHTML="                                                                                         ",V.setStyles({color:"#FFFFFF","font-weight":"bold","font-style":"italic",margin:"0","margin-top":"35px"}),"Create"===g&&x){var k=e.createElement("div",{class:"PIMwebIsrPanelLabel"}).inject(F.tabPanelContainer);k.innerHTML=f.warningMessage,k.setStyles({color:"#e87b00","font-weight":"normal","font-style":"italic",margin:"0","margin-top":"10px"}),b.height=b.height+15,b.minHeight=b.minHeight+15}function A(e,t){if(!(e<0)&&F.tabBar.buttonGroup.getButton(e)){var n=t?L[e]:"required";F.tabBar.buttonGroup.getButton(e).icon={iconName:n,fontIconFamily:WUXManagedFontIcons.Font3DS},t||F.tabBar.buttonGroup.getButton(e).elements.button.getChildren()[0].getChildren()[0].addClassName("PIMwebInvalidIcon")}}this.getIsrInfo=function(){if(s)return s.getIsrInfo()},this.getContextInfo=function(){return r.getContextInfo()},this.getSpecInfo=function(){return d.getSpecInfo()},this.setIsrTabValidity=function(e){A(v,e)},this.setContextTabValidity=function(e){A(S,e)},this.setSpecTabValidity=function(e){A(y,e)},this.setIsrTitleValidity=function(e){s&&s.setIsrTitleValidity(e)},this.checkContextInfoValidity=function(){var e;e=r.getContextInfo(),Object.keys(e.ProductContext).length||A(S,!1)},this.writePIMwebIsrPrefs=function(){var e=d.getPIMwebIsrSpecPrefs(),t={},n={};s&&(t=s.getPIMwebIsrTabPrefs()),localStorage.getItem("PIMwebIsrSpecs")&&(n=JSON.parse(localStorage.getItem("PIMwebIsrSpecs")));var i=Object.assign(n,e,t);localStorage.setItem("PIMwebIsrSpecs",JSON.stringify(i))},this.createGroupViewWithInfo=function(e){r.createGroupViewWithInfo(e)},this.addInfoInGroup=function(e,t){r.addInfoInGroup(e,t)},this.setIsrTabTitle=function(e){P(e)},this.disableAllTabs=function(){r&&r.disableTab(),d&&d.disableTab()},this.destroy=function(){u.unsubscribe({event:"onIsrTypeInitDone"}),s=d=r=null,h.getFrameWindow().getContextualUIManager().activateContextualBarOnLeftClic()}}})});