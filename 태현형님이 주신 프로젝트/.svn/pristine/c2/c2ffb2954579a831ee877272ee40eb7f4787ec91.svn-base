define("DS/UnifiedImport/views/FilesView",["DS/DataGridView/DataGridView"],e=>{return{datagrid:function(t){var n=new e({treeDocument:t,columns:[{text:"File",dataIndex:"fileCard",typeRepresentation:"detailedInfo",editableFlag:!1,autoRowHeightFlag:!0},{text:"Status",dataIndex:"status",allowUnsafeHTMLContent:!0,width:"50px"}],getCellTooltip:function(e){if(e&&e.cellModel&&"object"!=typeof e.cellModel)return{shortHelp:e.cellModel.includes("wux-ui-3ds-check")?UWA.i18n("unifiedImport.content.grid.tooltip.uploaded"):e.cellModel.includes("wux-ui-3ds-attention")?UWA.i18n("unifiedImport.content.grid.tooltip.excluded"):UWA.i18n("unifiedImport.content.grid.tooltip.uploading"),updateModel:!1}}});return n.layout.columnHeaderHeight=35,n.layout.cellHeight=40,n.rowSelection="multiple",n.columnSelection="none",n.cellSelection="none",n.layout.collectionView.showAlternateBackgroundFlag=!1,n.layout.columnsHeader=!1,n.layout.rowsHeader=!1,n.showRowIndexFlag=!1,n.showSelectionCheckBoxesFlag=!0,n.layout.collectionView.showRowBorderFlag=!0,n}}}),define("DS/UnifiedImport/utils/Essentials",["UWA/Class","DS/Utilities/UUID","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","text!DS/UnifiedImport/assets/config/UnifiedImport.json","i18n!DS/UnifiedImport/assets/nls/UnifiedImportNLS"],(e,t,n,i,o,r)=>{UWA.i18n(r);let s=require.toUrl("");return s=s.substr(0,s.lastIndexOf("?")),e.singleton({x3dPlatformId:"undefined"!=typeof widget&&widget.environment?widget.environment.getAllData().x3dPlatformId:void 0,DEPLOYMENT:"/webapps",APP_TITLE_MAIN:"Engineering Import",APP_TITLE_CONTENT_IMPORTED:"Imported Content",SERVICE_DFS:"distributedfilestore",SERVICE_3DSPACE:"3DSpace",URL_BASE:s,URL_SECURITY_CONTEXT:"/resources/pno/person/getsecuritycontext",URL_FCS:"/fcs/servlet/fcs/checkin",HEADERS_DEFAULT:{},LANG:window.widget?window.widget.lang:"en",EVENT_CONTENT:"content",EVENT_CONTENT_SELECTED:"contentselected",EVENT_CONTENT_SCAN_START:"contentscanstart",EVENT_CONTENT_SCAN_END:"contentscanend",EVENT_CONTENT_ANALYZED:"contentanalyzed",EVENT_LOAD_METHOD_SUCCEEDED:"loadmethodsucceeded",EVENT_METHOD_FOUND:"methodfound",EVENT_METHODS_FOUND:"methodsfound",EVENT_METHODS_LISTED:"methodslisted",EVENT_NO_METHOD_FOUND:"nomethodfound",EVENT_LOAD_METHOD_SUCCESS:"loadmethodsuccess",EVENT_LOAD_METHOD_FAILED:"loadmethodfailed",EVENT_NEW_IMPORT:"newimport",EVENT_CONTENT_APPROVED:"contentapproved",EVENT_CONTENT_PARTIALLY_APPROVED:"contentpartiallyapproved",EVENT_CONTENT_DISAPPROVED:"contentdisapproved",EVENT_CHECKIN_URL_FOUND:"checkinurlfound",EVENT_START_CHECKIN:"startcheckin",EVENT_CHECKIN_SUCCEEDED:"checkinsucceeded",EVENT_CHECKIN_FAILED:"checkinfailed",EVENT_CHECKIN_TIMEOUT:"checkintimedout",EVENT_CHECKIN_NETWORK_ERROR:"checkinnetworkerror",EVENT_CONTENT_UPLOADED:"contentuploaded",EVENT_START_EXCHANGE:"startexchange",EVENT_EXCHANGE_REQUEST_SUCCEEDED:"exchangerequestsucceeded",EVENT_EXCHANGE_REQUEST_FAILED:"exchangerequestfailed",EVENT_EXCHANGE_NETWORK_ERROR:"networkerror",EVENT_EXCHANGE_CANCEL:"exchangecancel",NOTIFICATIONS:{NO_METHOD:1,INVALID_METHOD:2,CONTENT_DISAPPROVED:3,PROCESS_SUCCEEDED:4,PROCESS_FAILED:5,CHECKIN_TIMEOUT:6,CHECKIN_FAILED:7,CHECKIN_NETWORK_ERROR:8},MAX_FILE_SIZE_GB:1,MAX_CONTENT_SIZE_GB:5,init:function(){let e=this;e.getPlatformServices().then(e.getSecurityContexts.bind(null,e)),e.getGrantedRoles().then(e.methods.bind(null,e))},getPlatformServices:function(){let e=this;return new UWA.Promise(function(t,n){i.getPlatformServices({onComplete:e.postGetPlatformServices.bind(null,e,t)})})},postGetPlatformServices:function(e,t,n){let i=n.find(function(t){return t.platformId==e.x3dPlatformId});i||(i=n[0]),e.PLATFORM_SERVICES=i,t(e.PLATFORM_SERVICES)},getSecurityContexts:function(e){return new UWA.Promise(function(t,i){n.authenticatedRequest(e.PLATFORM_SERVICES["3DSpace"]+e.URL_SECURITY_CONTEXT,{method:"GET",type:"json",proxy:"passport",onComplete:e.postGetSecurityContext.bind(null,e,t)})})},postGetSecurityContext:function(e,t,n){e.SECURITY_CONTEXT=n.SecurityContext,t()},getSecurityContext:function(){var e=widget.getPreference("credentials");return e&&e.value},getGrantedRoles:function(){var e=this;return new UWA.Promise(function(t,n){i.getGrantedRoles(e.postGetGrantedRoles.bind(null,e,t))})},postGetGrantedRoles:function(e,t,n){e.GRANTED_ROLES=n,t()},methods:function(e){e.METHODS=JSON.parse(o),e.METHODS_PREDICTABLE=[],e.METHODS_UNPREDICTABLE=[],e.METHODS.forEach(t=>{e.GRANTED_ROLES.some(function(e){return t.roles.indexOf(e.id)>-1})&&(t.import.validate&&t.import.validate.methodIdentifier?e.METHODS_PREDICTABLE.push(t):e.METHODS_UNPREDICTABLE.push(t))})},extension:function(e){return e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase()},unique:function(){return t.v4().substring(0,10).replaceAll("-","")},noop:function(){},formatBytes:function(e,t=2){if(!+e)return"0 Bytes";const n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,i)).toFixed(n))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}`}})}),define("DS/UnifiedImport/views/DragZone",["UWA/Class/View","DS/Controls/Toolbar","DS/Controls/Button","DS/UnifiedImport/utils/Essentials"],(e,t,n,i)=>{var o,r;return e.extend({__private__:{}},{className:"unifiedimport-dragzone",setup:function(e){this.treeDocument=e.treeDocument,this.setupDragText(),this.setupToolbar(),this.setupEvents()},setupToolbar:function(){var e=this;e.__private__.toolbar=new t({}),e.__private__.toolbar.inject(e.container),e.__private__.browseFile=UWA.createElement("input",{class:"unifiedimport-dragzone-input-file",type:"file",multiple:!0}),e.__private__.btnBrowseFiles=new n({label:UWA.i18n("unifiedImport.action.filesOnDisk")}),e.__private__.browseFolder=UWA.createElement("input",{class:"unifiedimport-dragzone-input-folder",type:"file",webkitdirectory:!0}),e.__private__.btnBrowseFolder=new n({label:UWA.i18n("unifiedImport.action.folderOnDisk")}),e.__private__.toolbar.add("element",{element:e.__private__.btnBrowseFiles.getContent(),position:"center"}),e.__private__.toolbar.add("element",{element:e.__private__.btnBrowseFolder.getContent(),position:"center"})},setupDragText:function(){o=UWA.createElement("div",{class:"unifiedimport-dragzone-gridcontent"}).inject(this.container),r=UWA.createElement("h3",{class:"wux-ui-3ds wux-ui-3ds-drag-drop unifiedimport-dragzone-dragehereicon"}).inject(o),UWA.createElement("p",{class:"unifiedimport-dragzone-drageheretext",text:UWA.i18n("unifiedImport.action.info.browseContent")}).inject(o);var e=UWA.createElement("div",{class:"unifiedimport-dragzone-separatetextcontainer"}).inject(o);UWA.createElement("span",{class:"unifiedimport-dragzone-separatetext",text:UWA.i18n("unifiedImport.action.info.or")}).inject(e),UWA.createElement("p",{class:"unifiedimport-dragzone-browsetext",text:UWA.i18n("unifiedImport.action.info.selectFromSource")}).inject(o)},setupScanText:function(){this.container.style.border="none",this.container.style.opacity=".5",r.classList.remove("wux-ui-3ds-drag-drop"),r.classList.add("wux-ui-3ds-docs")},setupEvents:function(){var e=this;[{key:"dragevent",fn:e.activateZone.bind(null,e)},{key:"dragover",fn:e.activateZone.bind(null,e)},{key:"dragleave",fn:e.deActivateZone.bind(null,e)},{key:"drop",fn:e.drop.bind(null,e)}].forEach(t=>{e.container.addEventListener(t.key,t.fn)}),e.__private__.btnBrowseFiles.addEventListener("click",function(){e.__private__.browseFile.click()}),e.__private__.browseFile.addEventListener("change",e.change.bind(null,e)),e.__private__.btnBrowseFolder.addEventListener("click",function(){e.__private__.browseFolder.click()}),e.__private__.browseFolder.addEventListener("change",e.change.bind(null,e))},activateZone:function(e,t){e.container.classList.add("unifiedimport-dragzone-activated"),t.preventDefault()},deActivateZone:function(e){e.container.classList.remove("unifiedimport-dragzone-activated")},drop:function(e,t){e.deActivateZone(e),e.change(e,t)},change:function(e,t){var n,o;t.preventDefault(),e.setupScanText(),e.treeDocument._modelEvents.publish({event:i.EVENT_CONTENT_SCAN_START});var r=t&&t.dataTransfer&&t.dataTransfer.items;if(r)if(t.dataTransfer.getData("text/plain"))o=JSON.parse(t.dataTransfer.getData("text/plain")),e.treeDocument._modelEvents.publish({event:i.EVENT_CONTENT_SELECTED,data:o});else{var s=r.length;n=[],e.maxdepth=0;for(var a=0;a<s;a++){var d=r[a],l=d.webkitGetAsEntry(),c=[];if(l.isDirectory)c.push(new UWA.Promise(t=>{e.extractFiles(l).then(n=>{t(n.flat(e.maxdepth))})}));else{let e=d.getAsFile();e.fullPath=l.fullPath,n.push(e)}}UWA.Promise.all(c).then(function(t){t=t.flat(),n=n.concat(t),e.treeDocument._modelEvents.publish({event:i.EVENT_CONTENT_SELECTED,data:n})})}else if(n=t&&t.currentTarget&&t.currentTarget.files){for(let e=0;e<n.length;e++)n[e].fullPath=n[e].webkitRelativePath;e.treeDocument._modelEvents.publish({event:i.EVENT_CONTENT_SELECTED,data:n})}},extractFiles:function(e){var t=this;const n=e.createReader();return new Promise((e,i)=>{const o=[];!function r(){n.readEntries(n=>{n.length?(o.push(Promise.all(n.map(e=>{var n=e.fullPath,i=n.split("/").length+1;return t.maxdepth<i&&(t.maxdepth=i),e.isFile?new Promise((t,i)=>e.file(function(e){e.fullPath=n,t(e)},i)):t.extractFiles(e)}))),r()):Promise.all(o).then(function(n){e(n.flat(t.maxdepth))})},e=>i(e))}()})}})}),define("DS/UnifiedImport/views/PotentialMethods",["UWA/Class/View","DS/UIKIT/Input/Select","DS/UnifiedImport/utils/Essentials"],(e,t,n)=>{var i,o;return e.extend({__private__:{}},{className:"unifiedimport-potential-methods",setup:function(e){i=o=void 0,this.treeDocument=e.treeDocument,(i=UWA.createElement("div",{class:"form-group"})).hide(),i.inject(this.container),this.setupEvents()},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:n.EVENT_METHODS_FOUND},e.methodsFound.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_METHOD_FOUND},e.methodFound.bind(null,e))},methodsFound:function(e,t){e.uikitSelect(t)},methodFound:function(e,t){(t=UWA.clone(t)).selected=!0,e.uikitSelect([t]).disable()},uikitSelect:function(e){return o||(this.__private__.methods=e,i.show(),UWA.createElement("label",{text:UWA.i18n("unifiedImport.header.title.importMethod")}).inject(i),(o=new t({options:e.map(e=>e),placeholder:UWA.i18n("unifiedImport.header.title.placeholder.chooseMethod")})).inject(i),o.getContent().addEventListener("change",this.methodSelected.bind(null,this))),o},methodSelected:function(e,t){t.target.disabled=!0;var i=t.target.selectedIndex-1;e.treeDocument._modelEvents.publish({event:n.EVENT_METHOD_FOUND,data:e.__private__.methods[i]})}})}),define("DS/UnifiedImport/views/Header",["UWA/Class/View","DS/Controls/ProgressBar","DS/UnifiedImport/utils/Essentials"],(e,t,n)=>e.extend({tagName:"div",className:"unifiedimport-header",setup:function(e){this.treeDocument=e.treeDocument,this.setupProgress(),this.setupEvents()},setupProgress:function(){this.progressbar=new t({displayStyle:"lite"}),this.progressbar.inject(this.container)},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:n.EVENT_CHECKIN_SUCCEEDED},e.checkinSucceeded.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_CHECKIN_FAILED},e.checkinFailed.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_CHECKIN_TIMEOUT},e.checkinFailed.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_START_EXCHANGE},e.startExchange.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_EXCHANGE_REQUEST_SUCCEEDED},e.exchangeRequestSucceeded.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:n.EVENT_EXCHANGE_REQUEST_FAILED},e.exchangeRequestSucceeded.bind(null,e))},checkinSucceeded:function(e,t){e.show();var n=t.totalCheckedInNodes/t.totalNodes*100;e.progressbar.value=n},checkinFailed:function(e){e.hide()},startExchange:function(e,t){e.progressbar.infiniteFlag=!0},exchangeRequestSucceeded:function(e,t){e.hide()},exchangeRequestFailed:function(e,t){e.hide()}})),define("DS/UnifiedImport/models/FileTreeDocument",["DS/WAFData/WAFData","DS/Tree/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Controls/ProgressBar","DS/UnifiedImport/utils/Essentials"],(e,t,n,i,o)=>t.extend({toNodes:function(e,t){e.setupSubscription(),e.__private__={payload:{title:"",rootFile:"",fileIds:[],receipts:[]}},e.validNodes=[],e.invalidNodes=[],e.checkInObjectList=[],e.totalCheckedInNodes=0,e.protocol=t.protocol,t=t.data&&t.data.items||t;var i,r=new Set,s=t.length,a={iconName:"doc",fontIconSize:"2x"},d=performance.now();if(e.prepareUpdate(),e.protocol){e.fileIds=[];for(let d=0;d<s;d++){if(c=(l=t[d]).displayName,i=l.objectType,e.fileIds.push(l.objectId),"DriveFile"==i)E=o.extension(c),r.add(E),a=l.displayPreview||"component",(u=new n({grid:{status:null,extension:E,fileCard:{icon:a,label:c,subLabel:"3DEXPERIENCE Content"}}})).fileAssociated=l,e.addRoot(u)}}else{var l,c;for(let i=0;i<s;i++){c=(l=t[i]).name,E="";var u,E=o.extension(c);r.add(E),(u=new n({grid:{status:null,extension:E,fileCard:{icon:a,label:c,subLabel:o.formatBytes(l.size)}}})).fileAssociated=l,e.addRoot(u)}}e.pushUpdate();var _=performance.now();console.log("Build Tree Document - "+(_-d)),e.defaultMethod(Array.from(r)),e._modelEvents.publish({event:o.EVENT_CONTENT_SCAN_END})},setupSubscription:function(){var e=this;e._modelEvents.subscribe({event:o.EVENT_METHOD_FOUND},e.methodFound.bind(null,e)),e._modelEvents.subscribe({event:o.EVENT_CONTENT_APPROVED},e.contentApproved.bind(null,e)),e._modelEvents.subscribe({event:o.EVENT_CHECKIN_SUCCEEDED},e.checkinSucceeded.bind(null,e)),e._modelEvents.subscribe({event:o.EVENT_CHECKIN_FAILED},e.checkinFailed.bind(null,e))},defaultMethod:function(e){var t=o.METHODS_PREDICTABLE.find(t=>e.some(e=>t.import.validate.methodIdentifier.includes(e)));(t=t||(o.METHODS_UNPREDICTABLE.length>0?o.METHODS_UNPREDICTABLE:void 0))?(this._modelEvents.publish({event:o.EVENT_NEW_IMPORT}),"array"==UWA.typeOf(t)?this._modelEvents.publish({event:o.EVENT_METHODS_FOUND,data:t}):this._modelEvents.publish({event:o.EVENT_METHOD_FOUND,data:t})):this._modelEvents.publish({event:o.EVENT_NO_METHOD_FOUND})},methodFound:function(e,t){e.__private__.method=t,t.import.options&&(e.switchBaseUrl(),require([t.import.options],t=>{e.validate=t.validate?t.validate:null,e.upload=t.upload?t.upload:null,e.transform=t.transform?t.transform:null,e.validateByImporter()},t=>{e._modelEvents.publish({event:o.EVENT_LOAD_METHOD_FAILED})}))},validateByImporter:function(){var e=this,t=e.validate,n=t&&t.extensions,i=e.__private__.method.import.validate&&e.__private__.method.import.validate.methodIdentifier,r=e.getRoots();if(n||i){var s=UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-attention",styles:{background:"#EA4F37",color:"white",padding:5,borderRadius:"50%"}}),a=!1,d=performance.now();e.prepareUpdate(),r.forEach(t=>{a=!1,i.includes(t.options.grid.extension)&&(e.__private__.priorNode?a=!0:e.__private__.priorNode=t),!a&&n&&!n.includes(t.options.grid.extension)&&(a=!0),a?(e.invalidNodes.push(t),t.updateOptions({grid:{invalidated:!0,status:s.outerHTML}})):e.validNodes.push(t)}),e.pushUpdate(),e.__private__.payload.rootFile=e.__private__.priorNode&&e.__private__.priorNode.fileAssociated.name;var l=e.__private__.priorNode&&e.__private__.priorNode.fileAssociated.name||e.validNodes.length&&e.validNodes[0].fileAssociated.name;e.__private__.payload.title=l?l.split(".")[0]:"";var c=performance.now();console.log("ValidateByImporter - "+(c-d))}else e.validNodes=r;e._modelEvents.publish({event:o.EVENT_CONTENT_ANALYZED,data:{validNodes:e.validNodes,invalidNodes:e.invalidNodes}});var u=e.validNodes.length,E=e.invalidNodes.length;u&&E||u?e._modelEvents.publish({event:o.EVENT_CONTENT_APPROVED}):E&&e._modelEvents.publish({event:o.EVENT_CONTENT_DISAPPROVED,data:e.invalidNodes})},contentApproved:function(e){var t=new i({shape:"circular",displayStyle:"lite",height:25});t.statusFlag=!1,e.prepareUpdate(),e.validNodes.forEach(n=>{n.updateOptions({grid:{status:e.setProgressBar(t)}})}),e.pushUpdate();var n=e.validNodes.length,r=[],s=o.PLATFORM_SERVICES[e.__private__.method.service];for(let i=0;i<n;i++){var a=e.validNodes[i],d=void 0;"string"==UWA.typeOf(e.upload.checkinticket)?d=e.checkinticket(s+e.upload.checkinticket+"?maxNumberOfFiles=1"):"function"==UWA.typeOf(e.upload.checkinticket)&&(d=e.upload.checkinticket({platformServices:o.PLATFORM_SERVICES,securityContext:o.SECURITY_CONTEXT})),r.push(new UWA.Promise(function(n,i){d.then(e.postcheckinticket.bind(null,e)).then(e.checkin.bind(null,e,[a],t)).then(e.postcheckin.bind(null,e,[a])).then(n).fail(i)}))}UWA.Promise.all(r).then(function(){e._modelEvents.publish({event:o.EVENT_CONTENT_UPLOADED})}).fail(function(t){switch(!0){case t.message.includes("timedout"):e._modelEvents.publish({event:o.EVENT_CHECKIN_TIMEOUT}),e.checkinFailed(e);break;case t.message.includes("NetworkError"):e._modelEvents.publish({event:o.EVENT_CHECKIN_NETWORK_ERROR}),e.checkinFailed(e);break;default:e._modelEvents.publish({event:o.EVENT_CHECKIN_FAILED})}})},checkinticket:function(t){return new UWA.Promise(function(n,i){e.authenticatedRequest(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":window.widget?window.widget.lang:"en","X-Requested-With":"XMLHttpRequest"},onComplete:n,onFailure:i})})},postcheckinticket:function(e,t){return t&&JSON.parse(t)||{}},setProgressBar:function(e){var t=UWA.createElement("div",{class:"progress-bar-wrapper",styles:{padding:"7px 0"}});return e.inject(t),t.outerHTML},checkin:function(t,n,i,r){return console.log("Checkin of file",n[0].fileAssociated.name),new UWA.Promise(function(s,a){var d=r.uploadCorrelation[0].fileId;t.__private__.payload.fileIds.push(d);var l=n[0].fileAssociated,c=(n[0],new FormData);c.set("__fcs__jobTicket",r.ticket),c.set("file_0",l),c.set("file-name",l.name),c.set("file-title",l.name),c.set("file-description",l.name);let u=e.authenticatedRequest(o.PLATFORM_SERVICES[o.SERVICE_DFS]+o.URL_FCS,{method:"POST",data:c,timeout:18e5,cache:3600,onComplete:s,onFailure:a,onUploadProgress:function(e){n[0]&&(i.value=Math.ceil(100*e.loaded/e.total),n[0].updateOptions({grid:{status:t.setProgressBar(i)}}))}});t.checkInObjectList.push(u)})},postcheckin:function(e,t,n){e.__private__.payload.receipts.push(n.trim()),e.totalCheckedInNodes+=1,e._modelEvents.publish({event:o.EVENT_CHECKIN_SUCCEEDED,data:{checkedInNodes:t,totalNodes:e.validNodes.length,totalCheckedInNodes:e.totalCheckedInNodes}})},checkinSucceeded:function(e,t){var n=t.checkedInNodes,i=UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-check",styles:{background:"#57B847",color:"white",padding:5,borderRadius:"50%"}});e.prepareUpdate(),n.forEach(e=>{e.updateOptions({grid:{status:i.outerHTML}})}),e.pushUpdate()},checkinFailed:function(e){e.empty()},switchBaseUrl:function(){var e=o.PLATFORM_SERVICES[this.__private__.method.service];if(e){let t=[e,o.DEPLOYMENT].join("");require.toUrl(t),require.config({baseUrl:t})}},resetBaseUrl:function(){require.config({baseUrl:o.URL_BASE})},save:function(t){t._modelEvents.publish({event:o.EVENT_START_EXCHANGE});var n=o.PLATFORM_SERVICES[t.__private__.method.service]+t.__private__.method.import.importurl;let i=t.getpayload(),r={Accept:"application/json","Content-Type":"application/json","Accept-Language":o.LANG,"X-Requested-With":"XMLHttpRequest",SecurityContext:o.SECURITY_CONTEXT},s={data:JSON.stringify(i),method:"POST",headers:r,onComplete:t.exchangerequestsucceeded.bind(null,t),onFailure:t.exchangerequestfailed.bind(null,t)};e.authenticatedRequest(n,s)},getpayload:function(){let e=this;if(e.transform)try{return e.transform.call(e.__private__.payload,{platformServices:o.PLATFORM_SERVICES,securityContext:o.SECURITY_CONTEXT})}catch(e){console.log("Issue is payload generation")}return e.__private__.payload},exchangerequestsucceeded:function(e){e._modelEvents.publish({event:o.EVENT_EXCHANGE_REQUEST_SUCCEEDED,data:{importTitle:e.__private__.payload.title}}),e.checkInObjectList=[]},exchangerequestfailed:function(e){e._modelEvents.publish({event:o.EVENT_EXCHANGE_REQUEST_FAILED}),e.checkInObjectList=[]},cancel:function(e){e.prepareUpdate(),e.removeRoots(),e.pushUpdate(),e._modelEvents.publish({event:o.EVENT_EXCHANGE_CANCEL}),e.resetBaseUrl(),e.cancelAllRequests(e)},cancelAllRequests(e){var t=e.checkInObjectList?e.checkInObjectList:[];t.length&&(e.checkInObjectList=[],t.forEach(e=>{e.cancel()}))}})),define("DS/UnifiedImport/views/Content",["UWA/Class/View","DS/Controls/Accordeon","DS/UnifiedImport/views/PotentialMethods","DS/UnifiedImport/views/DragZone","DS/UnifiedImport/views/FilesView","DS/UnifiedImport/utils/Essentials"],(e,t,n,i,o,r)=>{var s,a;return e.extend({__private__:{}},{className:"unifiedimport-content",setup:function(e){var t=this;t.treeDocument=e.treeDocument,t.setupImporters(),t.setupZone(),t.setupCategories(),t.setupEvents()},setupImporters:function(){new n({treeDocument:this.treeDocument}).inject(this.container)},setupZone:function(){(s=new i({treeDocument:this.treeDocument})).inject(this.container)},setupCategories:function(){(a=new t({visibleFlag:!1,style:"filled-group",items:[{header:UWA.i18n("unifiedImport.content.accordion.title"),exclusive:!1,content:o.datagrid(this.treeDocument)}]}))._expanderItems[0].expand(),a.inject(this.container)},setupEvents:function(){this.treeDocument._modelEvents.subscribe({event:r.EVENT_NEW_IMPORT},function(){s.hide(),a.show()})}})}),define("DS/UnifiedImport/views/Footer",["UWA/Class/View","DS/Controls/Toolbar","DS/Controls/Button","DS/UnifiedImport/utils/Essentials"],(e,t,n,i)=>e.extend({__private__:{}},{tagName:"div",className:"unifiedimport-footer",setup:function(e){var n=this;n.treeDocument=e.treeDocument,n.__private__.toolbar=new t({}),n.__private__.toolbar.inject(n.container),n.setupRightBarActions(),n.setupEvents()},setupRightBarActions:function(){var e=this;e.__private__.btnCancel=new n({label:UWA.i18n("unifiedImport.footer.action.cancel")}),e.__private__.btnImport=new n({label:UWA.i18n("unifiedImport.footer.action.import"),emphasize:"primary",disabled:!0}),e.__private__.toolbar.add("element",{element:e.__private__.btnImport.getContent(),position:"far"}),e.__private__.toolbar.add("element",{element:e.__private__.btnCancel.getContent(),position:"far"})},setupEvents:function(){var e=this;e.__private__.btnImport.addEventListener("buttonclick",e.startImport.bind(null,e)),e.__private__.btnCancel.addEventListener("buttonclick",e.treeDocument.cancel.bind(null,e.treeDocument)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_LOAD_METHOD_FAILED},e.invalidMethod.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_NEW_IMPORT},e.toggleFooter.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_CONTENT_DISAPPROVED},e.contentDisapproved.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_CONTENT_UPLOADED},e.toggleImport.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_EXCHANGE_REQUEST_SUCCEEDED},e.exchangeRequestSucceeded.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:i.EVENT_EXCHANGE_REQUEST_FAILED},e.exchangeRequestFailed.bind(null,e))},toggleFooter:function(e){e.getContent().toggle()},toggleImport:function(e){e.__private__.btnImport.disabled=!e.__private__.btnImport.disabled},startImport:function(e){e.toggleImport(e),e.__private__.btnImport.label=UWA.i18n("unifiedImport.footer.info.importStarting"),e.treeDocument.save(e.treeDocument)},invalidMethod:function(e){e.__private__.btnImport.hide()},contentDisapproved:function(e){e.__private__.btnImport.hide()},exchangeRequestSucceeded:function(e){e.__private__.btnImport.hide()},exchangeRequestFailed:function(e){e.__private__.btnImport.hide()}})),define("DS/UnifiedImport/views/StatusBar",["UWA/Class/View","DS/Tweakers/GeneratedToolbar","DS/UnifiedImport/utils/Essentials"],(e,t,n)=>e.extend({tagName:"div",className:"unifiedimport-statusbar",setup:function(e){this.treeDocument=e.treeDocument,this.setupStatusBar(),this.setupEvents()},setupStatusBar:function(){var e=t.prototype.createTreeDocument({entries:[{id:"totalNodes",dataElements:{typeRepresentation:"string",readOnly:!0,value:"",tooltip:UWA.i18n("unifiedImport.statusBar.tooltip.totalNodes"),position:"near"}},{id:"invalidNodes",dataElements:{typeRepresentation:"string",readOnly:!0,value:"",tooltip:UWA.i18n("unifiedImport.statusBar.tooltip.invalidNodes"),position:"near"}}]});this.generatedToolbar=new t({overflowManagement:"dropdown",direction:"horizontal",items:e}),this.generatedToolbar.inject(this.container)},setupEvents:function(){this.treeDocument._modelEvents.subscribe({event:n.EVENT_CONTENT_ANALYZED},this.updateStatus.bind(null,this))},updateStatus:function(e,t){e.show();var n=t.validNodes.length,i=t.invalidNodes.length,o=n+i;e.generatedToolbar.prepareUpdateView(),e.generatedToolbar.updateNodeModel("totalNodes",{grid:{data:UWA.i18n("unifiedImport.status.totalFiles")+": "+o}}),i&&e.generatedToolbar.updateNodeModel("invalidNodes",{grid:{data:UWA.i18n("unifiedImport.status.excludedFiles")+": "+i}}),e.generatedToolbar.pushUpdateView()}})),define("DS/UnifiedImport/views/UnifiedImportProcess",["UWA/Class/View","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UnifiedImport/views/Header","DS/UnifiedImport/views/Content","DS/UnifiedImport/views/StatusBar","DS/UnifiedImport/views/Footer","DS/UnifiedImport/utils/Essentials"],(e,t,n,i,o,r,s,a)=>e.extend({tagName:"div",className:"unifiedimport-process",setup:function(e){var t=this;t.treeDocument=e.treeDocument,t.setupHeader(),t.setupContent(),t.setupStatus(),t.setupFooter(),t.setupEvents()},setupHeader:function(){this.header=new i({treeDocument:this.treeDocument}),this.header.inject(this.container)},setupContent:function(){this.content=new o({treeDocument:this.treeDocument}),this.content.inject(this.container)},setupStatus:function(){this.status=new r({treeDocument:this.treeDocument}),this.status.inject(this.container)},setupFooter:function(){this.footer=new s({treeDocument:this.treeDocument}),this.footer.inject(this.container)},setupEvents:function(){var e=this;e.treeDocument._modelEvents.subscribe({event:a.EVENT_NO_METHOD_FOUND},e.noMethod.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:a.EVENT_LOAD_METHOD_FAILED},e.invalidMethod.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:a.EVENT_CONTENT_DISAPPROVED},e.contentDisapproved.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:a.EVENT_EXCHANGE_REQUEST_SUCCEEDED},e.exchangeRequestSucceeded.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:a.EVENT_EXCHANGE_REQUEST_FAILED},e.exchangeRequestFailed.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:a.EVENT_CHECKIN_FAILED},e.exchangeRequestCheckInFailed.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:a.EVENT_CHECKIN_NETWORK_ERROR},e.exchangeRequestCheckInNetworkError.bind(null,e)),e.treeDocument._modelEvents.subscribe({event:a.EVENT_CHECKIN_TIMEOUT},e.exchangeRequestCheckInTimedOut.bind(null,e))},noMethod:function(e){e.treeDocument.cancel(e.treeDocument),e.notify(a.NOTIFICATIONS.NO_METHOD)},invalidMethod:function(e){e.notify(a.NOTIFICATIONS.INVALID_METHOD)},contentDisapproved:function(e){e.notify(a.NOTIFICATIONS.CONTENT_DISAPPROVED)},exchangeRequestSucceeded:function(e,t){e.notify(a.NOTIFICATIONS.PROCESS_SUCCEEDED,t)},exchangeRequestFailed:function(e){e.notify(a.NOTIFICATIONS.PROCESS_FAILED)},exchangeRequestCheckInFailed:function(e){e.notify(a.NOTIFICATIONS.CHECKIN_FAILED)},exchangeRequestCheckInNetworkError:function(e){e.notify(a.NOTIFICATIONS.CHECKIN_NETWORK_ERROR)},exchangeRequestCheckInTimedOut:function(e){e.notify(a.NOTIFICATIONS.CHECKIN_TIMEOUT)},notify:function(e,i){n.setNotificationManager(t),n.setFadeOutPolicy(2),n.setStackingPolicy(5);var o={};switch(e){case a.NOTIFICATIONS.NO_METHOD:o={level:"error",message:UWA.i18n("unifiedImport.notification.error.noMethod"),sticky:!1};break;case a.NOTIFICATIONS.INVALID_METHOD:o={level:"error",message:UWA.i18n("unifiedImport.notification.error.invalidMethod"),sticky:!1};break;case a.NOTIFICATIONS.CONTENT_DISAPPROVED:o={level:"error",message:UWA.i18n("unifiedImport.notification.error.contentDisapproved"),sticky:!1};break;case a.NOTIFICATIONS.PROCESS_SUCCEEDED:o={level:"success",message:UWA.String.format(UWA.i18n("unifiedImport.notification.success.processSucceeded"),`${i&&i.importTitle?i.importTitle:""}`),sticky:!1};break;case a.NOTIFICATIONS.PROCESS_FAILED:o={level:"error",message:UWA.i18n("unifiedImport.notification.error.processFailed"),sticky:!1};break;case a.NOTIFICATIONS.CHECKIN_FAILED:o={level:"error",message:UWA.i18n("unifiedImport.notification.error.checkinFailed"),sticky:!1};break;case a.NOTIFICATIONS.CHECKIN_TIMEOUT:o={level:"error",message:UWA.i18n("unifiedImport.notification.error.timeout"),sticky:!1};break;case a.NOTIFICATIONS.CHECKIN_NETWORK_ERROR:o={level:"error",message:UWA.i18n("unifiedImport.notification.error.networkError"),sticky:!1}}t.addNotif(o)}})),define("DS/UnifiedImport/UnifiedImport",["DS/UnifiedImport/models/FileTreeDocument","DS/UnifiedImport/views/UnifiedImportProcess","DS/UnifiedImport/utils/Essentials","css!DS/UIKIT/UIKIT.css","css!DS/UnifiedImport/UnifiedImport"],(e,t,n)=>{var i={gotoHome:function(){var o=new e;widget.body.empty(),new t({treeDocument:o}).inject(widget.body),o._modelEvents.subscribe({event:n.EVENT_CONTENT_SELECTED},o.toNodes.bind(null,o)),o._modelEvents.subscribe({event:n.EVENT_EXCHANGE_CANCEL},i.gotoHome)},onLoad:function(){widget.setTitle(""),widget.addEvent("onRefresh",n.noop),i.gotoHome()}};return i});