define("DS/DELWKOApplicationServices/LayoutConfig",[],function(){"use strict";return{MANUFACTURING:{row:0,col:0,command:"LeftBlock"},RESOURCE:{row:0,col:1,command:"RightBlock"},ROUTINGS:{row:1,col:0,command:"BottomBlock"}}}),define("DS/DELWKOApplicationServices/Commands/CommandsService",["UWA/Core","DS/Core/Events","DS/DELPPWModelServices/ModelUtils","DS/DELPPWServices/CommandsService/CommandsService","DS/DELPPWNavigationServices/SwitchDBModeManager"],function(e,n,t,i,s){"use strict";return function(o){var a,r=[],c=[],u="CommandsService",l=function(e,n){a.notifyApp(e,n)},m=function(e,n){a.toggleModule(e,n)},d=function(){a.initState()},g=function(){var e,n,t,i,s,r,c=o.getPlugins("SelectionPlugin");c?(n=(e=c.instance.getSelections("CMDS"))[0]||[],t=e[1]||[],s=e[2]||[],r=e[3]||[],i=[],a.manageCommandsAvailability(t,i,s,n,r)):o.getLogger().debug(u,"Selection Plugin is not available.")},C=function(){a.manageDocCmdAvailability()},h=function(e){a.toggleCmdCheckHeaderState(e)},L=function(){g(),o.getPlugins("SelectionPlugin").instance.getSelections("CMDS")[0]},f=function(){a.authoringCmdAvailability()},P=function(){var n=[],t=o.getPlugins("SelectionPlugin");e.is(t)&&t.isStarted&&(n=(n=t.instance.getSelectionsWithPaths("CMDS")).reduce(function(e,n){return e=e.concat(n)},[]),l("LoadRelations",[n]))},E=function(){var e=o.getPlugins("TreeViewPlugin");e?(e=e.instance).isGroupingExist()?a.manageCommandsAvailabilityOnGrouping():g():o.getLogger().debug(u,"TreeView Plugin is not available.")};return a=new i(o),e.extend(a,{manageConfigurationCommands:function(n){var t,i=n||{},s=!!e.is(i.isLicenseCFGValid,"boolean")&&i.isLicenseCFGValid,o=!!e.is(i.isRoot,"boolean")&&i.isRoot,r=e.is(i.auxLength,"number")?i.auxLength:0,c=e.is(i.processViewLength,"number")?i.processViewLength:0,u=e.is(i.routingsViewLength,"number")?i.routingsViewLength:0,l=e.is(i.resourceViewLength,"number")?i.resourceViewLength:0,m=e.is(i.selectedItemsCount,"number")?i.selectedItemsCount:0,d=!!e.is(i.isAuthoring,"boolean")&&i.isAuthoring,g=!!e.is(i.isCrossLevel,"boolean")&&i.isCrossLevel,C=r>0;t=!C&&!(l>0)&&(u>0||c>0),a.setCommandState("EditConfigurationContext",s&&t),1===m&&(a.setCommandState("DefineFilter",o&&!d&&!C),a.setEffectivityCmdState("EditEvolution",s&&!o&&t)),a.setEffectivityCmdState("EditVariant",s&&!o&&t&&!g)},manageReplaceCommandsAvailablity:function(e){var n=e.isRoot,t=e.auxiliaryViewLength,i=e.routingsViewLength;this.setCommandState("ReplaceByLatestRevision",!n&&t<1&&i>0),this.setCommandState("ReplaceByNewRevision",!n&&t<1&&i>0),this.setCommandState("ReplaceByExisting",!n&&t<1&&1===i),this.setCommandState("ReplaceByNewReference",!n&&t<1&&1===i)},getInsertAsCommands:function(n){var t,i,s,a=[];return s=o.getPlugins("DatabasePlugin"),e.is(n)&&e.is(s)&&s.isStarted&&(t=s.instance.getValidChildTypes(n),e.is(t)&&t.length>0&&(i=n.get("PPRTYPE"),["SYSTEM","OPERATION"].indexOf(i)>-1&&a.push("InsertAsCopy"),["SYSTEM","OPERATION","PROCESS","RESOURCE"].indexOf(i)>-1&&a.push("SearchAndAddInstanceCommand"))),a},manageCommandsAvailability:function(n,i,r,c,l){var m,d,g,C,h,L,f,P,E,p,b,S,D,v=0,R=0,A=0,y=0,O=0,W=0,w=0,I=o.getPlugins("DatabasePlugin"),U=o.getPlugins("DicoPlugin"),k=s.isDbMode()||t.getNavigateOnDatabasePreference();I&&U?(I=I.instance,U=U.instance,i=i||[],r=r||[],c=c||[],l=l||[],v=(n=n||[]).length,A=i.length,R=l.length,d=r.length,e.is(r,"array")&&r.forEach(function(n){m=I.getReferenceModel(n),e.is(m)&&("PART"===(b=m.get("PPRTYPE"))||"PRODUCT"===b?A++:"PROCESS"===b?v++:"SYSTEM"===b?y++:"RESOURCE"===b?R++:"OPERATION"===b?O++:"WORKINSTRUCTION"===b?W++:"WORKORDER"===b&&w++)}),e.is(c,"array")&&c.forEach(function(n){m=I.getReferenceModel(n),e.is(m)&&("SYSTEM"===(b=m.get("PPRTYPE"))?y++:"OPERATION"===b?O++:"WORKINSTRUCTION"===b?W++:"WORKORDER"===b&&w++)}),C=v+A+y+R+O+W+w,P=this.getSelectedRoots([n,i,c,l,r]),1>C?this.setAllCommandsState("none"):1===C?(1!==y&&1!==O||(p=this.getCommandsAvailability("one.system"),m=I.getReferenceModel(c[0]),!0!==U.isAKindOf(m,"DELLmiWorkPlanSystemReference")&&!0!==U.isAKindOf(m,"DELLmiQtyControlProcessReference")||p.enabled.push("CreateCapableResourceStructureLink"),!0!==U.isAKindOf(m,"DELLmiWorkPlanSystemReference")&&!0!==U.isAKindOf(m,"DELLmiHeaderOperationReference")&&!0!==U.isAKindOf(m,"DELLmiLoadingOperationReference")&&!0!==U.isAKindOf(m,"DELLmiGeneralOperationReference")||p.enabled.push("BuildUp")),1===W&&(p=this.getCommandsAvailability("one.workInstruction")),1===R&&(p=this.getCommandsAvailability("one.resource")),1===v&&(p=this.getCommandsAvailability("one.process")),1===A&&(p=this.getCommandsAvailability("one.product")),1===w&&(p=this.getCommandsAvailability("one.workorder")),e.is(p)&&(L=n[0]||c[0]||l[0]||r[0],h=I.getReferenceModel(L),e.is(h)&&(E=this.getValidChildTypeCommands(h),p.enabled=p.enabled.concat(E),E=this.getInsertAsCommands(h),p.enabled=p.enabled.concat(E)),this.setAllCommandsState(p))):1<C&&(C===A?this.setAllCommandsState("multiple.product"):C===v?this.setAllCommandsState("multiple.process"):C===y+O?this.setAllCommandsState("multiple.system"):C===W?this.setAllCommandsState("multiple.workInstruction"):C===R?this.setAllCommandsState("multiple.resource"):this.setAllCommandsState("multiple.mixed"),P.length!==C&&0!==P.length&&this.setCommandState("Delete",!1)),this.setCommandState("CreateLink",!0),this.setCommandState("CreateInstance",!0),f=P.length>0,S=C>0&&P.length===C&&A<1,this.setCommandState("Hide",f),this.setCommandState("DeleteHdr",S),this.setCommandState("DetachInstance",!f&&A<1&&C>0),this.manageReplaceCommandsAvailablity({isRoot:f,auxiliaryViewLength:r.length,mfgItemsViewLength:n.length,routingsViewLength:c.length}),this.manageDocCmdAvailability(),this.groupingViewCmdAvailability(v,A,d),g=function(){var t,i,s,o,a=!1;if(c.length>0){t=I.getInstance(c[0]),e.is(t)&&(t=t.get("isAggregatedBy"));for(let n=0;n<c.length;n++)if(i=I.getInstance(c[n]),e.is(i)&&(i=i.get("isAggregatedBy")),t!==i){a=!0;break}}else if(n.length>0){s=I.getInstance(n[0]),e.is(s)&&(s=s.get("isAggregatedBy"));for(let t=0;t<n.length;t++)if(o=I.getInstance(n[t]),e.is(o)&&(o=o.get("isAggregatedBy")),s!==o){a=!0;break}}return a},C>0&&(D={isLicenseCFGValid:a._isLicenseCFGValid,isRoot:f,auxLength:r.length,processViewLength:n.length,routingsViewLength:c.length,resourceViewLength:l.length,selectedItemsCount:C,isAuthoring:k,isCrossLevel:g()},this.manageConfigurationCommands(D)),n.length>0&&this.manageCommandsAvailabilityForReadOnlyTypes(n)):o.getLogger().debug(u,"Database or Dico  Plugin is not available.")}}),{onStart:function(e){r.push(o.addExternalListener("select",L)),r.push(o.addExternalListener("toggleCmdCheckHeaderState",h)),r.push(o.addExternalListener("authoringMode",g)),r.push(o.addExternalListener("actionBarReady",d)),r.push(o.addExternalListener("manageDocCmdAvailability",C)),r.push(o.addExternalListener("endEdit",f)),r.push(o.addExternalListener("manageCommandsOnGrouping",E)),r.push(o.addExternalListener("createInstance",g)),c.push(n.subscribe({event:"DELPPWCommands/LandingPage"},function(e){l("ShowLandingPage",e)})),c.push(n.subscribe({event:"DELPPWCommands/Hide"},function(e){l("Hide",e)})),c.push(n.subscribe({event:"DELPPWCommands/HideAll"},function(e){l("HideAll",e)})),c.push(n.subscribe({event:"DELPPWCommands/Relations"},function(e){m("LINKS",e)})),c.push(n.subscribe({event:"DELPPWCommands/ShowLogPanel"},function(e){l("ShowLogPanel",e)})),c.push(n.subscribe({event:"DELPPWCommands/DisplayProperties"},function(e){m("PROPERTIES",e)})),c.push(n.subscribe({event:"DELPPWCommands/CreateCapableResourceStructureLink"},function(e){l("CreateCapableResourceStructureLink",e)})),c.push(n.subscribe({event:"DELPPWCommands/CreateLink"},function(e){l("CreateLink",e)})),c.push(n.subscribe({event:"DELPPWCommands/CreateInstance"},function(e){l("CreateInstance",e)})),c.push(n.subscribe({event:"DELPPWCommands/CreateLinkOrInstance"},function(e){l("CreateLinkOrInstance",e)})),c.push(n.subscribe({event:"DELPPWCommands/CreateWorkOrderFromProcess"},function(e){l("CreateWorkOrderFromProcessCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/InsertCmd"},function(e){l("InsertCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/DuplicateAdv"},function(e){l("DuplicateAdvCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/Delete"},function(e){l("Delete",e)})),c.push(n.subscribe({event:"DELPPWCommands/DetachInstance"},function(e){l("DetachInstance",e)})),c.push(n.subscribe({event:"DELPPWCommands/SearchAndAddInstanceCommand"},function(e){l("searchAndAddInstance",e)})),c.push(n.subscribe({event:"DELPPWCommands/InsertAsCopy"},function(e){l("InsertAsCopy",e)})),c.push(n.subscribe({event:"DELPPWCommands/ReplaceByLatestRevision"},function(e){l("ReplaceByLatestRevision",e)})),c.push(n.subscribe({event:"DELPPWCommands/ReplaceByExisting"},function(e){l("ReplaceByExisting",e)})),c.push(n.subscribe({event:"DELPPWCommands/ReplaceByNewRevision"},function(e){l("ReplaceByNewRevision",e)})),c.push(n.subscribe({event:"DELPPWCommands/ReplaceByNewReference"},function(e){l("ReplaceByNewReference",e)})),c.push(n.subscribe({event:"DELPPWCommands/ShowGraphView"},function(e){m("EGRAPHMOD",e)})),c.push(n.subscribe({event:"DELPPWCommands/ProductFlowCmd"},function(e){m("PRODUCTFLOWMOD",e)})),c.push(n.subscribe({event:"DELPPWCommands/ToggleAuxiliaryView"},function(e){l("toggleAuxPanel",e)})),c.push(n.subscribe({event:"DELPPWCommands/ManageCapableResources"},function(e){m("MANAGECAPABLERESOURCESMOD",e)})),c.push(n.subscribe({event:"DELPPWCommands/LeftBlock"},function(e){l("LeftBlock",e)})),c.push(n.subscribe({event:"DELPPWCommands/RightBlock"},function(e){l("RightBlock",e)})),c.push(n.subscribe({event:"DELPPWCommands/BottomBlock"},function(e){l("BottomBlock",e)})),c.push(n.subscribe({event:"DELPPWCommands/BuildUp"},function(e){l("BuildUp",e)})),c.push(n.subscribe({event:"DELPPWCommands/AttachDocument"},function(e){l("AttachDocumentCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/SearchDocument"},function(e){l("SearchDocumentCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/ManageDocuments"},function(e){l("ManageDocumentsCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/EditViewPreferences"},function(e){l("EditViewPreferencesCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/LayoutPreferences"},function(e){l("LayoutPreferences",e)})),c.push(n.subscribe({event:"DELPPWCommands/ExportCSV"},function(e){l("ExportCSVCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/LoadRelations"},P)),c.push(n.subscribe({event:"DELPPWCommands/ExpandAll"},function(e){l("expandAll",e)})),c.push(n.subscribe({event:"DELPPWCommands/CollapseAll"},function(e){l("collapseAll",e)})),c.push(n.subscribe({event:"DELPPWCommands/RelationalExplorerCmd"},function(e){l("RelationalExplorerCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/Refresh"},function(e){l("RefreshCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/UserDefinedExplore"},function(e){l("UserDefExplore",e)})),c.push(n.subscribe({event:"DELPPWCommands/BIEssentialsCmd"},function(e){l("BIEssentialsCmd",e)})),c.push(n.subscribe({event:"DELPPWCommands/ManageInconsistentLinks"},function(e){m("MIL",e)})),a.onStart(e)},onStop:function(){var e,t;for(e=0,t=r.length;e<t;e++)o.removeExternalListener(r[e]);for(r=[],e=0,t=c.length;e<t;e++)n.unsubscribe(c[e]);c=[]}}}}),define("DS/DELWKOApplicationServices/Services",["UWA/Class"],function(e){"use strict";var n={CommandsService:"DS/DELWKOApplicationServices/Commands/CommandsService",LayoutService:"DS/DELWKOApplicationServices/LayoutService"};return e.singleton({getMap:function(){return n}})}),define("DS/DELWKOApplicationServices/LayoutService",["UWA/Core","DS/DELPPWServices/LayoutService/LayoutService","DS/DELWKOApplicationServices/LayoutConfig"],function(e,n,t){"use strict";return function(i){var s,o,a,r,c,u,l,m=new n(i),d=[];return u=function(){var n,s;m.isLayoutBuilt()?e.is(m.onActionBarReady,"function")&&m.onActionBarReady():(m.buildView({rows:[{columns:2},{columns:1}],actionBarReady:function(){e.is(s,"array")&&s.forEach(function(e){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:e.commandName,cmdState:e.state})}),m.showLayout()}}),m.removeDockingElement(WUXDockAreaEnum.TopDockArea),m.removeDockingElement(WUXDockAreaEnum.BottomDockArea),n=widget.getViewportDimensions(),m.setDockingElement(WUXDockAreaEnum.LeftDockArea,{dockingZoneSize:n.width/4,collapseDockingZoneFlag:!0}),m.setDockingElement(WUXDockAreaEnum.RightDockArea,{dockingZoneSize:n.width/4,collapseDockingZoneFlag:!0,resizableFlag:!0,visibleDockingZoneFlag:!1}),o=m.buildTreeListAuthoringDom(!0),a=m.buildTreeListAuthoringDom(!0),r=m.buildTreeListAuthoringDom(!0),c=m.buildAuxiliaryViewDom(),m.setBlocLayoutContent(t.MANUFACTURING.row,t.MANUFACTURING.col,a),m.setBlocLayoutContent(t.RESOURCE.row,t.RESOURCE.col,r),m.setBlocLayoutContent(t.ROUTINGS.row,t.ROUTINGS.col,o),s=m.setPreferredLayoutOnStartup(t))},l=function(){d.push(i.addExternalListener(t.MANUFACTURING.command,function(e){var n=m.isViewShown(t.MANUFACTURING.row,t.MANUFACTURING.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.MANUFACTURING.row,t.MANUFACTURING.col,e.state)})),d.push(i.addExternalListener(t.RESOURCE.command,function(e){var n=m.isViewShown(t.RESOURCE.row,t.RESOURCE.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.RESOURCE.row,t.RESOURCE.col,e.state)})),d.push(i.addExternalListener(t.ROUTINGS.command,function(e){var n=m.isViewShown(t.ROUTINGS.row,t.ROUTINGS.col);n&&!0===e.state||!n&&!1===e.state||m.toggleView(t.ROUTINGS.row,t.ROUTINGS.col,e.state)})),d.push(i.addExternalListener("widgetLayoutChanged",function(){var n,o,a;o=s.getPreference("widgetLayoutValues"),e.is(o)&&(n=e.Json.decode(o),(a=m.setPreferredLayout(n,t)).deferredPromise.promise.then(function(){a.columns.forEach(function(e){i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:e.commandName,cmdState:e.state})}),i.getMediator().notify("LayoutCommandsToggled")}))}))},e.extend(m,{getContainer:function(n){switch(n){case"layoutContainer":return m.getUIContainer();case"manufacturing":return a;case"resource":return r;case"routings":return o;case"auxiliary":return c;case"alerts":return m.getAlertContainer();case"progressIndicator":return m.getProgressIndContainer();case"properties":return m.getPropertiesModuleContainer();case"none":return e.createElement("div",{class:"empty-container"});default:i.getLogger().debug("MGA_LayoutService","Invalid side choice: %s",n)}},getLayoutConfig:function(){return e.clone(t)},onStart:function(e){s=i.getService("ConfigService"),u(),l(),e()},onStop:function(){var e,n;for(e=0,n=d.length;e<n;e++)i.removeExternalListener(d[e]);d=[]}})}});