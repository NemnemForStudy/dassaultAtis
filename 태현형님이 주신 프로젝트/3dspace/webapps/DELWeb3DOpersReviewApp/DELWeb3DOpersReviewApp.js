define("DS/DELWeb3DOpersReviewApp/LandingPageOptions",["DS/DELWebComponentManager/DELWebComponentManager","i18n!DS/DELWeb3DOpersReviewApp/assets/nls/DELWebLandingPage"],function(e,t){"use strict";return{getLandingPageOptions:function(){var n=e.getComponent("Utils");return{title:t.get("App.Title"),subtitle:t.get("App.Subtitle"),background:e.getComponent("Utils").getAssetsUrl("DELWeb3DOpersReviewApp","images/DELOPREV_Background.jpg"),linksCategories:[{id:"ContentKnowledge",i18n:{title:t.get("ContentKnowledge.Title")},links:[{id:"UserAssistance",i18n:{title:t.get("UserAssistance.Title")},icon:t.get("WhatsNew.FontIcon"),url:n?n.getHelpFullPath(t.get("UserAssistance.WebHelp")):""},{id:"WhatsNew",i18n:{title:t.get("WhatsNew.Title")},icon:t.get("WhatsNew.FontIcon"),url:n?n.getHelpFullPath(t.get("WhatsNew.WebHelp")):""}]},{id:"SocialNetworks",i18n:{title:t.get("SocialNetworks.Title")},links:[{id:"Community",i18n:{title:t.get("Community.Title")},icon:t.get("Community.FontIcon"),url:t.get("Community.Url")}]}],guidedTour:{title:t.get("App.Subtitle"),items:[{id:"HomePage",type:"IMAGE",img:e.getComponent("Utils").getAssetsUrl("DELWeb3DOpersReviewApp","images/LandingPage.jpg"),title:t.get("Tips0.Title"),text:t.get("Tips0.Content")},{id:"Viewer",type:"IMAGE",img:e.getComponent("Utils").getAssetsUrl("DELWeb3DOpersReviewApp","images/Viewer.jpg"),title:t.get("Tips1.Title"),text:t.get("Tips1.Content")},{id:"PPRNavigator",type:"IMAGE",img:e.getComponent("Utils").getAssetsUrl("DELWeb3DOpersReviewApp","images/PPRNavigator.jpg"),title:t.get("Tips2.Title"),text:t.get("Tips2.Content")}]},buttons:{items:[{id:"OpenItem",i18n:{title:t.get("OpenItem.Title")},icon:t.get("OpenItem.FontIcon")},{id:"OpenItemWithFilter",i18n:{title:t.get("OpenItemWithFilter.Title")},icon:t.get("OpenItemWithFilter.FontIcon")}]},MRU:{items:[],onDoubleClick:function(){},contextualMenu:{items:[{id:"OpenItem",type:"PushItem",title:t.get("OpenItem.Title"),fonticon:{content:t.get("OpenItem.FontIcon")}},{id:"OpenItemWithFilter",type:"PushItem",title:t.get("OpenItemWithFilter.Title"),fonticon:{content:t.get("OpenItemWithFilter.FontIcon")}},{id:"RemoveItem"}]}}}}}}),define("DS/DELWeb3DOpersReviewApp/PreferencesManager",["DS/DELWebComponentManager/DELWebComponentManager"],function(e){"use strict";let t;const n="oldValue",i="value",o="onEdit",a="endEdit";let r={},s=function(e){let n=t.getPreferencesObject();Object.keys(n).forEach(t=>{r[t]?r[t][e]=n[t]:(r[t]={},r[t][e]=n[t])})};return widget.addEvent(o,function(){s(n)}),widget.addEvent(a,function(e){e&&!0===e.submitted&&s(i)}),t={addPreferences:t=>{let n=e.getComponent("Utils");t&&(t=t.filter(e=>!e.platform||("OnPremise"===e.platform?n.isOnPremise():"OnCloud"===e.platform&&!n.isOnPremise())),widget.mergePreferences(t))},getPreferencesObject:()=>{let e={};return widget.getPreferences().forEach(t=>{e[t.name]=t.value}),e},getValue:e=>widget.getValue(e),isPreferencesModified:function(e){let t=!1;return e&&e.length>0&&(t=e.some(e=>!!r[e]&&r[e][n]!==r[e][i])),t}}}),define("DS/DELWeb3DOpersReviewApp/DELWeb3DOpersReviewAppOptions",["UWA/Core","DS/Logger/Logger","DS/DELWeb3DOpersReviewApp/LandingPageOptions"],function(e,t,n){"use strict";return function(i){var o=t.getLogger("DELWeb3DOpersReviewAppOptions"),a={get:function(t){return i?function t(n,i){var o;if(e.is(n,"object"))if(Object.prototype.hasOwnProperty.call(n,i))o=n[i];else for(let a in n)if(Object.prototype.hasOwnProperty.call(n,a)&&(o=t(n[a],i),e.is(o)))return o;return o}(i,t):null},getModule:function(e){var t;return i.Components&&i.Components[e]?t=i.Components[e].code:o.error("AppConfig format is invalid, provide code and options"),t}};return Object.assign(a,n)}}),define("DS/DELWeb3DOpersReviewApp/DELWeb3DOpersReviewWidgetMain",["UWA/Core","UWA/Class/Promise","DS/ApplicationFrame/CommandsManager","DS/DELWeb3DOpersReviewApp/DELWeb3DOpersReviewAppOptions","DS/DELWebComponentManager/DELWebComponentManager","DS/Logger/Logger","DS/UIKIT/Mask","DS/DELWebPPRController/DELWebPPRController","DS/DELWebComponentManager/DELWebTypesUtil","DS/PlatformAPI/PlatformAPI","DS/DELWebComponentManager/DELWebLinkManager","DS/DELWeb3DOpersReviewApp/PreferencesManager","text!DS/DELWeb3DOpersReviewApp/assets/json/AppConfig.json","text!DS/DELWeb3DOpersReviewApp/assets/json/DELWidgetLinkEvents.json","i18n!DS/DELWeb3DOpersReviewApp/assets/nls/DELWeb3DOpersReviewApp","css!DS/DELWeb3DOpersReviewApp/assets/css/DELWeb3DOpersReviewWidgetMain.css"],function(e,t,n,i,o,a,r,s,l,p,g,c,d,u,m){"use strict";const f=function(){var e={};return{set:function(t,n){e[t]=n},get:function(t){return e[t]},remove:function(t){delete e[t]},clear:function(){e={}}}},D="roots",w="toOpen",O="2DStructureLoaded",b="graphicsLoaded",v="with2DStructure",h="defaultViewerMode",E="usePublishedContent",C="webTimeout",P="installVolumeOffSet",W="installAutoApplyVolume";return function(S){const A="onRefresh",L="onSearch",R="onApplyNGFilter",y="onLoadDataComplete",M="loadData",T="load2DStructure",U="remove2DStructure",I="onGetContent",k="endEdit",F="onUpdatePreferences";var N,V=new i(widget.getValue("oerAppConfigODT")?widget.getValue("oerAppConfigODT"):JSON.parse(d)),j=e.createElement("div",{class:"appMain"}),x=a.getLogger("DELWeb3DOpersReviewWidgetMain"),_=new f,z=function(){r.mask(widget.body,m.get("WaitingPage.Title"))},Y=function(){r.unmask(widget.body)},G=function(e,t){o.getComponent("ModelEvents").publish({event:e,data:{data:t,origin:"WidgetMain"}})},H=function(e){e=e||{},Y(),x.error(JSON.stringify(e))},B=async function(e){let n,i=o.getComponent("Viewer"),a=o.getComponent("SessionModel"),r=o.getComponent("OpenControl"),s=a.get(D),p=await l.getTaxonomies(e.items.map(e=>e.id));if(e.items.forEach(function(e){e.pprType=l.getPPRType(p[e.id])}),g=V.get("supported_types"),c=V.get("unsupported_types"),d=V.get("unsupported_multiroot_types"),u=!0,e.items.forEach(function(t){(!g.some(e=>p[t.id].includes(e))||e.items.length>1&&d.some(e=>p[t.id].includes(e))||c.some(e=>p[t.id].includes(e)))&&(u=!1)}),u)if((1===e.items.length&&e.items[0].pprType===l.PPRTYPES.PROCESS||s&&1===s.length&&s[0].pprType===l.PPRTYPES.PROCESS)&&(await t.all([i.empty(),N.empty()]),o.getComponent("SessionModel").set(D,[])),e.items.length>1)r.openMultiRoots(e);else{let t=e.items[0];r.open({...t,showForm:!0,installVolumeOffSet:widget.getInt("installVolumeOffSet"),installAutoApplyVolume:widget.getValue("installAutoApplyVolume")})}else n=e.items.length>1?m.replace(m.get("MultiRootTypeNotSupported.Error.Message"),{type:l.PPRTYPES.PROCESS}):m.get("TypesNotSupported.Error.Message"),o.getComponent("Utils").displayNotification({level:"warning",message:n}),Y(),x.error("Type not supported :",JSON.stringify(e));var g,c,d,u},J=async function(e){_.remove(w);try{!0===o.isInitialized("Viewer")?(z(),B(e)):(_.set(w,e),z())}catch(t){Y(),x.error(`Failed to fetch attributes for the object id ${e.id}`,t.toString())}},K=function(e){o.getComponent("Utils").inAppsSearch({showApplyButton:!1,title:m.get("OpenContent.Title"),fts_value:'flattenedtaxonomies:"types/DELFmiFunctionReference" OR flattenedtaxonomies:"types/VPMReference"',search_criteria_to_display:"",callback:function(t){UWA.is(t)&&UWA.is(t,"array")&&t.length>0?J({items:t.map(t=>({id:t.id,type:t["ds6w:type_value"],label:t["ds6w:label"],withFilter:e}))}):x.error("The format of the data opened is not valid - ",t)}})},$={onDrop:function(e,t){UWA.is(e)&&UWA.is(e.data)&&UWA.is(e.data.items,"array")&&e.data.items.length>0?J({items:e.data.items.map(e=>({id:e.objectId,type:e.objectType,label:e.displayName,withFilter:t}))}):x.error("The format of the data dropped is not valid - ",e)},nls:{open:m.get("DragAndDrop.icon.Title"),openWithFilter:m.get("DragAndDropWithFilter.icon.Title")}},q=function(){return{defaultViewerMode:widget.getValue(h),dynamicBuildUp:!widget.getValue(E),viewerOptions:{delviewer:{run_options:{webapi_timeout:{value:widget.getValue(C)||7e4}}}}}},Q=function(){var e=_.get(w),t=o.getComponent("Viewer");t.getViewer().inject(j),t.hideViewer(),e&&B(e)},X=function(e){if(e&&e.data&&e.data.items){let t=e.data.items[0];J(t)}},Z=function(){_.set(v,!0);let e=g.getComponent("SessionModel").get(D);e&&e.forEach(e=>{G(T,e)})},ee=function(){_.set(v,!1),G(U)},te=function(e){G(R,e)},ne=function(e){let n=o.getComponent("LandingPage"),i=o.getComponent("Viewer"),a=o.getComponent("SessionModel"),r=a.get(D),s=t.resolve();Y(),n.hideLandingPage(),i.showViewer(),e.results&&s.then(function(){x.log("Open completed  - ",JSON.stringify(e)),a.set(D,UWA.is(r,"array")?r.concat(e.results):e.results),e.results.forEach(e=>{G(M,e),!1!==_.get(v)&&G(T,e)}),o.getComponent("LandingPage").addMRUItems({ids:e.results.map(e=>e.id)})})},ie=function(){let e=o.getComponent("LandingPage"),t=o.getComponent("Viewer");Y(),t.hideViewer(),e.showLandingPage()},oe=function(){G(I,{items:o.getComponent("SessionModel").get(D)})},ae=function(){!0!==_.get(b)||!0!==_.get(O)&&!1!==_.get(v)||G(y,{items:o.getComponent("SessionModel").get(D)})},re=function(){_.set(b,!0),ae()},se=function(){_.set(O,!0),ae()},le=function(){n.getCommand("Home").execute()},pe=function(){!1===_.get(v)&&Z()},ge=function(){o.getComponent("SessionModel").clean()};return widget.addEvent(L,function(e){G(L,e)}),widget.addEvent(k,function(e){let t=c.getPreferencesObject();e&&!0===e.submitted&&G(F,Object.assign(t,q()))}),widget.addEvent(A,function(){let e=o.getComponent("SessionModel").get(D);if(function(){let t=e||[];return function(e){return e&&e.pprType===l.PPRTYPES.PROCESS}(t[0])&&(n=t[0])&&n.scopedMfg&&n.scopedMfg.occurrence&&n.scopedMfg.occurrence.length>0&&c.isPreferencesModified([P,W]);var n}()){let t=e[0];J({items:[{id:t.id,withFilter:t.withFilter}]})}else G(A)}),S.done(j),{onLoad:async function(){var e=function(e){let t={Components:{}};return e.forEach(e=>{let n=V.get(e);n.options=Object.assign({},V.get("AppOptions"),n.options),t.Components[e]=n}),t};await z(),await async function(){await o.create(e(["LandingPage"])),await o.initialize("LandingPage",Object.assign(function(e){var t={OpenItem:K.bind(this,!1),OpenItemWithFilter:K.bind(this,!0)},n=function(e,t){J({items:[{id:t&&t.id?t.id:"",withFilter:e}]})},i={OpenItem:n.bind(this,!1),OpenItemWithFilter:n.bind(this,!0)};return e&&e.buttons&&UWA.is(e.buttons.items)&&e.buttons.items.forEach(function(e){t[e.id]&&(e.onAction=t[e.id])}),e&&e.MRU&&(e.MRU.onDoubleClick&&(e.MRU.onDoubleClick=n.bind(this,!1)),e.MRU.contextualMenu&&UWA.is(e.MRU.contextualMenu.items,"array")&&e.MRU.contextualMenu.items.forEach(e=>{i[e.id]&&(e.onAction=i[e.id])})),e}(V.getLandingPageOptions()),{container:j,dndOptions:$}))}(),await function(){let e=o.getComponent("ModelEvents");[{eventName:{event:"loadDataFromOtherWidget"},callback:X,handler:e},{eventName:{event:"removeRoot"},callback:le,handler:e},{eventName:{event:"removeAll"},callback:le,handler:e},{eventName:{event:"load2DFromOtherWidget"},callback:Z,handler:e},{eventName:{event:"remove2DFromOtherWidget"},callback:ee,handler:e},{eventName:{event:"onViewerReady"},callback:Q,handler:e},{eventName:{event:"onLoadGraphicsComplete"},callback:re,handler:e},{eventName:{event:"onLoad2DStructureComplete"},callback:se,handler:e},{eventName:{event:"getContent"},callback:oe,handler:e},{eventName:{event:"freeze"},callback:z,handler:e},{eventName:{event:"unFreeze"},callback:Y,handler:e},{eventName:`onApplyNGFilter/${o.getComponent("Utils").getSharedAppId()}`,callback:te,handler:p},{eventName:{event:"onWidgetUnlinked"},callback:pe,handler:e},{eventName:{event:"onHome"},callback:ge,handler:e}].forEach(e=>{e.handler.subscribe(e.eventName,e.callback)})}(),await Y(),await async function(){let e=new g;await e.initializeWidgetLink(window.widget,V.get("AppOptions").widget_linkability,JSON.parse(u))}(),await async function(){await o.create(e(["Viewer","MBOM","PRODUCT","RESOURCE","PROCESS","OpenControl"]))}(),await t.all([async function(){N=new s(V),await N.initialize([l.PPRTYPES.PROCESS,l.PPRTYPES.MBOM,l.PPRTYPES.PRODUCT,l.PPRTYPES.RESOURCE])}(),async function(){await o.initialize("Viewer",{dndOptions:$,...q()})}()]),await async function(){let e=V.get("AppOptions").preferences;c.addPreferences(e)}(),await async function(){await o.initialize("OpenControl",{container:j,onOpen:ne,onCancel:ie,onError:H})}(),G("onAppReady")}}}}),define("DS/DELWeb3DOpersReviewApp/DELWeb3DOpersReviewAppInit",["DS/Logger/Logger","DS/WAfrContainer/App","DS/DELWeb3DOpersReviewApp/DELWeb3DOpersReviewWidgetMain"],function(e,t,n){"use strict";var i=e.getLogger("DELWeb3DOpersReviewAppInit");return t.extend({setUp:function(e){try{new n(e).onLoad(this)}catch(e){throw i.debug(e),new Error("Error Occurred while loading Widget")}},onWillEnter:function(){},onWillLeave:function(){},dispose:function(){}})});