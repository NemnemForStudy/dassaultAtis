define("DS/VCXScenePanelView/VCXImmersiveNavView",["UWA/Class","DS/Core/PointerEvents"],function(e,t){"use strict";return e.extend({init:function(e){e?(this._state=!1,this._UIprevious=this.createUIArrow("Left").inject(e),this._UInext=this.createUIArrow("Right").inject(e),this.createUIDots(e)):console.error("immersiveNav init failed")},unInitialize:function(){this.unregisterLeftArrowCB(),this.unregisterRightArrowCB(),this._UI_dot_Container.removeEventListener(t.POINTERUP,this.onPointerDownCB),this._UI_dot_Container.removeEventListener("mouseover",this.onMouseOverDotCB),this._UI_dot_Container.removeEventListener("mouseout",this.onMouseOverDotCB),this._UInext.remove(),this._UIprevious.remove(),this._UI_dot_Container.remove()},setImmersiveUIState:function(e){this._state=e,e?this._UInext.removeClassName("hide"):this._UInext.addClassName("hide"),e?this._UIprevious.removeClassName("hide"):this._UIprevious.addClassName("hide"),e?this._UI_dot_Container.removeClassName("hide"):this._UI_dot_Container.addClassName("hide")},createUIArrow:function(e){if("Left"===e||"Right"===e){var t=new UWA.Element("div",{class:"VCXScenariosUIArrow VCX"+e+"Arrow hide","data-rec-id":"immersiveNav"+e+"Arrow",html:[]}),n=new UWA.Element("div",{class:"VCXScenarioUI_loading hide",html:[]}).inject(t);return new UWA.Element("div",{class:"VCXpie VCXspinner",html:[]}).inject(n),new UWA.Element("div",{class:"VCXpie VCXfiller",html:[]}).inject(n),t}},createUIDots:function(e){this._UI_dot_Container=new UWA.Element("div",{class:"VCXScenariosUIDots_container hide",html:[]}).inject(e),this._UI_dot_Container_clone=new UWA.Element("div",{class:"VCXScenariosUIDots_clone",html:[]}).inject(this._UI_dot_Container),this._UI_dot_Container_child=new UWA.Element("div",{html:[]}).inject(this._UI_dot_Container)},updateUIDots:function(e,t){var n=t.map(e=>e._ID);if(this.removeArrowFirstOrLastScene(e,n),this._UI_dot_Container_child.innerHTML&&(this._UI_dot_Container_child.innerHTML=""),void 0!==this._UI_dot_Container&&e&&""!==e&&t&&t.length&&!(t.length<=1))for(var i=0;i<t.length;i++){var o=t[i],s=new UWA.Element("span",{class:"VCXScenariosUIDots_dot","data-rec-id":"immersiveNavDot"+i,html:[]}).inject(this._UI_dot_Container_child);s.dataset.scenarioid=o.GetID(),e===s.dataset.scenarioid&&s.addClassName("active")}},startLoadingUI:function(e){e?this._UInext.getChildren()[0].removeClassName("hide"):this._UIprevious.getChildren()[0].removeClassName("hide")},updateAnimationStatus:function(e){var t="mask "+(e+.25)+"s steps(1, end) infinite, morepos "+(e+.25)+"s steps(1, end) infinite";this._UInext.getChildren()[0].style.animation=t,this._UIprevious.getChildren()[0].style.animation=t},stopLoadingUI:function(){this._UInext.getChildren()[0].addClassName("hide"),this._UIprevious.getChildren()[0].addClassName("hide")},registerLeftArrowCB:function(e){this.leftArrowCB=e,this._UIprevious.addEventListener(t.POINTERDOWN,this.leftArrowCB,!1)},unregisterLeftArrowCB:function(){this.leftArrowCB&&this._UIprevious&&(this._UIprevious.removeEventListener(t.POINTERDOWN,this.leftArrowCB),this.leftArrowCB=null)},registerRightArrowCB:function(e){this.rightArrowCB=e,this._UInext.addEventListener(t.POINTERDOWN,this.rightArrowCB,!1)},unregisterRightArrowCB:function(){this.rightArrowCB&&this._UInext&&(this._UInext.removeEventListener(t.POINTERDOWN,this.rightArrowCB),this.rightArrowCB=null)},registerDotClickCB:function(e){this.dotClickCB=e,this.onPointerDownCB=function(e){if(!e.currentTarget.hasClassName("forPlayGuidedTourCmd")){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();var t=e.target?e.target.dataset.scenarioid:void 0;void 0!==t&&this.dotClickCB(t)}}.bind(this),this._UI_dot_Container.addEventListener(t.POINTERUP,this.onPointerDownCB)},registerDotMouseOverCB:function(e){this.cloneDomThumbnailElementCB=e,this.onMouseOverDotCB=function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();var t=e.path?e.path[0].dataset.scenarioid:void 0;if(void 0!==t){var n=this.cloneDomThumbnailElementCB(t);this._UI_dot_Container_clone.innerHTML="",this._UI_dot_Container_clone.appendChild(n)}}.bind(this),this.onMouseOutCB=function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),void 0!==(e.path?e.path[0].dataset.scenarioid:void 0)&&(this._UI_dot_Container_clone.innerHTML="")}.bind(this),this._UI_dot_Container.addEventListener("mouseover",this.onMouseOverDotCB),this._UI_dot_Container.addEventListener("mouseout",this.onMouseOutCB)},removeArrowFirstOrLastScene:function(e,t){if(this._state){var n=t.length,i=t.indexOf(e);1===n?(this._UInext.addClassName("hide"),this._UIprevious.addClassName("hide")):i===n-1?(this._UInext.addClassName("hide"),this._UIprevious.removeClassName("hide")):0===i?(this._UInext.removeClassName("hide"),this._UIprevious.addClassName("hide")):(this._UInext.removeClassName("hide"),this._UIprevious.removeClassName("hide"))}}})}),define("DS/VCXScenePanelView/VCXScenePanelView",["UWA/Class","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/CollectionView/ResponsiveThumbnailsCollectionView","DS/Windows/Panel","DS/Controls/Button","DS/Controls/ButtonGroup","DS/Controls/Toggle","DS/Controls/Accordeon","DS/CoreEvents/Events"],function(e,t,n,i,o,s,a,r,l,c){"use strict";var d=e.extend({init:function(e,t){var n=this;this._tokenCurrentScenario=c.subscribe({event:"VCX_CURRENT_SCENARIO_CHANGED"},function(e){n.changeCurrentScenario(e.GetID())}),this.SmallSceneView=new UWA.Element("div",{id:"scenePanelSmall",html:""}),this.LargeSceneView=new UWA.Element("div",{id:"scenePanelLarge",html:""}),this.Header=new UWA.Element("div",{html:"",id:"vcx-scene-panel-header"}),this.Footer=new UWA.Element("div",{html:"",id:"vcx-scene-panel-footer"});var i=this.SmallSceneView!==this.SmallSceneView&&"horizontal";this.mainPanel=new o({header:this.Header,content:this.SmallSceneView,titleBarVisibleFlag:!1,currentDockArea:WUXDockAreaEnum.NoneDockArea,allowedDockAreas:WUXDockAreaEnum.NoneDockArea,identifier:"PanelSceneGlobal",resizableFlag:i,minWidth:220,width:220,position:{offsetX:400,offsetY:100},usePaddingFlag:!1,visibleFlag:!0}),this.mainPanel.inject(e),this.mainPanel.content.parentNode.addClassName("vcx-scene-panel-container"),this.buildHeader(),this.buildFooter(),this.buildBaseContents()},buildHeader:function(e){for(var t=this;t.Header.hasChildNodes();){var n=t.Header.lastElementChild;t.Header.removeChild(n)}e?t.Header.inject(e):(new UWA.Element("div",{id:"panelTitle",html:"SCENES"}).inject(t.Header),t.Header.expandButton=new s({type:"check",displayStyle:"lite",icon:{iconName:"resize-full",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x"}}).inject(t.Header),t.Header.expandButton.addEventListener("change",function(){var e=t.Header.expandButton.getContent().getElementsByClassName("wux-ui-genereatedicon-fi")[0];t.isPanelSmall()?(t.mainPanel.resizableFlag="horizontal",t.toggleClassName(t.mainPanel.getContent(),"vcx-large-panel","vcx-small-panel"),t.toggleClassName(e,"wux-ui-3ds-resize-small","wux-ui-3ds-resize-full"),t.toggleClassName(t.Header,"vcx-large-header","vcx-small-header"),t.mainPanel.content=t.LargeSceneView):(t.mainPanel.resizableFlag=!1,t.toggleClassName(t.mainPanel.getContent(),"vcx-small-panel","vcx-large-panel"),t.toggleClassName(e,"wux-ui-3ds-resize-full","wux-ui-3ds-resize-small"),t.toggleClassName(t.Header,"vcx-small-header","vcx-large-header"),t.mainPanel.content=t.SmallSceneView)}))},buildFooter:function(e,t){if(this.Footer.addSceneButton=new s({minWidth:35,icon:{iconName:"camera",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"2x"},emphasize:"primary"}),this.Footer.addSceneButton.getContent().setAttribute("id","vcx-addScene-Button"),this.Footer.addSceneButton.inject(this.Footer),this.Footer.addSceneButton.addEventListener("buttonClick",this.addSceneCallback),e)t?this.Footer.inject(this.getLargeContent):this.Footer.inject(this.SmallSceneView);else{this.Footer.inject(this.SmallSceneView);var n=this.Footer.cloneNode(!0);this.LargeSceneView.appendChild(n)}},buildBaseContents:function(){var e=this;this.SmallSceneView.sequenceAccordeon=new l({}),this.SmallSceneView.sequenceAccordeon.buttonGroupList={},this.SmallSceneView.sequenceAccordeon.inject(this.SmallSceneView),this.SmallSceneView.sequenceAccordeon.addEventListener("change",function(t){e.singleSelectionCB&&e.singleSelectionCB(t.dsModel.value[0].sceneID)}),e.sceneCollectionView=new i({displayedOptionalCellProperties:["None"],useDragAndDrop:!0,height:666,thumbnailWidth:50,cellSelection:"none",selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!1,canMultiSelect:!1,canInteractiveMultiselectWithCheckboxClick:!0,enableShiftSelection:!1,enableFeedbackForActiveCell:!1}}).inject(this.LargeSceneView),e.sceneCollectionView.supportsSelection=function(){return!0},e.sceneCollectionView.onSelectionAdd(e._onSelectionAddCB.bind(e)),e.sceneCollectionView.onSelectionRemove(e._onSelectionRemoveCB.bind(e)),e.sceneCollectionView.onInteractiveCumulativeSelectionChanged(e.onInteractiveCumulativeSelectionChangedCB.bind(e)),e.sceneCollectionView.treeDocModel=new t,e.sceneCollectionView.loadApplicativeModel(e.sceneCollectionView.treeDocModel)},createSequenceView:function(e,t,i){var o=new n({label:t,thumbnail:i,propertiesList:{sequenceID:e}});this.sceneCollectionView.treeDocModel.addRoot(o),this.SmallSceneView.sequenceAccordeon.buttonGroupList[e]=new a({});var s={header:t,content:this.SmallSceneView.sequenceAccordeon.buttonGroupList[e]};this.SmallSceneView.sequenceAccordeon.addItem(s)},activateSequence:function(e){},updateScenario:function(e,t,i,o,s){var a=this.getNodeFromScenarioID(e),l=this.getButtonFromScenarioID(e,t);if(a&&l)i&&(a.updateOptions({propertiesList:{sceneName:i}}),l.value.sceneName=i),o&&(a.updateOptions({thumbnail:o}),l.value.sThumbnail=o);else{var c=new n({label:i,color:s?"#368ec4":void 0,thumbnail:o,propertiesList:{sceneID:e}});this.sceneCollectionView.treeDocModel.prepareUpdate(),this.getNodeFromSequenceID(t).addChild(c),this.getNodeFromSequenceID(t).expand(),this.sceneCollectionView.treeDocModel.pushUpdate();var d=new r({type:"radio",value:{sceneID:e,sceneName:i,sThumbnail:o},checkFlag:s});this.SmallSceneView.sequenceAccordeon.buttonGroupList[t].addChild(d)}},changeCurrentScenario:function(e){var t,n;this.currentModelScenarioID&&(t=this.getNodeFromScenarioID(this.currentModelScenarioID),n=this.getButtonFromScenarioID(this.currentModelScenarioID),t&&t.isSelected()&&t.unselect(),n&&(n.checkFlag=!1)),this.currentModelScenarioID=e,t=this.getNodeFromScenarioID(this.currentModelScenarioID),n=this.getButtonFromScenarioID(this.currentModelScenarioID),t&&!t.isSelected()&&t.select(),n&&(n.checkFlag=!0)},getNodeFromScenarioID:function(e){var t=this.sceneCollectionView.model;if(t.length&&t.length>0)for(var n=0;n<t.length;n++){var i=t[n];if(this.sceneCollectionView.getPropertiesList(i)&&this.sceneCollectionView.getPropertiesList(i).sceneID===e)return i}},getNodeFromSequenceID:function(e){var t=this.sceneCollectionView.model;if(t.length&&t.length>0)for(var n=0;n<t.length;n++){var i=t[n];if(this.sceneCollectionView.getPropertiesList(i)&&this.sceneCollectionView.getPropertiesList(i).sequenceID===e)return i}},getButtonFromScenarioID:function(e){var t,n=this.SmallSceneView.sequenceAccordeon.buttonGroupList;e:for(var i in n){var o=n[i]._getButtonList();if(o.length&&o.length>0)for(var s=0;s<o.length;s++){var a=o[s];if(a.value&&a.value.sceneID===e){t=a;break e}}}return t},_onSelectionAddCB:function(e){if(this.sceneCollectionView.isInInteractiveCumulativeSelectionFlag());else{var t=this.sceneCollectionView.treeDocModel.getSelectedNodes();if(1!==t.length)for(var n=0;n<t.length;n++)t[n]!==e&&t[n].unselect();this.currentModelScenarioID!==e.options.propertiesList.sceneID&&(this.currentModelScenarioID=e.options.propertiesList.sceneID,this.singleSelectionCB&&this.singleSelectionCB(e.options.propertiesList.sceneID))}},_onSelectionRemoveCB:function(e){var t=this.sceneCollectionView.treeDocModel.getSelectedNodes();this.sceneCollectionView.isInInteractiveCumulativeSelectionFlag()?t&&t.length<1&&(this.sceneCollectionView.deactivateInteractiveCumulativeSelection(),this.sceneCollectionView.unselectAll(),this.sceneCollectionView.selectNodeModel(this.getNodeFromScenarioID(this.currentModelScenarioID))):t&&1!==t.length&&(this.sceneCollectionView.unselectAll(),this.sceneCollectionView.selectNodeModel(this.getNodeFromScenarioID(this.currentModelScenarioID)))},onInteractiveCumulativeSelectionChangedCB:function(){},addSceneCallback:function(){},toggleClassName:function(e,t,n){e&&e.classList&&"string"==typeof t&&"string"==typeof n?e.classList.contains(t)&&e.classList.contains(n)?e.removeClassName(n):e.classList.contains(t)?(e.removeClassName(t),e.addClassName(n)):e.classList.contains(n)?(e.removeClassName(n),e.addClassName(t)):e.addClassName(t):console.warn("Some argument was not of the right type. No toggle was done.")},isPanelSmall:function(){return this.mainPanel.content===this.SmallSceneView},toggleVisibility:function(){this.mainPanel.visibleFlag?this.mainPanel.hide():this.mainPanel.show()},destroy:function(){this.mainPanel.destroy()},unInitialize:function(){c.unsubscribe(this._tokenCurrentScenario),this.Footer.addSceneButton.removeEventListener("buttonClick",this.addSceneCallback),delete this._tokenCurrentScenario,this.destroy()}});return Object.defineProperty(d.prototype,"SmallSceneView",{enumerable:!0,get:function(){return this._smallScenePanelContent},set:function(e){this._smallScenePanelContent=e}}),Object.defineProperty(d.prototype,"LargeSceneView",{enumerable:!0,get:function(){return this._largeScenePanelContent},set:function(e){this._largeScenePanelContent=e}}),Object.defineProperty(d.prototype,"Header",{enumerable:!0,get:function(){return this._panelSceneHeader},set:function(e){this._panelSceneHeader=e}}),Object.defineProperty(d.prototype,"Footer",{enumerable:!0,get:function(){return this._panelSceneFooter},set:function(e){this._panelSceneFooter=e}}),d});