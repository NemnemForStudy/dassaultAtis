define("DS/CADExportConfig/CADExportConfig",["DS/CADExportConfig/utils/ExportValidator","DS/CADExportConfig/utils/Constants","i18n!DS/CADExportConfig/assets/nls/CADExportConfigNLS"],function(e,t,l){return UWA.i18n(l),{preprocess:function(t,l,a){let n={url3DSpace:t.platformServices["3DSpace"],securityContext:t.securityContext,resolve:l,reject:a};e.computeNodes(t.selectedNodes,t.expandedNodes).then(e.validateCadMasterRoles()).then(e.validateNodes(n))},transform:function(l){let a="-1";"EXN"==this.expander.expanddomain.expandlevel&&(a=parseInt(this.expander.expanddomain.levelvalue).toString());let n=this.objects.filter(e=>e.resourceid&&e.type||e.Path),o={appid:widget&&widget.getValue("x3dAppId")?widget.getValue("x3dAppId"):widget.getValue("appId"),appdata:{data:n,computedselected:e.sSelectNodes},options:[{key:"incldrawing",value:this.force},{key:"title",value:this.title},{key:"expandlevel",value:a},{key:"envId",value:l.platformServices.platformId},{key:"contextId",value:l.securityContext}]};null!=l.platformServices["3dregistry"]&&o.options.push({key:"3dregistry",value:l.platformServices["3dregistry"]});let i=[],r=Array.from(n);return r.forEach(e=>{let l=e.resourceid,a=e.type;if(t.CAD_3DSHAPE===a){let e=r.find(e=>e.to===l);null!=e&&i.push({physicalid:l,parentphid:e.from,type:a})}}),i.length>0&&(o.appdata.referencedata=[],o.appdata.referencedata=i),o},fields:[{key:"title",label:UWA.i18n("cadexportconfig.text.title"),value:"Export"+(new Date).getTime(),type:"DS/Controls/LineEditor"},{key:"force",label:UWA.i18n("cadexportconfig.toggle.drawing"),value:!1,type:"DS/Controls/Toggle",options:{type:"switch",value:!1,checkFlag:!1}},{key:"expander",type:"DS/Controls/Accordeon",options:{expandedFlag:!0},children:[{key:"expanddomain",label:UWA.i18n("cadexportconfig.field.select.expandlevel"),icon:"expand-all",fields:[{key:"expandlevel",label:UWA.i18n("cadexportconfig.field.expandlevel"),value:"EXALL",type:"DS/Controls/ComboBox",options:{enableSearchFlag:!0,elementsList:[{value:"EXALL",label:UWA.i18n("cadexportconfig.field.expandall")},{value:"EXN",label:UWA.i18n("cadexportconfig.field.expandnlevel")}]},successors:function(){if("EXALL"!=this.expandlevel&&"EXN"==this.expandlevel){return[{key:"levelvalue",label:UWA.i18n("cadexportconfig.field.expandnlevel.value"),value:"",type:"DS/Controls/SpinBox",options:{value:1,minValue:0,stepValue:1,pageStepValue:1,displayCustomizer:function(e){let t=1;return"number"==typeof e&&(t=parseInt(e)),t.toString()}}}]}}}]}]}]}});