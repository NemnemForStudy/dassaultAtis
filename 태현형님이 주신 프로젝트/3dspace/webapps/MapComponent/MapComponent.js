var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),__rest=this&&this.__rest||function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o};define("DS/MapComponent/Map/GVMap",["require","exports","DS/ReactLoader/React","DS/SocialGlobeAPI/GlobeAPI"],function(t,e,o,r){"use strict";return function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.geoJson,o=t.cameraPosition,n=t.markers,i=t.markersSelected,a=t.onSelect,s=this.props.tms,p=s.url,c=s.extension,l=s.maxLvl;this._api=new r("gv-map",p,c,l,{}),e&&this._api.addGeoJson(e),o&&this.moveTo(o),n&&this.addMarkers(n),i&&this.updateSelection(i),a&&this._api.setOnSelectCallback(a)},e.prototype.componentDidUpdate=function(t){var e=this.props,o=e.geoJson,r=e.cameraPosition,n=e.markers,i=e.markersSelected,a=e.onSelect;t.geoJson!==o&&this._api.addGeoJson(o),r&&JSON.stringify(t.cameraPosition)!==JSON.stringify(r)&&this.moveTo(r),n&&t.markers!==n&&this.updateMarkers(t.markers,n),i&&t.markersSelected&&this.updateSelection(i),a&&t.onSelect!==a&&this._api.setOnSelectCallback(a)},e.prototype.updateSelection=function(t){console.log("updateSelection"),console.log(t),void 0===t[0]?this._api.unselect(t):this._api.select(t)},e.prototype.updateMarkers=function(t,e){var o;if(t){var r=t.filter(function(t){return!e.includes(t)});o=e.filter(function(e){return!t.includes(e)}),this.removeMarkers(r)}this.addMarkers(null!=o?o:e)},e.prototype.addMarkers=function(t){var e=this;t.forEach(function(t){e._api.addMarker(t.lat,t.lon,t.title,t.description,t.options)})},e.prototype.removeMarkers=function(t){var e=this;t.forEach(function(t){e._api.removeMarker(t.title)})},e.prototype.moveTo=function(t){var e=t.lat,o=t.lon,r=__rest(t,["lat","lon"]);void 0!==e&&this._api.moveCamera(e,o,r)},e.prototype.render=function(){return o.createElement("div",{className:"gv-map",id:"gv-map",style:{height:"100%",width:"100%"}})},e}(o.Component)});