/*!  Copyright 2021 Dassault Systemes. All rights reserved. */
define("DS/DMUwebR3Mux/DMUwebR3Mlist",["UWA/Core","UWA/Class","DS/Utilities/Dom","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/DataGridView/DataGridView","DS/Controls/TooltipModel","DS/Controls/ProgressBar","DS/CollectionView/CollectionViewStatusBar","i18n!DS/DMUwebR3Mux/assets/nls/DMUwebR3Mux.json","css!DS/DMUwebR3Mux/assets/css/DMUwebR3Mux"],function(e,t,n,i,l,a,o,r,s,d){"use strict";let c=window.WUXManagedFontIcons.Font3DS;var u,p,g,f,m=function(e,t,n,i){return u=n.options.grid.analysisStateNbKO,p=i.options.grid.analysisStateNbKO,g=n.options.grid.analysisStateDisp,f=i.options.grid.analysisStateDisp,g===f?u===p?0:u<p?-1:1:g<f?-1:1};return t.extend({init:function(t){let u,p,g,f={},h={},w=t.onSelect,y=t.onUnselect,b=t.onFiltersModified,S=t.onInfo,x=t.cbDnD,C=t.columns,v=t.parent,I=t.getFilterValues,M=t.getIsrTypes,E=t.onRelations,D=t.allowRelations,F=t.onMaturityState,R=t.onAnalysisState,j=t.getFeatureStateInfo,k=t.allowMaturityState,O=t.onValidationState,V=t.allowValidationState,T={show:!1,total:[],completed:[],failed:[]},N=["private","inwork","frozen","released","obsolete","default","exists","inprogress","failed","passed","donenoko","startedwithko","startednoko","donewithko","notcomputed"],_=[{type:s.STATUS.NB_ITEMS},{position:"far",type:s.STATUS.NB_SELECTED_ROWS}];function A(e){return{id:e.options.grid.id,parents:e.getParents().map(function(e){return e.options.grid.id})}}function P(t,n){let i=e.createElement("div",{class:"r3mtweaker "+n});return i.value=t,i.getStringFromValue=function(e){return e||""},i.computeContentSize=function(){let e=15;for(let t=i.childNodes.length-1;t>=0;--t)e+=i.childNodes[t].getDimensions().width;return e},i}function U(e){if(p)return e&&e.nodeModel&&e.cellView?p.getCellDefaultTooltip(e,-1!==(e.nodeModel.options.grid.description||"").search("\n")):p.getCellDefaultTooltip(e)}function B(e){if(!p)return;if(!e||!e.nodeModel||!e.cellView)return p.getCellDefaultTooltip(e);let t=p.getCellDefaultTooltip(e);return{getAllInformationCB:function(){return e.nodeModel.options.grid.validStateWarning?{model:{shortHelp:e.nodeModel.options.grid.validStateWarning},updateModel:!1}:t.getAllInformationCB()}}}function L(e,t,n,i,l,a,s,d){let c;if(n){let a,o=h[l]&&N.indexOf(t)>-1,u=0;if("r3mCellAnalysisState_itfQueryRunning"===t?(a="r3mCellAnalysisState_itfQueryRunning",u=e&&e.nodeModel&&e.nodeModel.options.grid?e.nodeModel.options.grid.analysisStateProgress:0):a="r3mR2VCellState_itfQueryRunning"===t?"r3mR2VCellState_itfQueryRunning":"r3mCellState_"+t+i+(o?"":"_NoColor"),p._reusableCellContentManager.isRegistered(a)||p.registerReusableCellContent({id:a,buildContent:s.bind(null,n,i,o,t,d)}),u>0&&"r3mCellAnalysisState_itfQueryRunning"===t){let e=P("","r3mstatus");new r({value:u}).inject(e),c=e}else c=p.reuseCellContent(a)}e.cellView._setReusableContent(c),e.cellView.tooltipInfos=new o(a?B(e):p.getCellDefaultTooltip(e))}function W(t,n,i,l,a){let o=P(t,"r3mstatus");return e.createElement("span",{html:t,class:i?"r3mstatuscolored r3m"+l:""}).inject(o),a&&(o.style.textAlign="start",o.style.paddingLeft="5px"),o}function Q(t){var n=e.createElement("div",{class:"spinner spinning",styles:{display:"flex","justify-content":"center",transform:"translate3d(0,0,0)"}}).inject(t);e.createElement("span",{class:"spinner-bar"}).inject(n),e.createElement("span",{class:"spinner-bar spinner-bar1"}).inject(n),e.createElement("span",{class:"spinner-bar spinner-bar2"}).inject(n),e.createElement("span",{class:"spinner-bar spinner-bar3"}).inject(n)}function z(t,n,i,l){let a=P(t,"r3mstatus");if("startedwithko"===l||"donewithko"===l){let o=e.createElement("span",{class:i?"r3mstatuscolored r3m"+l:""}).inject(a);e.createElement("span",{html:t+" "}).inject(o),e.createElement("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-lg wux-ui-3ds-attention"}).inject(o),e.createElement("span",{html:" "+n}).inject(o)}else if("computed"===l){let i=e.createElement("span",{class:"r3mstatuscolored r3m"+l}).inject(a);e.createElement("span",{html:t+" "}).inject(i),e.createElement("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-lg wux-ui-3ds-interference-metric"}).inject(i),e.createElement("span",{html:" "+n}).inject(i)}else l.contains("r3mCellAnalysisState_itfQueryRunning")?Q(a):e.createElement("span",{html:t,class:i?"r3mstatuscolored r3m"+l:""}).inject(a);return a}function H(e){if(!(p&&e&&e.nodeModel&&e.cellView))return;let t=e.nodeModel.options.grid;t&&void 0===t.title&&"r2vsurvey"===t.serviceId?(p._reusableCellContentManager.isRegistered("r3mR2VCellState_itfQueryRunning")||p.registerReusableCellContent({id:"r3mR2VCellState_itfQueryRunning",buildContent:function(e){let t=P(e,"r3mR2V_Running");return Q(t),t}.bind(null,"r3mR2VCellState_itfQueryRunning")}),L(e,"r3mR2VCellState_itfQueryRunning","r3mR2VCellState_itfQueryRunning",0,t.id,!1,W,!0),j({serviceId:t.serviceId,objectId:t.id,validatedObjId:e.nodeModel._parentNode._parentNode.options.grid.id,text:e.nodeModel._parentNode._options.grid.id})):L(e,t.title,t.title,0,t.id,!1,W,!0)}function G(e){if(!(p&&e&&e.nodeModel&&e.cellView))return;let t=e.nodeModel.options.grid,n=(t.maturity||"").split(".");L(e,n=n[n.length-1].toLowerCase().replace("_",""),t.maturityDisp,0,t.id,!1,W,!1)}function X(e){if(!(p&&e&&e.nodeModel&&e.cellView))return;let t=e.nodeModel.options.grid;L(e,(t.validState||"").toLowerCase(),t.validStateDisp,0,t.id,!0,W,!1)}function q(e){if(!(p&&e&&e.nodeModel&&e.cellView))return;let t=e.nodeModel.options.grid,n=M();t.analysisState=t.analysisState?t.analysisState:"";let i="running"===t.analysisState||"unknown"===t.analysisState?"r3mCellAnalysisState_itfQueryRunning":t.analysisState;i=i||"",L(e,-1===n.indexOf(t.type)?"":i,t.analysisStateDisp,t.analysisStateNbKO,t.id,!0,z,!1),"unknown"===t.analysisState&&n.indexOf(t.type)>-1&&R([t.id])}function K(t){if(!(p&&t&&t.nodeModel&&t.cellView))return;let n,i=t.nodeModel.options.grid,l=i.id,a=i.validStateWarning,r=(l&&h[l]&&i.validState||"").toLowerCase(),s=M(),d="r3mCellState_validstatewarning";if(!(s.indexOf(i.type)>-1)||p.layout.getColumnVisibleFlag("analysisStateDisp")){if(s.indexOf(i.type)>-1?d=d+(r="inprogress"===r||"failed"===r&&("computed"===i.analysisState||"notcomputed"===i.analysisState||"startednoko"===i.analysisState)?"minorWarning":"majorWarning")+i.analysisState:d+=r="inprogress"===r?"minorWarning":r,a)p._reusableCellContentManager.isRegistered(d)||p.registerReusableCellContent({id:d,buildContent:function(t,n){let i=P(t,"r3mwarning");var l,a;return(l="attention",a="minorWarning"===n?"r3miconcolor":"r3mwarningcolor",e.createElement("span",{class:"wux-button-icon-fi wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-lg wux-ui-3ds-"+l+" "+a})).inject(i),e.createElement("span",{html:t,class:"r3mwarningtext"}).inject(i),i}.bind(null,a,r)}),n=p.reuseCellContent(d);else if(!a&&s.indexOf(i.type)>-1&&"running"===i.analysisState){if(i.analysisStateProgress>0&&("running"===i.analysisState||"unknown"===i.analysisState))return;p._reusableCellContentManager.isRegistered("r3mCellState_itfQueryRunning")||p.registerReusableCellContent({id:"r3mCellState_itfQueryRunning",buildContent:function(e){let t=P(e,"r3mwarning");return Q(t),t}.bind(null,"r3mCellState_itfQueryRunning")}),n=p.reuseCellContent("r3mCellState_itfQueryRunning")}t.cellView._setReusableContent(n),t.cellView.tooltipInfos=new o(B(t))}}function J(e){if(!p||!e||!e.nodeModel)return;let t=p.layout.getDataIndexFromColumnIndex(e.columnID);return Boolean(e.nodeModel.options.grid[t])}function Y(e){if(!p||!e||!e.nodeModel)return;let t=p.layout.getDataIndexFromColumnIndex(e.columnID),n=e.nodeModel.options.grid[t];return n?{icon:e.nodeModel.options.grid[t+"Img"]?"":"topbar-user",label:n}:void 0}function Z(e){w(e.map(A))}function $(e){y(e.map(A))}function ee(){setTimeout(function(){p.reapplySortModel();var t=JSON.parse(localStorage.getItem("r3mGridFilters"));t&&t.filterModel&&!e.equals(t.filterModel,{})&&(u.setFilterModel({}),u.setFilterModel(t.filterModel))},10)}function te(){var e=p.getNodesXSO().get();e&&0!==e.length&&p.ensureNodeModelVisible(e[0],!1)}this.updateValidations=function(e,t,n){u.withTransactionUpdate(function(){Object.keys(e).forEach(function(e){var t=n?function e(t,n){let i,l=this[n],a={label:l.title,grid:l},o=f[n];return l.icon&&(a.icons=[{iconPath:l.icon}]),t.search({match:function(e){e.nodeModel.options.grid.id===l.id&&(i=e.nodeModel)}}),o.forEach(t=>{t.updateOptions(a),Object.keys(l.children||{}).forEach(e.bind(l.children,t))}),i}.call(this,u,e):function e(t,n){let i,a=this[n],o={label:a.title,grid:a},r=f[n];a.icon&&(o.icons=[{iconPath:a.icon}]);let s=M();return-1===T.total.indexOf(a.id)&&s.indexOf(a.type)>-1&&T.total.push(a.id),(t.getChildren()||[]).some(e=>{if(e.options.grid.id===a.id)return i=e}),i||(i=new l(o),t.addChild(i),r?r.push(i):r=f[n]=[i]),a.noSort&&(i.sortChildren=function(e){e.isRecursive&&this.getChildren().forEach(function(t){t.sortChildren(e)})}),r.forEach(t=>{t.updateOptions(o),Object.keys(a.children||{}).forEach(e.bind(a.children,t))}),i}.call(this,u,e);h[e]||(h[e]=t)},e)}),t||ee()},this.updateStatusBar=function(e,t){"success"===t&&-1!==T.completed.indexOf(e)||"failure"===t&&-1!==T.failed.indexOf(e)||("success"===t&&-1===T.completed.indexOf(e)?T.completed.push(e):"failure"===t&&-1===T.failed.indexOf(e)&&T.failed.push(e),function(){let e=T.total.length;if(e>0){var t=e>0?(T.completed.length+T.failed.length)/e*100:100;if(e-(T.completed.length+T.failed.length)<=0&&(T.completed.length=T.failed.length=0,t=100),T.show){const e=_.findIndex(e=>"progressId"===e.id);-1===e&&100!==t?(_.push({type:s.STATUS.CUSTOM,id:"progressId",position:"center",dataElements:{typeRepresentation:"progress",value:t,tooltip:d.gridAnalysisFilterStatus}}),p.buildStatusBar(_)):-1!==e&&100===t?(_=_.filter(e=>"progressId"!==e.id),T.show=!1,p.buildStatusBar(_)):p.elements.statusBar.getNodeModelByID("progressId").updateOptions({grid:{data:t}})}}}())},this.checkFilterAndFetchValue=function(){if(!p||!u)return;let e=JSON.parse(localStorage.getItem("r3mGridFilters"));if(-1!==p.sortModel.findIndex(e=>"analysisStateDisp"===e.dataIndex||"validStateWarning"===e.dataIndex)||e&&e.filterModel&&(e.filterModel.hasOwnProperty("analysisStateDisp")||e.filterModel.hasOwnProperty("validStateWarning"))){let e=M();u.getAllDescendants().forEach(function(t){let n=t.options.grid;e.indexOf(n.type)>-1&&"unknown"===n.analysisState&&(T.show=!0,R([n.id],!1))})}},this.setInfoState=function(e){let t=p.getToolbar().array3[0].tweaker.elements.container,n=t.hasClassName("r3mInfoColor");n&&!e?t.removeClassName("r3mInfoColor"):!n&&e&&t.addClassName("r3mInfoColor")},this.getSelectedRows=function(){return p.getNodesXSO().get().map(A)},this.onTenantModified=function(e){let t={tree:"title",name:"name",typeDisp:"type",maturityDisp:"maturity",validStateDisp:"validState",description:"description",owner:"owner",originator:"originator",organization:"organization",dateModif:"dateModif",dateCreat:"dateCreat",collabSpace:"collabSpace"};g.forEach(n=>{n.text=e[t[n.dataIndex]]})},this.removeValidation=function(e){u.withTransactionUpdate(function(){e.forEach(function(e){h[e]&&u.removeRoot(h[e]);let t=f[e]&&f[e].indexOf(h[e]);t>-1&&f[e].splice(t,1),!f[e].length&&delete f[e],delete h[e]}),ee()})},this.removeAll=function(){p.getNodesXSO().empty(),u.empty(),f={},h={}},function(){function t(e,t){var n=e.getSize(),i=t.getSize(),l=(i.width-n.width)/2,a=(i.height-n.height)/2;e.setStyles({left:l<0?0:l,top:a<0?0:a})}function l(){let e=this.showCustomViewsDialog();function i(){Object.keys(e.buttons).forEach(function(t){e.buttons[t].removeEventListener("click",l)}),e.removeEventListener("close",i),n.removeResizeListener(v)}t(e.elements.container,v),Object.keys(e.buttons).forEach(function(t){e.buttons[t].addEventListener("click",i)}),e.addEventListener("close",i),n.addResizeListener(v,function(){t(e.elements.container,v)})}g=[{dataIndex:"tree",text:C.title,onCellRequest:H,groupableFlag:!1},{dataIndex:"name",text:C.name,width:150,visibleFlag:!1,groupableFlag:!1},{dataIndex:"typeDisp",text:C.type,width:150,visibleFlag:!1,groupableFlag:!1,alignment:"center"},{dataIndex:"maturityDisp",text:C.maturity,onCellRequest:G,width:90,groupableFlag:!1},{dataIndex:"validStateDisp",text:C.validState,onCellRequest:X,width:100,groupableFlag:!1},{dataIndex:"validStateWarning",icon:{iconName:"attention",fontIconFamily:c},onCellRequest:K,width:60,minWidth:30,groupableFlag:!1},{dataIndex:"analysisStateDisp",text:C.analysisState,onCellRequest:q,width:150,compareFunction:m,visibleFlag:!1,groupableFlag:!1},{dataIndex:"description",text:C.description,getCellTooltip:U,width:300,groupableFlag:!1},{dataIndex:"owner",text:C.owner,typeRepresentation:"user",hasCellValue:J,getCellValue:Y,width:150,groupableFlag:!1},{dataIndex:"originator",text:C.originator,typeRepresentation:"user",hasCellValue:J,getCellValue:Y,width:150,visibleFlag:!1,groupableFlag:!1},{dataIndex:"organization",text:C.organization,width:100,visibleFlag:!1,groupableFlag:!1},{dataIndex:"dateModif",text:C.dateModif,typeRepresentation:"datetime",width:150,groupableFlag:!1},{dataIndex:"dateCreat",text:C.dateCreat,typeRepresentation:"datetime",width:150,visibleFlag:!1,groupableFlag:!1},{dataIndex:"collabSpace",text:C.collabSpace,visibleFlag:!1,groupableFlag:!1}],u=new i({shouldAcceptDrag:function(){return!0},shouldAcceptDrop:function(){return!1}});var o=e.createElement("div",{class:"r3mListPlaceHolder"});e.createElement("p",{html:d.placeHolderFst,styles:{"text-align":"center"}}).inject(o);var r=e.createElement("div",{styles:{"font-weight":"normal","text-align":"center"}}).inject(o);e.createElement("span",{html:d.placeHolderSnd+" "}).inject(r),e.createElement("span",{class:"fonticon fonticon-list-filter"}).inject(r);var s={identifier:"r3mDataGridView",treeDocument:u,defaultColumnDef:{width:"auto",height:"auto",editableFlag:!1},columns:g,rowSelection:"multiple",cellSelection:{defaultValue:"none"},rowGroupingEnabledFlag:!1,sortModel:[{dataIndex:"tree",sort:"asc"}],rowDragEnabledFlag:!0,allowUnsafeHTMLContent:!1,cellDragEnabledFlag:!0,activateAllCellsRenderedEventFlag:!0,placeholder:o,recId:"r3mValidationList",onContextualEvent:function(e){if(e){var t=[],n=e.cellInfos;if(e.collectionView&&n)if(-1===n.rowID&&-1!==n.columnID){let n=p.layout.getDataIndexFromColumnIndex(e.cellInfos.columnID);"tree"===n&&(n="label");var i=["typeDisp","maturityDisp","validStateDisp","analysisStateDisp","validStateWarning","owner"].indexOf(n)>-1?"set":"stringRegexp";if(u.getFilterManager().getFilters().hasOwnProperty(n)){var a=u.getFilterManager().getFilters()[n];a&&a.defaultFilterModel&&(a.defaultFilterModel=[])}else u.getFilterManager().setPropertyFilterModel(n,{filterId:i});(t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!1,sizeColumnToFit:!0,columnsManagement:!1})).push({type:"PushItem",title:d.mnuExpandAllRows,icon:{iconName:"flow-tree-expand-down",fontIconFamily:c},action:{callback:function(){u.withTransactionUpdate(function(){Object.values(h).forEach(function(e){e.expandAll()})})}}}),t.push({type:"PushItem",title:d.mnuCollapseAllRows,icon:{iconName:"flow-tree-expand-up",fontIconFamily:c},action:{callback:function(){u.withTransactionUpdate(function(){Object.values(h).forEach(function(e){e.collapseAll()})})}}}),t.push({type:"SeparatorItem",title:""}),"label"!==n&&t.push({type:"PushItem",title:d.mnuHideCol,action:{callback:function(){p.layout.setColumnVisibleFlag(p.layout.getDataIndexFromColumnIndex(e.cellInfos.columnID),!1,{isUserInteraction:!0})}}}),t.push({type:"SeparatorItem",title:""}),t.push({type:"PushItem",title:d.mnuCustomView,action:{callback:l.bind(e.collectionView)}})}else if(-1!==n.columnID&&-1!==n.rowID){var o=p.getNodesXSO().get();o.some(function(e){return e.canBeExpanded()&&(!e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&!e.isExpanded()}))})&&t.push({type:"PushItem",title:d.mnuExpandAll,icon:{iconName:"flow-tree-expand-down",fontIconFamily:c},action:{callback:function(){u.withTransactionUpdate(function(){p.getNodesXSO().get().forEach(function(e){e.expandAll()})})}}}),o.some(function(e){return e.canBeExpanded()&&(e.isExpanded()||e.getAllDescendants().some(function(e){return e.canBeExpanded()&&e.isExpanded()}))})&&t.push({type:"PushItem",title:d.mnuCollapseAll,icon:{iconName:"flow-tree-expand-up",fontIconFamily:c},action:{callback:function(){u.withTransactionUpdate(function(){p.getNodesXSO().get().forEach(function(e){e.collapseAll()})})}}}),t.length&&t.push({type:"SeparatorItem"});let e=D(),n=k(),i=V();(e&&e.length||n&&n.length||i&&i.length)&&t.push({type:"PushItem",title:d.mnuRelations,icon:{iconName:"object-related",family:c},action:{callback:E}}),n&&n.length&&t.push({type:"PushItem",title:d.mnuMaturity,icon:{iconName:"collaborative-lifecycle-management",family:c},action:{callback:F}}),i&&i.length&&t.push({type:"PushItem",title:d.mnuValidation,icon:{iconName:"check",family:c},action:{callback:O}})}return t}}};Object.keys(x).forEach(function(e){s[e]=x[e]}),x=null,(p=new a(s)).getContent().addClassName(s.identifier),window.__karma__&&(p.layout.addCellCoordinates=!0);var f=p.getNodesXSO();f.options.getElementID=void 0,f.onPostAdd(Z),f.onPostRemove($),p.addEventListener("DSpointerhit",function(e,t){e&&e.multipleHitCount>1&&t&&t.columnID>=0&&t&&t.rowID>=0&&S()}),u.getFilterManager().subscribe("filterModelChange",function(){setTimeout(function(){let t=e.clone(u.getFilterManager().filterModel,!0);t=Object.keys(t).reduce((e,n)=>(t[n].filterModel&&Object.keys(t[n].filterModel).length>0&&(e[n]=t[n]),e),{}),localStorage.setItem("r3mGridFilters",JSON.stringify({filterModel:t})),te()},10)}),u.getModelEvents().subscribe({event:"sortChildren"},function(){setTimeout(function(){te()},10)});var w=e.createElement("div",{class:"r3mPanel wux-windows-window-maincontent wux-element-contentbox"}).inject(v),y=e.createElement("div",{class:"wux-windows-window-header wux-element-contentbox"}).inject(w);p.setToolbar({entries:[{id:"listFilter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"list-filter",fontIconFamily:c},position:"near",value:function(){require(["DS/Controls/Button","DS/Windows/Dialog","DS/Controls/Toggle","DS/Controls/ButtonGroup"],function(i,l,a,o){let r,s,c=e.createElement("div"),u=I(),p=e.createElement("div").inject(c);e.createElement("span",{class:"fonticon fonticon-3ds-who"}).inject(p),e.createElement("label",{text:d.pnlOwner,class:"r3mFilterOwner",styles:{"margin-left":"2px"}}).inject(p),p=e.createElement("div",{styles:{"margin-left":"20px"}}).inject(c);var g=new o({type:"radio"}).inject(p);g.addChild(new a({label:d.pnlMe,value:0,type:"radio",checkFlag:0===u.owner})),g.addChild(new a({label:d.pnlOrga,value:1,type:"radio",checkFlag:1===u.owner})),g.addChild(new a({label:d.pnlAll,value:2,type:"radio",checkFlag:2===u.owner})),p=e.createElement("div").inject(c),e.createElement("span",{class:"fonticon fonticon-3ds-what"}).inject(p),e.createElement("label",{text:d.pnlMaturity,class:"r3mFilterMaturity",styles:{"margin-left":"2px","margin-top":"10px"}}).inject(p),p=e.createElement("div",{styles:{"margin-left":"20px"}}).inject(c);var f=new a({label:d.pnlReleased,value:"idReleased",type:"checkbox",checkFlag:1===u.released}).inject(p),m=new a({label:d.pnlObsolete,value:"idObsolete",type:"checkbox",checkFlag:1===u.obsolete}).inject(p);p=e.createElement("div").inject(c),e.createElement("span",{class:"fonticon fonticon-3ds-what"}).inject(p),e.createElement("label",{text:d.pnlType,class:"r3mFilterType",styles:{"margin-left":"2px","margin-top":"10px"}}).inject(p),p=e.createElement("div",{styles:{"margin-left":"20px"}}).inject(c);var h=new a({label:d.pnlRvw,value:"idRvw",type:"checkbox",checkFlag:1===u.rvw}).inject(p),w=new a({label:d.pnlIsr,value:"idIsr",type:"checkbox",checkFlag:1===u.isr}).inject(p),y=new a({label:d.pnlMsr,value:"idMsr",type:"checkbox",checkFlag:1===u.msr}).inject(p),S=new a({label:d.pnlMkp,value:"idMkp",type:"checkbox",checkFlag:1===u.mkp}).inject(p);function x(e){return Array.isArray(e.value)?e.value[0]:e.checkFlag?1:0}function C(){n.removeResizeListener(v),r.destroy()}var M=new i({emphasize:"primary",label:d.pnlOK,onClick:function(){C(),T.total.length=T.completed.length=T.failed.length=0,b({rvw:x(h),isr:x(w),mkp:x(S),msr:x(y),owner:x(g),released:x(f),obsolete:x(m)})}}),E=new i({label:d.pnlCancel,onClick:C});r=e.createElement("div",{class:"wux-windows-modalDialog",styles:{}}).inject(v),(s=new l({title:d.pnlTitle,ensureHeightDefinitionOnHierarchy:!0,content:c,resizableFlag:!0,height:345,position:{of:v,constraint:v},buttons:{Cancel:E,Ok:M}})).elements.container.inject(r),s.addEventListener("close",C),t(s.elements.container,v),n.addResizeListener(v,function(){t(s.elements.container,v)})})}}},{id:"sidePanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:c},position:"far",value:S}}]}).inject(y);var M=e.createElement("div",{class:"wux-windows-window-content wux-element-contentbox"}).inject(w);p.inject(M),n.addEventOnElement(w,w,"dimensionsChanged",function(){var e=window.getComputedStyle(M),t=e?e.getPropertyValue("padding-top"):"";t=""===t?0:parseInt(t,10);var n=e?e.getPropertyValue("padding-bottom"):"";n=""===n?0:parseInt(n,10);var i=y.offsetHeight+t+n;M.setStyle("height",i?"calc(100% - "+i+"px)":"100%")}),p.buildStatusBar(_)}()}})});