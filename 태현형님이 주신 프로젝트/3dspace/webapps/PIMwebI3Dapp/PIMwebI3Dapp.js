window.top.performance.mark("PIM_jsAppLoad"),
/*!  Copyright 2018 Dassault Systemes. All rights reserved. */
define("DS/PIMwebI3Dapp/PIMwebAppMain",["UWA/Core","DS/PADUtils/PADSettingsMgt"],function(e,t){"use strict";var n,i,o;function a(e){var t=e.getValue("xsceneStoredObjects");return t&&"string"==typeof t||(t='{"products":{},"filters":{}}'),JSON.parse(t)}function r(e){e&&e.length&&(this.showWelcomePanel(!1),this.pad3DViewer.addRootNodesFromContent({json3DXContent:{protocol:"3DXContent",version:"1.1",source:"X3DSEAR_AP",data:{items:e.map(function(e){return{envId:require("DS/PADUtils/PADUtilsServices").getPlatformId(),objectId:e.id,objectType:e.type,displayName:e.displayName}})}}}))}function s(e){r.call(this,e.map(function(e){return{id:e.resourceid,type:e["ds6w:type_value"],displayName:e["ds6w:label"]}}))}function l(e){if(e&&e.length){n.publish({event:"ENXViews/LandingPage/addOrRefresh",data:{objects:e.map(function(e){return{resourceid:e,openWithFilter:!1,loading:!0,fromCustom:!0}})}});var t=setInterval(function(){this.isAppReady&&(clearInterval(t),require(["DS/PIMwebViewModel/PIMwebUtils"],function(t){t._fetchForWelcomePanel({ids:e,onComplete:function(e){var t=((e?JSON.parse(e):{}).results||[]).map(function(e){var t={};e.attributes.forEach(function(e){t[e.name]=e.value});var n=t["ds6w:type"],i={resourceid:t.resourceid,label:t["ds6w:label"],icons:[t.type_icon_url],thumbnail:t.preview_url,grid:t,subLabel:t["ds6w:responsible"]+" | "+new Date(t["ds6w:modified"]).toLocaleString(),description:t["ds6w:identifier"],openWithFilter:!1,fromCustom:!0,loading:void 0,item2Load:{}};i.item2Load[i.resourceid]={};var o=!!this.pimCtrl&&this.pimCtrl.getLoadedData();return i.opened=!!o[i.resourceid]||Object.keys(o).some(function(e){return o[e].indexOf(i.resourceid)>=0}),"SIMItfSimulation"!==n&&"PLMPIMMetricReference"!==n||(i.addRemoveFromViewCtx=!0),i}.bind(this));n.publish({event:"ENXViews/LandingPage/addOrRefresh",data:{objects:t}})}.bind(this),onFailure:function(){}})}.bind(this)))}.bind(this),100)}}function d(e){this.isAppReady=!1,this.params=e,this.welcomePanel=this.pad3DViewer=this.pimCtrl=null,this.tokensWelcomePanel=[]}return d.prototype={constructor:d,initialize:function(){return new Promise(function(e){require(["DS/PADServices/views/LandingPage","DS/PADServices/utils/GlobalModelEvents","i18n!DS/PIMwebI3Dapp/assets/nls/PIMwebI3Dapp"],function(t,i,o){n=i,this.tokensWelcomePanel.push(n.subscribe({event:"ENXViews/LandingPage/refreshCustom"},function(e){var t=a(this.params.widget),n=[].concat(Object.keys(t.isr||{}),Object.keys(t.itf||{}));l.call(this,e.filter(function(e){return n.indexOf(e)>-1}))}.bind(this))),this.tokensWelcomePanel.push(n.subscribe({event:"ENXViews/LandingPage/openCustom"},function(e){var t=this.params.widget.getValue("xsceneStoredObjects"),n=[];t=t?JSON.parse(t):{},e.customitem2open.forEach(function(e){t.isr&&t.isr[e]?n.push({id:e,type:"SIMItfSimulation"}):t.itf&&t.itf[e]&&n.push({id:e,type:"PLMPIMMetricReference"})}),r.call(this,n)}.bind(this))),this.tokensWelcomePanel.push(n.subscribe({event:"ENXViews/LandingPage/removeFromView"},function(e){if(e&&e.customitem2remove&&e.customitem2remove.length){var t=this.pimCtrl.getLoadedData(),n=[];e.customitem2remove.forEach(function(e){t[e]&&-1===n.indexOf(e)?n.push(e):Object.keys(t).forEach(function(i){t[i].indexOf(e)>-1&&-1===n.indexOf(i)&&n.push(i)})}),n.forEach(this.pimCtrl.removeIsr,this.pimCtrl)}}.bind(this))),this.tokensWelcomePanel.push(n.subscribe({event:"ENXViews/LandingPage/removeFromStore"},function(e){var t=this.params.widget.getValue("xsceneStoredObjects"),i=[];t=t?JSON.parse(t):{},e.customitem2remove.forEach(function(e){t.isr&&t.isr[e]&&-1===i.indexOf(e)?(i.push(e),delete t.isr[e]):t.itf&&t.itf[e]&&-1===i.indexOf(t.itf[e])&&(i.push(t.itf[e]),delete t.itf[e])}),this.params.widget.setValue("xsceneStoredObjects",JSON.stringify(t)),n.publish({event:"ENXViews/LandingPage/removeFromView",data:{customitem2remove:i}})}.bind(this))),this.tokensWelcomePanel.push(n.subscribe({event:"ENXViews/WelcomePanel/action/welcomePanelIsr"},function(){t.launchSearch({title:o.isr,precondition:'flattenedtaxonomies:"types/SIMItfSimulation"',showApplyButton:!1,ok:s.bind(this)})}.bind(this))),this.tokensWelcomePanel.push(n.subscribe({event:"ENXViews/WelcomePanel/action/welcomePanelItf"},function(){t.launchSearch({title:o.itf,precondition:'flattenedtaxonomies:"types/PLMPIMMetricReference"',showApplyButton:!1,ok:s.bind(this)})}.bind(this))),this.tokensWelcomePanel.push(n.subscribe({event:"ENXViews/WelcomePanel/action/welcomPanelPrefCmd"},function(){if("true"===localStorage.getItem("CATWebUXMePreferenceImplementation")){require(["DS/MePreferencesClientAPI/MePreferencesClientAPI"],function(e){if(e&&e.getMePreferencesDialog){const t=window.widget.getValue("appId");e.getMePreferencesDialog(`3DSApp.${t}`).then(e=>{this.showWelcomePanel(!1),e.inject(this.pad3DViewer.getFrameWindow().getImmersiveFrame().getContent())})}}.bind(this))}else require(["DS/CATWebUXPreferences/CATWebUXPreferencesManager"],function(e){var t=e.givePreferenceManager({context:this.pad3DViewer.getFrameWindow()});if(t){var n=t.subscribe("onPreferencesPanelDestroyed",function(){t.unsubscribe(n),this.showWelcomePanel(!0)}.bind(this));this.showWelcomePanel(!1),t.displayPreferencePanel(this.pad3DViewer.getFrameWindow())}}.bind(this))}.bind(this)));var d=t.getDefaultActivities();d.activities[0].section.actions.splice(2,0,{id:"welcomePanelIsr",title:o.isr,icon:"interference-simulation"}),d.activities[0].section.actions.splice(3,0,{id:"welcomePanelItf",title:o.itf,icon:"interference-metric"}),d.activities.push({section:{id:"customizeAppSection",title:o.customApp,actions:[{id:"welcomPanelPrefCmd",title:o.prefs,icon:"cog"}]}}),this.welcomePanel=new t({widget:this.params.widget,readOnlyApp:!1,renderDiv:this.params.renderDiv,externalViewerMgt:!0,externalViewerMgtCB:function(e,t){!0!==t&&this.showWelcomePanel("viewer"!==e)}.bind(this),globalSearchPrecond:'flattenedtaxonomies:"types/SIMItfSimulation" OR flattenedtaxonomies:"types/PLMPIMMetricReference" OR flattenedtaxonomies:"types/VPMReference" OR flattenedtaxonomies:"types/VPMRepReference" OR flattenedtaxonomies:"types/ENOStrRefinementSpecification"',defaultActionId:d.defaultActionId,activities:d.activities,onLandingPageReady:this.params.onLandingPageReady}),this.welcomePanel.initialize().then(function(){var t=a(this.params.widget);l.call(this,[].concat(Object.keys(t.isr||{}),Object.keys(t.itf||{}))),e()}.bind(this))}.bind(this))}.bind(this))},setViewer:function(e){this.pad3DViewer=e,!this.params.initApp&&this.showWelcomePanel(!1);var t=e.render().getContent(),n=t.parentNode;t.style.position="relative",!this.params.renderDiv.parentNode&&n&&n!==this.params.renderDiv&&n.insertBefore(this.params.renderDiv,n.firstChild),this.params.renderDiv.insertBefore(t,this.params.renderDiv.firstChild),this.params.renderDiv.insertBefore(this.welcomePanel.elements.mainBody,this.params.renderDiv.firstChild),this.welcomePanel.setViewer(e,!this.params.initApp)},appReady:function(e){if(this.pimCtrl=e,this.isAppReady=!0,this.params.initApp){let a=this.params.widget.getValue("X3DContentId"),r=this.params.widget.id.indexOf("preview")>-1;if(this.params.widget.deleteValue("X3DContentId"),a)e.appInitFromTransition({x3dContent:JSON.parse(a),onNoActionDone:function(){this.addRootNodesFromContent({json3DXContent:JSON.parse(a),dispatch:!1})}.bind(this.pad3DViewer)});else if(!0===this.params.widget.getValue("autoreload")||!0===this.params.widget.getValue("autoreloadPreviewApp")&&!r){var t=this.params.widget.getValue("ItfSimuInSession");if((t=t?JSON.parse(t):null)&&!Array.isArray(t)&&"object"==typeof t){var n=Object.keys(t);if(1===n.length){var i={},o=n[0];Array.isArray(t[o])&&t[o].length?i.metricID=t[o]:i.isrID=o,this.showWelcomePanel(!1),e.load(i)}}}r?this.params.widget.setValue("autoreloadPreviewApp",!0):this.params.widget.deleteValue("autoreloadPreviewApp")}var a=this.welcomePanel.appReady();return this.welcomePanel.redraw(),a},dispose:function(){if(this.showWelcomePanel(!1),this.welcomePanel)return this.pad3DViewer=this.params=this.pimCtrl=null,this.tokensWelcomePanel.forEach(n.unsubscribe,n),this.tokensWelcomePanel.length=0,this.welcomePanel.dispose()},showWelcomePanel:function(e){this.welcomePanel&&(this.welcomePanel.elements.mainBody.style.position="relative",this.welcomePanel.elements.mainBody.style.display=e?"":"none",e&&this.welcomePanel.redraw())}},Object.freeze({getApp:function(n){if(!n||!n.data)throw new Error("App identification is missing! Unable to init app");if("I3D"!==n.data&&"I3S"!==n.data)throw new Error("Invalid app id: "+n.data);if("I3D"===n.data&&i)return i;if("I3S"===n.data&&o)return o;var a,r,s,l,c,p,u,f,m=n.widget,h=n.pad3DViewer,w=n.appMainDiv,P=h?h.getCommandContext():null,g={},b={module:"PIMweb"+n.data+"app",file:"PIMweb"+n.data+"appWkb.xml"};function D(e,t,n){window.top.performance.measure(m.id+e,n?m.id+t:t)}function v(e){window.top.performance.mark(m.id+e)}function I(){h&&h.getContentName({callbacks:{onComplete:function(e){m.setTitle(e.contentName)},onFailure:function(){}}})}function A(e){r&&a&&!l&&(s&&s(w),s=null,u.appReady(r),D("_PIM_Global widget creation time","PIM_jsAppLoad",!1),m.dispatchEvent("onWidgetAndAppReady","1"===m.getValue("widgetForODTReplay")?[{pad3DViewer:e}]:void 0))}""!==window.location.search&&(e.extend(g,e.Utils.parseQuery(window.location.search)),g.widgetDomain&&e.extend(g,e.Utils.parseQuery(g.widgetDomain))),"testWkb"in g&&(b={module:"PIMwebI3Dtst",file:"PIMwebI3DappTestWkb.xml"});var S,M,C,y=function(){require(["DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext","DS/PADUtils/PADCommandProxy"],function(e,t){(S=e).renderDiv||S.initialize2(h.getFrameWindow().getViewerFrame(),t.appId(),m.getValue("changeControlActivation")?"show":"hide","top-right",function(){S.addEvent("onAuthoringCtxVisible",function(e){e.showAuthoringContext&&m.setValue("changeControlActivation",!0)})})})},V=function(e){require(["DS/PADUtils/PADCommandProxy","DS/PADUtils/PADSharedSettings","i18n!DS/PADUtils/assets/nls/PADUtils"],function(n,i,o){var a,r=[];C=function(){m.setPreferences([]),a.destroy(),r.forEach(function(e){e.cb&&t.removeEvent(e.cb,e.padFct)}),C=function(){}},M=function(){r.forEach(function(e){var n=e.preference.name,i=m.getValue(n),o=t.getSetting(n);(i="boolean"===e.preference.type&&"boolean"!=typeof i?"true"===i:i)!==o&&t.setSetting(n,i),e.fct&&e.fct(i)}),t.updateWidgetPreferences(),!a&&r.length&&(a=n.create({events:{onPreferenceModification:function(e){r.some(function(n){if(e.name===n.preference.name){if("boolean"!=typeof e.value&&"string"!=typeof e.value)throw new Error("Value must be a string or a boolean");if(t.getSetting(e.name)!==e.value){if("boolean"===n.preference.type&&"boolean"!=typeof e.value)throw new Error("Preference is a boolean type so value must be a boolean");n.debounce=!0,m.setValue(e.name,e.value),t.setSetting(e.name,e.value)}return n.fct&&n.fct(e.value),!0}})}}}),r.forEach(function(e){e.cb&&t.addEvent(e.cb,e.padFct=function(t){e.debounce?e.debounce=!1:a.preferenceModification({name:e.preference.name,value:t})})}))},m.setPreferences([]),t.setSetting("syncAutoReload",!0),i.destroy(),i.addSharedSettings(m),r.push({preference:{name:"changeControlActivation",type:"boolean",label:o.changeControlActivation_label,defaultValue:!1},fct:function(e){S&&S[e?"show":"hide"]()},cb:"onChangeControlActivation",debounce:!1}),r.push({preference:{name:"changeControlPosition",type:"list",label:o.changeControlPosition_label,defaultValue:"top-right",options:[{label:o["top-right_label"],value:"top-right"},{label:o["top-left_label"],value:"top-left"},{label:o["bottom-left_label"],value:"bottom-left"},{label:o["bottom-right_label"],value:"bottom-right"}]},fct:function(e){S&&S.setPosition(e)}}),t.setSetting("authorizeChangeControl",!0),e&&y(),r.forEach(function(e){m.mergePreferences([e.preference])}),M(),m.addEvent("endEdit",M)})};function _(e){e.unsubscribe(c),c=null,I(),y(),require("DS/PADUtils/PADUtilsServices").isCloud()&&!window.__preventPrefPanel&&e.getViewer().displayIntroductoryControlPreferencePanel(),v("_PIM_beforeAppComponentLoad"),require(["DS/PIMwebViewController/PIMwebItfCtrl"],function(t){D("_PIM_AppComponentLoading","_PIM_beforeAppComponentLoad",!0),(r=t.getItfCtrl({pad3DViewer:e})).activate({readOnly:!1}),A(e)})}function W(e){e.unsubscribe(p),p=null,v("_PIM_ownCommands"),D("_PIM_Action Bar merge app commands","_PIM_ownCommands",!0),v("_PIM_beforeDefaultCmdLoad"),P=h.getCommandContext(),(a=require("DS/ApplicationFrame/CommandsManager")).setDefaultCommand({ID:"PIMwebDefaultHdr",className:"DS/PIMwebViewController/PIMwebDefaultCmd",context:P}),D("_PIM_Default Cmd Init","_PIM_beforeDefaultCmdLoad",!0),A(e)}function E(e){D("_PIM_PAD3DViewer creation","_PIM_PAD3DViewerReady",!0),e.unsubscribe(l),l=null,A(e)}function O(t){return w||(w=e.createElement("div",{class:"appMain",styles:{width:"auto",height:"100%"}})),(u=new d({widget:m,readOnlyApp:!1,renderDiv:w,initApp:t&&t.initApp,onLandingPageReady:t&&t.onLandingPageReady})).initialize()}function x(){if(t&&t.setSetting("activateWidgetLink",!0),!h){D("_PIM_UWA widget loading","_PIM_widgetLoad",!0),v("_PIM_LoadJSPAD3DViewer");var i=new Promise(function(e){O({initApp:!0,onLandingPageReady:function(){s(w),s=null}}).then(e)}),o=new Promise(function(e){require(["DS/ENOPAD3DViewer/PAD3DViewer","DS/CATWebUXPreferences/CATWebUXPreferencesManager","text!DS/PIMwebI3Dapp/assets/json/PIMwebI3DWindowOptions.json"],function(t,n,i){D("_PIM_PAD3DViewer load JS","_PIM_LoadJSPAD3DViewer",!0),v("_PIM_PAD3DViewerReady"),f=n,e([t,i])})}),a=new Promise(e=>{require(["DS/ENOXInterWdgCom/LinkManager"],t=>{t.initializeWidgetLink(m,{appIds:[],uses:["ENXContent","ENXContentSync2D","ENXAuthoring2D","ENXAuthoring3D","ENXLandingPageSync"],implements:["ENXContent","ENXContentSync3D","ENXLandingPageSync"],open:!0}).then(e)})});Promise.all([i,o,a]).then(function(i){t=require("DS/PADUtils/PADSettingsMgt");var o=e.extend({context:"Default",workbench:b.file,workbenchModule:b.module},JSON.parse(i[1][1])),a={widget:m,windowOptions:o,enableFiltering:!0,binaryPrimitives:!0,enableSidePanel:!0,visuProgressiveTileModel:!0,readyCB:V};o.mouseProfile=require("DS/PADUtils/PADUtilsServices").isCloud()?window.__mouseProfile:"CATIA",h=new i[1][0](a),o.mouseProfile&&h.getViewpoint().setDefaultController(!0,o.mouseProfile),f.getPreferenceManager({context:h.getFrameWindow()}).removeAllPreferences(),u.setViewer(h),h.setOption("propertiesFacet",t.getSetting("propertiesFacet")),h.setAuthorizedRootTypes(t.getSetting("ups_authorized_root_types")),h.setDefaultContextualBarVisibility(!0),h.setDefaultContextualMenuVisibility(!0),h.setOpenWithMenuAvailability(!0),c=h.subscribe({event:"onViewerReady"},_),p=h.subscribe({event:"onActionBarReady"},W),l=h.subscribe({event:"onReady"},E),h.subscribe({event:"onRootAdded"},I),h.subscribe({event:"onRootRemoved"},I),h.subscribe({event:"onRootAttached"},I),h.subscribe({event:"onRootDetached"},I),h.subscribe({event:"onContentNameModified"},I),t.setSetting("settypes",!0),"1"===m.getValue("widgetForODTReplay")&&m.dispatchEvent("onPAD3DViewerCreated",[{pad3DViewer:h}]),n.done&&n.done({appMainDiv:w,pad3DViewer:h})})}}function N(){h&&h.refresh()}function L(){u&&u.dispose(),u=null,r&&r.dereference(),i=o=m=h=s=w=a=r=f=null}function R(e){h&&h.search({searchQuery:e})}h?m.addEvent("onDestroy",L):(D("_PIM_JS dependencies loading","PIM_jsAppLoad",!1),v("_PIM_widgetLoad"),n.viewerAttachment?(s=n.viewerAttachment,x()):(s=function(e){m.setBody(e)},m.addEvent("onLoad",x)),m.addEvent("onRefresh",N),m.addEvent("onDestroy",function(){var e=h;L(),e&&e.destroy()}),m.addEvent("onSearch",R),m.setMetas({helpPath:"PIMwebI3Dapp/assets/help"}));var X=Object.freeze({setUp:function(e){Promise.all([a?Promise.resolve():new Promise(function(e){require(["DS/ApplicationFrame/CommandsManager"],function(t){a=t,e()})}),f?Promise.resolve():new Promise(function(e){require(["DS/CATWebUXPreferences/CATWebUXPreferencesManager"],function(t){f=t,e()})})]).then(function(){m.addEvent("onRefresh",N),m.addEvent("onSearch",R),m.setMetas({helpPath:"PIMwebI3Dapp/assets/help"});var t={lastCommand:[],currentCommand:null,defaultCommand:null};P?a._commandsState[P]=t:a._commandsState=t,a.resetDefaultCommand(P),a._isCommandEnding=!1,a._ignoreCommandBeginWhileEndingCommand=!1,["_commands","_cmdCheckHeader"].forEach(function(e){var t=P?a[e][P]:a[e];Object.keys(t).forEach(function(e){var n=t[e];n&&n._destroy&&n._destroy(),delete t[e]})}),e.sourceApp&&e.sourceApp.pad3DViewer!==h&&(r&&r.dereference(),r=null,h=e.sourceApp.pad3DViewer),h.setOption("propertiesFacet",require("DS/PADUtils/PADSettingsMgt").getSetting("propertiesFacet")),h.getBIController().toggleBetweenStandaloneAndSlaveMode("DUAL"),V(h),I(),h.setDefaultContextualBarVisibility(!0),h.setDefaultContextualMenuVisibility(!0),h.setOpenWithMenuAvailability(!0),f.getPreferenceManager({context:h.getFrameWindow()}).removeAllPreferences();var n=new Promise(function(e){var t=h.subscribe({event:"onActionBarReady"},function(){h.unsubscribe(t),a.setDefaultCommand({ID:"PIMwebDefaultHdr",className:"DS/PIMwebViewController/PIMwebDefaultCmd",context:P}),e()});h.loadActionBar({merge:!1,file:b.file,module:b.module})});require("DS/ENOXInterWdgCom/LinkManager").updateLinkability({appIds:[],open:!0,uses:["ENXContent","ENXContentSync2D","ENXAuthoring2D","ENXAuthoring3D","ENXLandingPageSync"],implements:["ENXContent","ENXContentSync3D","ENXLandingPageSync"]}),require("DS/PADUtils/PADSettingsMgt").setSetting("activateWidgetLink",!0);var i=new Promise(function(e){r?e():require(["DS/PIMwebViewController/PIMwebItfCtrl"],function(t){(r=t.giveItfCtrl({pad3DViewer:h}))||(m.deleteValue("ItfSimuInSession"),r=t.getItfCtrl({pad3DViewer:h})),e()})}).then(function(){r.activate({readOnly:!1}),O().then(function(){u.setViewer(h),u.appReady(r)}),e.sourceApp&&e.sourceApp.issues&&e.sourceApp.issues.length>0&&r.appInitFromTransition({issues:e.sourceApp.issues,onNoActionDone:function(){}})});Promise.all([n,i]).then(function(){e.done({appMainDiv:w,pad3DViewer:h})})})},dispose:function(e){if(m.removeEvent("onRefresh",N),m.removeEvent("onSearch",R),m.removeEvent("endEdit",M),C(),u&&u.dispose(),u=null,h&&h.setOpenWithMenuAvailability(!1),r&&r.deactivate(),e){var t=m.getValue("ItfSimuInSession");(t=t?JSON.parse(t):null)&&!Array.isArray(t)&&"object"==typeof t&&1===Object.keys(t).length&&(e.preferredType="SIMItfSimulation")}var n=f.givePreferenceManager({context:h.getFrameWindow()});n&&n.removeAllPreferences(),f.unreferencePreferenceManager({context:h.getFrameWindow()})},onWillLeave:function(){}});return"I3D"===n.data?i=X:o=X,X}})}),define("DS/PIMwebI3Dapp/PIMwebI3DappInitAdapt",["DS/WAfrContainer/App"],function(e){"use strict";var t,n={I3D:null,I3S:null};return e.extend({setUp:function(e,i){var o=this;if(e.sourceApp){if(!e.sourceApp.pad3DViewer)return window.console.log("pad3DViewer property must be valuated"),void e.done();this.pad3DViewer=e.sourceApp.pad3DViewer,this.appMainDiv=e.sourceApp.appMainDiv,new Promise(function(t){n[i]?t(n[i]):require(["DS/PIMwebI3Dapp/PIMwebAppMain"],function(o){n[i]=o.getApp({widget:window.widget,pad3DViewer:e.sourceApp.pad3DViewer,appMainDiv:e.sourceApp.appMainDiv,data:i}),t(n[i])})}).then(function(n){e.sourceApp&&!e.sourceApp.isDisposeCalled()&&e.sourceApp.dispose(e);var i=e.done;e.done=function(n){var a;o.appMainDiv||(o.appMainDiv=n.appMainDiv),e.done=i,"ENX3DIR_AP"===e.sourceApp.options.id&&((a=o).switchApp&&require(["DS/CATWebUXComponents/CATWebUXInfoFlag","DS/CATWebUXSlideShow/CATWebUXSlideShowController","i18n!DS/PIMwebI3Dapp/assets/nls/PIMwebI3Dapp","DS/Utilities/TouchUtils"],function(e,n,i,o){var r=new e({frameWindow:a.pad3DViewer.getFrameWindow(),viewer:a.pad3DViewer.getViewer(),dockingSide:"left"});r.display({label:i.backToIssue,style:"webUXStyle",fontIcon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to-start",onClickCB:function(){t(),t=null,a.switchApp("ENX3DIR_AP")},compactDisplay:function(e){var t=document.querySelector(".pimWebOpacitySlider");if(t&&!t.isHidden())return e.flagOffset+e.flagWidth>.5*(e.freeZoneWidth-(o.getTouchMode()?470:398))}});var s,l=n.getSlideShowController({context:a.pad3DViewer.getFrameWindow(),id:"PIMwebSlideShow",params:{activateRotation:!0}});l&&(s=l.subscribe("onActiveStateModified",function(e){r.setVisibleFlag(!e.state)})),t=function(){r.clean();var e=n.giveSlideShowController({context:a.pad3DViewer.getFrameWindow(),id:"PIMwebSlideShow"});e&&e.unsubscribe(s)}})),e.done()},n.setUp(e)})}else require(["DS/PIMwebI3Dapp/PIMwebAppMain"],function(t){n[i]=t.getApp({widget:window.widget,viewerAttachment:e.done,data:i,done:function(e){o.pad3DViewer=e.pad3DViewer,o.appMainDiv=e.appMainDiv}})})},dispose:function(e,i){t&&t(),t=null,n[i].dispose(e),this._parent(e)},onWillEnter:function(e){return require(["DS/PIMwebViewModel/PIMwebUtils"],function(t){t._sendUsageProbe("appTransitionFrom",e.options.id,"resolved")}),this._parent(e)},onWillLeave:function(e,t){return n[t]&&n[t].onWillLeave&&n[t].onWillLeave(e),require(["DS/PIMwebViewModel/PIMwebUtils"],function(t){t._sendUsageProbe("appTransitionTo",e.options.id,"resolved")}),this._parent(e)}})}),define("DS/PIMwebI3Dapp/PIMwebI3DappInit",["DS/PIMwebI3Dapp/PIMwebI3DappInitAdapt"],function(e){"use strict";return e.extend({setUp:function(e){this._parent(e,"I3D")},dispose:function(e){this._parent(e,"I3D")},onWillEnter:function(e){return this._parent(e,"I3D")},onWillLeave:function(e){return this._parent(e,"I3D")}})});