define("DS/ENOCollabToolsUI/tracker/ENOCollabTracker",["UWA/Class","DS/Usage/TrackerAPI"],function(e,t){"use strict";return e.singleton({init:function(){this.success="success",this.failure="failure",this.partial_success="partial_success",this.timeout="timeout",this.unknown="unknown",this.running_on_backend="running_on_backend",this.multiType="multiType",this.ENOLCMI_AP="ENOLCMI_AP",this.UXAction="UXAction",this.init="init",this.validation="validation",this.unknownApp="unknownApp",this.unknownPlatform="unknownPlatform"},checkAndTrackPageEvent:function(e){this._checkEvent(e)&&this._trackPageEvent(e)},createInitActionEvent:function(e,t){var n=t?t.persDim.pd2:this._create_UUID(),r=t?t.persDim.pd3:this._getCurrentAppId(),i=t?t.tenant:this._getPlatformId(),p=null,s=null;"number"==typeof e.numberObjects?p=e.numberObjects:e.models&&(p=e.models.length,s=this._getTypeFromModels(e.models));var a={eventCategory:this.UXAction,eventLabel:e.UXName||(t?t.eventLabel:null),eventAction:this.init,eventValue:p,appID:this.ENOLCMI_AP,tenant:i,persDim:{pd1:e.actionStatus||this.success,pd2:n,pd3:r},persVal:{pv2:t?t.persVal.pv2+1:1}};e.typeObjects&&(a.persDim.pd4=e.typeObjects),s&&(a.persDim.pd4=s),e.UXMode&&(a.persDim.pd5=e.UXMode),e.serviceName&&(a.persDim.pd8=e.serviceName),e.serviceAnswer&&(a.persDim.pd9=e.serviceAnswer),e.actionTime&&(a.persVal.pv1=e.actionTime),e.serviceTime&&(a.persVal.pv8=e.serviceTime);for(let t=16;t<=20;t++){let n="pd"+t;"string"==typeof e[n]&&(a.persDim[n]=e[n]);let r="pv"+t;"number"==typeof e[r]&&(a.persVal[r]=e[r])}return a},createValidationEventFromEvent:function(e,t){var n=null,r=null;"number"==typeof e.numberObjects?n=e.numberObjects:e.models&&(n=e.models.length,r=this._getTypeFromModels(e.models));var i={eventCategory:this.UXAction,eventLabel:t.eventLabel,eventAction:this.validation,eventValue:n,appID:this.ENOLCMI_AP,tenant:t.tenant,persDim:{pd1:e.actionStatus||this.success,pd2:t.persDim.pd2,pd3:t.persDim.pd3},persVal:{pv2:t.persVal.pv2+1}};t.persDim.pd5&&(i.persDim.pd5=t.persDim.pd5),e.typeObjects&&(i.persDim.pd4=e.typeObjects),r&&(i.persDim.pd4=r),e.UXMode?i.persDim.pd5=e.UXMode:e.hasOwnProperty("UXMode")&&delete i.persDim.pd5,e.serviceName&&(i.persDim.pd8=e.serviceName),e.serviceAnswer&&(i.persDim.pd9=e.serviceAnswer),e.actionTime&&(i.persVal.pv1=e.actionTime),e.serviceTime&&(i.persVal.pv8=e.serviceTime);for(let t=16;t<=20;t++){let n="pd"+t;"string"==typeof e[n]&&(i.persDim[n]=e[n]);let r="pv"+t;"number"==typeof e[r]&&(i.persVal[r]=e[r])}return i},_trackPageEvent:function(e){t.trackPageEvent(e)},_create_UUID:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},_getCurrentAppId:function(){if("undefined"!=typeof widget&&null!==widget){if(widget.getValue("parent_x3dAppId"))return widget.getValue("parent_x3dAppId");if(widget.getValue("x3dAppId"))return widget.getValue("x3dAppId");if(widget.getValue("appId"))return widget.getValue("appId")}return this.unknownApp},_getPlatformId:function(){return"undefined"!=typeof widget&&null!==widget&&widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):this.unknownPlatform},_getTypeFromModels:function(e){var t=null,n=this;return e.forEach(function(e){e.type&&null==t?t=e.type:e.type&&e.type!=t&&(t=n.multiType)}),t},_checkEvent:function(e){return!!(e.hasOwnProperty("appID")&&e.appID===this.ENOLCMI_AP&&e.hasOwnProperty("eventCategory")&&e.eventCategory===this.UXAction&&e.hasOwnProperty("eventLabel")&&null!=e.eventLabel&&e.hasOwnProperty("eventAction")&&(e.eventAction===this.init||e.eventAction===this.validation)&&e.hasOwnProperty("eventValue")&&"number"==typeof e.eventValue&&e.hasOwnProperty("tenant")&&null!=e.tenant&&e.hasOwnProperty("persDim")&&null!=e.persDim&&e.hasOwnProperty("persVal")&&null!=e.persVal&&e.persDim.hasOwnProperty("pd1")&&null!=e.persDim.pd1&&e.persDim.hasOwnProperty("pd2")&&null!=e.persDim.pd2&&e.persDim.hasOwnProperty("pd3")&&null!=e.persDim.pd3&&e.persVal.hasOwnProperty("pv2")&&"number"==typeof e.persVal.pv2)||(console.log("ENOCollabTracker _checkEvent  - FAILURE - incorrect event"),!1)}})}),define("DS/ENOCollabToolsUI/ENOCollabToolsUI",[],function(){return{}});