define("DS/DMUBaseUIServices/DMUSlidePreferences",["DS/DMUBaseExperience/DMUContextManager"],function(e){"use strict";let t=[];return Object.freeze({getSlidePreferences:e=>{if(e&&e.context)for(let n=0;n<t.length;n++)if(t[n].context===e.context)return t[n].preferences},setSlidePreferences:n=>{if(n&&n.context&&n.preferences){let r=!0;for(let e=0;e<t.length;e++)if(t[e].context===n.context){let i=Object.keys(n.preferences);for(let r=0;r<i.length;r++)t[e].preferences[i[r]]=n.preferences[i[r]];r=!1}r&&t.push({context:n.context,preferences:n.preferences});let i=e.giveEventsController({viewer:n.context&&n.context.getViewer?n.context.getViewer():null});i&&i.fireEvent("onDMUSlidePreferencesChanged")}},removeSlidePreferences:e=>{if(e&&e.context)for(let n=0;n<t.length;n++)if(t[n].context===e.context){t.splice(n,1);break}}})}),define("DS/DMUBaseUIServices/DMUObjectsServices",["require","exports","DS/PADUtils/PADContext","DS/Visualization/ThreeJS_DS","DS/DMUBaseExperience/EXPManagerSet","DS/DMUBaseReview/DMULinksManager"],function(e,t,n,r,i,o){"use strict";const a={0:{px:1,mm:.13},1:{px:2,mm:.35},2:{px:3,mm:.7},3:{px:4,mm:1},4:{px:5,mm:1.4},5:{px:6,mm:2},6:{px:7,mm:2.3},7:{px:8,mm:2.6},8:{px:16,mm:4},9:{px:32,mm:9},10:{px:64,mm:12}};class l{static getAbsolutePosition(e,t,r,a,l){let s="string"==typeof l?l:e.getAttribute("fPointedPageNumber"),g="number"==typeof l?l:e.getAttribute("sPointedElementID");if(s||g){e.setAlertFlag(!1);let t=i.getManager({name:"DMU2DSheetManager",context:n.get().getFrameWindow()});if(t){let e=t.getElementMatrix(s||g);if(e)return r.clone().applyMatrix4(e)}return e.setAlertFlag(!0),r}if(void 0!==a&&t){let n=e.getParent();if(n){let e=n.getAttribute("oLinksManager");if(e instanceof o){let n=e.getOccurrencePathElement(a);if(n)return t.clone().applyMatrix4(n.getWorldMatrix())}}}return r}static getRelativePosition(e,t){let o=e.getAttribute("fPointedPageNumber"),a=e.getAttribute("sPointedElementID");if(!o&&!a)return t;e.setAlertFlag(!1);let l=i.getManager({name:"DMU2DSheetManager",context:n.get().getFrameWindow()});if(!l||!l.isADocumentDisplayed())return t;let s=l.getElementMatrix(o||a);return s?t.clone().applyMatrix4((new r.Matrix4).getInverse(s)):(e.setAlertFlag(!0),t)}static getAbsoluteRotation(e,t){let r=e.getAttribute("fPointedPageNumber");if(!r)return t;let o=i.getManager({name:"DMU2DSheetManager",context:n.get().getFrameWindow()});if(!o||!o.isADocumentDisplayed())return t;let a=o.getPageRotation(r);return a?a+t:t}static getRelativeRotation(e,t){let r=e.getAttribute("fPointedPageNumber");if(!r)return t;let o=i.getManager({name:"DMU2DSheetManager",context:n.get().getFrameWindow()});if(!o||!o.isADocumentDisplayed())return t;let a=o.getPageRotation(r);return a?t-a:t}static getAbsolutePositionMatrix(e,t,n){if(void 0===n||!t)return;let r=e.getParent();if(r){let e=r.getAttribute("oLinksManager");if(e){let r=e.getOccurrencePathElement(n);if(r)return r.getWorldMatrix().clone().multiply(t)}}}static getPOIInformationFromPathElement(e){const t=n.get(),i=t.getController().getPOIPosition(e),o=t.getController().getPOILabel&&t.getController().getPOILabel(e);return{position:i?new r.Vector3(i.x,i.y,i.z):void 0,label:o||void 0}}static getLineThickness(e,t="px"){return e in a?a[e][t]:void 0}static convertLineThickness(e,t){let n=l.getLineThicknessIndex(e,"mm"===t?"px":"mm");return n&&n in a?a[n][t]:void 0}static getLineThicknessIndex(e,t="px"){let n=Object.keys(a).find(n=>{if(a[parseInt(n)][t]===e)return!0});return n?parseInt(n):void 0}}return l});