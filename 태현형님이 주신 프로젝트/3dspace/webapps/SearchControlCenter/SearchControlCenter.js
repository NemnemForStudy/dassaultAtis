/*!  COPYRIGHT DASSAULT SYSTEMES 2014   */
define("DS/SearchControlCenter/control/SCCColorPicker",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Element","UWA/Controls/Abstract","DS/Controls/Tab","DS/Controls/ColorPalette","DS/Controls/ColorChooser","DS/Controls/Popup","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,r,a,n,i,s,o,c,l){"use strict";return n.extend(r,{name:"scc-colorPicker",_colorPickerPopup:null,_tab:null,_defaultColorPalette:null,_recentColorPalette:null,_colorChooser:null,_currentColor:"#ffffff",divCustomColorChooser:null,_swatches_default:[{value:"#FEE000"},{value:"#009DDB"},{value:"#FF8A2E"},{value:"#9B2C98"},{value:"#00AA86"},{value:"#F564A3"},{value:"#8DDEE4"},{value:"#CC092F"},{value:"#E2D5CC"},{value:"#6FBC4B"},{value:"#70036B"},{value:"#002596"},{value:"#C6C68B"},{value:"#7F7F7F"},{value:"#4EA8B7"},{value:"#007A4C"},{value:"#ADADAD"},{value:"#127277"},{value:"#6D2815"},{value:"#000000"},{value:"#4D62BA"}],_swatches_recent:null,init:function(e){this._parent(e),this._buildUI(e)},_buildUI:function(t){e.is(t)&&e.is(t.initialValue)&&(this._currentColor=t.initialValue),this.elements.container=a.create("div",{class:"div-scc-color-picker"}),this.elements.content=a.create("div",{class:"scc-color-picker",styles:{"border-radius":"5px",border:"1px solid #000000",background:this._currentColor,width:"39px",height:"39px"},events:{click:this._buildColorPickerUI.bind(this)}}).inject(this.elements.container)},_buildColorPickerUI:function(t){var r=this;e.is(r.divCustomColorChooser)&&e.is(r._colorPickerPopup)||(r.divCustomColorChooser=a.create("div",{class:"container-custom-color-picker",id:"container_custom_color_picker"}),r._tab=new i({displayStyle:"strip"}).inject(r.divCustomColorChooser),r._tab.add({label:l.get("SCCColorPicker.tab.ColorPalette.title"),isSelected:!0,content:r._buildColorPalette()}),r._tab.add({label:l.get("SCCColorPicker.tab.ColorChooser.title"),content:r._buildColorChooser()}),r._colorPickerPopup=new c({target:t.target,trigger:"click",toggleFlag:!1,position:"top",alignment:"near",offset:{x:5,y:-255},touchMode:!0}),r._colorPickerPopup.show(),r._colorPickerPopup.setBody(r.divCustomColorChooser),r._colorPickerPopup.addEventListener("hide",function(e){e.stopPropagation(),r._cleanup()}))},_buildColorPalette:function(){var e=a.create("div",{class:"scc-custom-color-picker",id:"scc_custom_color_picker_palette_tab_container"}),t=a.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_default"}).inject(e);a.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_default",text:l.get("SCCColorPicker.ColorPalette.default.title")}).inject(t);if(this._defaultColorPalette=new s({swatches:this._swatches_default,domId:"color_palette_default",touchMode:!0}).inject(t),this._getRecentSwatches().length>0){var r=a.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_recent"}).inject(e);a.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_recent",text:l.get("SCCColorPicker.ColorPalette.recent.title")}).inject(r);this._recentColorPalette=new s({swatches:this._getRecentSwatches(),domId:"color_palette_recent",touchMode:!0}).inject(r),this._recentColorPalette.addEventListener("change",this._onColorChange.bind(this),!1)}return this._defaultColorPalette.addEventListener("change",this._onColorChange.bind(this),!1),e},_buildColorChooser:function(){var e=a.create("div",{class:"scc-custom-color-chooser .scc-chooser-tab-container",id:"scc_custom_color_chooser_palette_tab_container"});return this._colorChooser=new o({domId:"color_chooser",value:this._currentColor,referenceValue:this._currentColor,touchMode:!0}).inject(e),this._colorChooser.addEventListener("change",this._onColorChange.bind(this),!1),e},_onColorChange:function(t){t.stopPropagation();var r=this._getNewColor(t.dsModel.domId);if(e.is(r,"string")&&r.indexOf("#")<0&&(r="#"+r),this._currentColor!==r)this._currentColor=r,this.elements.content.setStyle("background",r),"color_chooser"===t.dsModel.domId&&this._storeRecentSwatches(r),this._cleanup(),this.dispatchEvent("onColorChange",{color:this._currentColor,target:this.elements.container});else{if(!this._colorChooser.pointerdownCanvasP&&"color_chooser"===t.dsModel.domId)return;this._cleanup()}},_getNewColor:function(e){switch(e){case"color_chooser":return this._colorChooser.pointerdownCanvasP?this._colorChooser.value:this._currentColor;case"color_palette_default":return this._defaultColorPalette.value;case"color_palette_recent":return this._recentColorPalette.value;default:return this._currentColor}},_getCurrentColor:function(){return this._currentColor},_getRecentSwatches:function(){var t=localStorage.getItem("_swatches_recent");return e.is(t)?JSON.parse(t):[]},_storeRecentSwatches:function(t){var r=JSON.parse(localStorage.getItem("_swatches_recent"));e.is(r,"array")||(r=[]);var a=r.findIndex(e=>e.value.trim()===t.trim());a>=0&&r.splice(a,1),r.length>=10&&r.shift(),r.push({value:t}),localStorage.setItem("_swatches_recent",JSON.stringify(r))},_cleanup:function(){e.is(this._defaultColorPalette)&&(this._defaultColorPalette.destroy(),this._defaultColorPalette=null),e.is(this._recentColorPalette)&&(this._recentColorPalette.destroy(),this._recentColorPalette=null),e.is(this._colorChooser)&&(this._colorChooser.destroy(),this._colorChooser=null),e.is(this._tab)&&(this._tab.destroy(),this._tab=null),e.is(this._colorPickerPopup)&&(this._colorPickerPopup.destroy(),this._colorPickerPopup=null),e.is(this.divCustomColorChooser)&&(this.divCustomColorChooser.destroy(),this.divCustomColorChooser=null)}})}),define("DS/SearchControlCenter/Model/SearchControlCenterFacetListModel",["UWA/Core","UWA/Class/Model"],function(e,t){"use strict";return t.extend({defaults:function(){return{id:"",title:"",subtitle:"",tooltip:"",domainid:"",facetJS:"",image:""}}})}),define("DS/SNResultUX/views/EnterpriseDictionaryTab",["UWA/Element","UWA/Core","DS/Controls/ComboBox","DS/UIKIT/Input/Button","DS/UIKIT/Input/File","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNInfraUX/Logger","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,r,a,n,i,s,o,c,l){var d={comboBox:null,importButton:null,fileChooser:null,rendurStatus:!1,xlsxReader:null,listOfTenants:[],onRenderFacet:function(u){var h=e.create("div",{styles:{"margin-top":"20px","margin-bottom":"20px",display:"flex"},class:"enterprise-dictionary-tab",id:"enterprise-dictionary-tab-tenant"}).inject(u),_=e.create("div",{class:"enterprise-dictionary-tab",id:"enterprise-dictionary-tab-tenant-text",styles:{"align-self":"center",position:"relative"}}).inject(h),p=e.create("div",{class:"enterprise-dictionary-tab",id:"enterprise-dictionary-tab-tenant-combo",styles:{width:"50%",position:"relative","align-self":"center","margin-left":"10px",display:"inline-grid"}}).inject(h);e.create("p",{styles:{margin:"unset"},text:l.get("dictionary-for-platform.title")}).inject(_),o.getServiceUrl({serviceName:"search",onComplete:function(e){if(t.is(e,"array")){for(var a=0;a<e.length;a++)t.is(e[a].platformId,"string")&&d.listOfTenants.push(e[a].platformId);d.comboBox=new r({elementsList:d.listOfTenants,nbDisplayedElements:d.listOfTenants.length,styles:{align:"left"},selectedIndex:0,touchMode:!0,enableSearchFlag:!0}).inject(p)}},onFailure:function(e){c.log(e)}}),void 0===window.notifs&&(window.notifs=i),s.setNotificationManager(window.notifs);var g=e.create("div",{class:"enterprise-dictionary-tab",id:"enterprise-dictionary-tab-file",styles:{"margin-bottom":"20px",display:"flex"}}).inject(u),f=e.create("div",{class:"enterprise-dictionary-tab",id:"enterprise-dictionary-tab-file-chooser",styles:{width:"50%",position:"relative"}}).inject(g),C=e.create("div",{class:"enterprise-dictionary-tab",id:"enterprise-dictionary-tab-file-import",styles:{width:"50%",position:"relative","margin-left":"5px"}}).inject(g);d.fileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:"Upload the enterprise dictionary...",buttonText:"Browse..",events:{onChange:this._onFileInputChange.bind(this)}}).inject(f);var m=this;d.importButton=new a({id:"import_button_id",value:l.get("importButton.title"),disabled:!0,className:"default",events:{onClick:function(){m._OnImportClick(),c.log("inside _OnImportClick() ")}}}).inject(C),d.rendurStatus=!0},_onFileInputChange:function(e){var r=e.target.files[0].name;if(t.is(r,"string")){var a=r.slice(2+(r.lastIndexOf(".")-1>>>0));if("xls"===a||"xlsx"===a)"undefined"!=typeof FileReader&&(d.xlsxReader=new FileReader,d.xlsxReader.readAsArrayBuffer(e.target.files[0]),d.importButton.enable());else{d.importButton.disable(),d.fileChooser.clear();var n={level:"error",message:l.get("wrongFileTypeSelectionWarning"),sticky:!1};window.notifs.addNotif(n)}}},_OnImportClick:function(){if(t.is(d.fileChooser)){var e=XLSX.read(d.xlsxReader.result,{type:"binary"});e.SheetNames.forEach(function(r){var a=XLSX.utils.sheet_to_json(e.Sheets[r]),n=(new DOMParser).parseFromString("<SuggestDictionary/>","text/xml"),i=n.documentElement;if(t.is(a,"array"))for(var s=0;s<a.length;s++)if(t.is(a[s])){var o=n.createElement("SuggestDictEntry");if(o.setAttribute("display",a[s].display),o.setAttribute("score",a[s].score),o.setAttribute("entry",a[s].entry),i.appendChild(o),0===s){var c=n.getElementsByTagName("SuggestDictionary");t.is(c[s])&&(c[s].setAttribute("subString",a[s].subString),c[s].setAttribute("subExpr",a[s].subExpr),c[s].setAttribute("maxEntries",a[s].maxEntries))}}new XMLSerializer})}},getTabInputsToStore:function(){},onResetTab:function(){},isCurrentTabRendered:function(){return d.rendurStatus}};return d}),define("DS/SearchControlCenter/scripts/SearchcontrolCenterModel",["UWA/Element","UWA/Core","UWA/Class","UWA/Class/Debug"],function(e,t,r,a){"use strict";var n=r.singleton(a,{_searchControlCenterSettingsJSON:{},_datasource_InternalName_Mapping:{},_types_InternalName_Mapping:{},_attributes_InternalName_Mapping:{},_local_AttributeDisplay_Cache_For_Types:[],_local_AttributeDisplay_Cache_For_6WTags:[],gate_Local_Attribute_Cache:function(){return this._local_AttributeDisplay_Cache_For_Types},gate_Local_6WTags_Cache:function(){return this._local_AttributeDisplay_Cache_For_6WTags},clear_Local_Attribute_Cache:function(){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[])},clear_Local_6WTags_Cache:function(){this._local_AttributeDisplay_Cache_For_6WTags.length>0&&(this._local_AttributeDisplay_Cache_For_6WTags=[])},initiate_Local_Attribute_Cache:function(e){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[]),e.length>0&&(this._local_AttributeDisplay_Cache_For_Types=e)},initiate_Local_6WTags_Cache:function(e){this._local_AttributeDisplay_Cache_For_6WTags.length>0&&(this._local_AttributeDisplay_Cache_For_6WTags=[]),e.length>0&&(this._local_AttributeDisplay_Cache_For_6WTags=e)},addTo_Local_Attribute_Cache:function(e){var r=this._local_AttributeDisplay_Cache_For_Types,a=e.datasource,n=e.type,i=!1,s=0,o=null,c=null;if(r.length>0){var l=e.attributes;if(t.is(r,"array")&&t.is(n,"string")&&t.is(a,"string"))for(var d=0;d<r.length;d++){var u=r[d];if(t.is(u)&&n===u.uri&&a===u.source){o=[];for(var h=0;h<l.length;h++)(c={}).uri=l[h],t.is(c.uri)&&o.push(c);if("SearchAttributes_preferredAttr"===e.parentDIVID)if(u.hasOwnProperty("predicates")){let e=u.predicates;if(e.length>0){let t=!1;for(s=0;s<e.length;s++)e[s].uri===o[0].uri&&(t=!0);!1===t&&e.push(o[0])}else u.predicates=o}else u.predicates=o;else if("SearchAttributes_moreAttr"===e.parentDIVID)if(u.hasOwnProperty("excluded_predicates")){let e=u.excluded_predicates;if(e.length>0){let t=!1;for(s=0;s<e.length;s++)e[s].uri===o[0].uri&&(t=!0);!1===t&&e.push(o[0])}else u.excluded_predicates=o}else u.excluded_predicates=o;i=!0}}}if(!1===i){var _=[],p={};for(p.source=a,p.uri=n,o=[],s=0;s<e.attributes.length;s++)(c={}).uri=e.attributes[s],t.is(c.uri)&&o.push(c);"SearchAttributes_preferredAttr"===e.parentDIVID?p.predicates=o:"SearchAttributes_moreAttr"===e.parentDIVID&&(p.excluded_predicates=o),r.length>0?r.push(p):(_.push(p),this._local_AttributeDisplay_Cache_For_Types=_)}},addTo_Local_Attribute_Cache_ForAllTypes:function(e){var r=this._local_AttributeDisplay_Cache_For_6WTags,a=e.datasource,n=!1,i=0,s=null,o=null;if(r.length>0){var c=e.attributes;if(t.is(r,"array")&&t.is(a,"string"))for(var l=0;l<r.length;l++){var d=r[l];if(t.is(d)&&a===d.source){s=[];for(var u=0;u<c.length;u++)(o={}).uri=c[u],t.is(o.uri)&&s.push(o);if("SCC6WTagsFilter_preferredAttr"===e.parentDIVID)if(d.hasOwnProperty("predicates")){let e=d.predicates;if(e.length>0){let t=!1;for(i=0;i<e.length;i++)e[i].uri===s[0].uri&&(t=!0);!1===t&&e.push(s[0])}else d.predicates=s}else d.predicates=s;else if("SCC6WTagsFilter_ExcludedAttr"===e.parentDIVID)if(d.hasOwnProperty("excluded_predicates")){let e=d.excluded_predicates;if(e.length>0){let t=!1;for(i=0;i<e.length;i++)e[i].uri===s[0].uri&&(t=!0);!1===t&&e.push(s[0])}else d.excluded_predicates=s}else d.excluded_predicates=s;n=!0}}}if(!1===n){var h=[],_={};for(_.source=a,s=[],i=0;i<e.attributes.length;i++)(o={}).uri=e.attributes[i],t.is(o.uri)&&s.push(o);"SCC6WTagsFilter_preferredAttr"===e.parentDIVID?_.predicates=s:"SCC6WTagsFilter_ExcludedAttr"===e.parentDIVID&&(_.excluded_predicates=s),r.length>0?r.push(_):(h.push(_),this._local_AttributeDisplay_Cache_For_6WTags=h)}},update_Local_Attribute_Cache:function(e){var r=this._local_AttributeDisplay_Cache_For_Types,a=e.datasource,n=e.type;if(r.length>0){var i=e.attributes;if(t.is(r,"array")&&t.is(n,"string")&&t.is(a,"string"))for(var s=0;s<r.length;s++){var o=r[s];if(t.is(o)&&n===o.uri&&a===o.source){for(var c=[],l=0;l<i.length;l++){var d={};d.uri=i[l],t.is(d.uri)&&c.push(d)}"SearchAttributes_preferredAttr"===e.parentDIVID?o.predicates=c:"SearchAttributes_moreAttr"===e.parentDIVID&&(o.excluded_predicates=c)}}}},update_Local_Attribute_Cache_ForAllTypes:function(e){var r=this._local_AttributeDisplay_Cache_For_6WTags,a=e.datasource;if(r.length>0){var n=e.attributes;if(t.is(r,"array")&&t.is(a,"string"))for(var i=0;i<r.length;i++){var s=r[i];if(t.is(s)&&a===s.source){for(var o=[],c=0;c<n.length;c++){var l={};l.uri=n[c],t.is(l.uri)&&o.push(l)}"SCC6WTagsFilter_preferredAttr"===e.parentDIVID?s.predicates=o:"SCC6WTagsFilter_ExcludedAttr"===e.parentDIVID&&(s.excluded_predicates=o)}}}},setSettingsJSON:function(e){t.is(e)&&(this._searchControlCenterSettingsJSON=e)},gateSettingsJSON:function(){return this._searchControlCenterSettingsJSON},gateTabSettingJSON:function(e){var r,a={};if(t.is(e,"string")&&(r=t.is(n._searchControlCenterSettingsJSON,"string")?JSON.parse(n._searchControlCenterSettingsJSON):n._searchControlCenterSettingsJSON,t.is(r)))for(var i=Object.keys(r),s=null,o=0;o<i.length;o++){var c=i[o];if(t.is(c)&&r.hasOwnProperty(c))if("search_settings"===c&&"SearchControl_General"===e){if(s=r.search_settings,t.is(s)){a=s,r.result_categories&&(a.result_categories=r.result_categories),r.search_synonyms&&(a.search_synonyms=r.search_synonyms);break}}else if("type_custo"===c&&"SearchControl_SearchTypes"===e)s=r.type_custo,t.is(s)&&(a.type_custo=s);else if("tagRelationships"===c&&"SearchControl_6WTags"===e)a.tagRelationships=r.tagRelationships;else if("tagColorization"===c&&"SearchControl_6WTags"===e)a.tagColorization=r.tagColorization;else if("hierarchical_predicates"===c&&"SearchControl_6WTags"===e)a.hierarchical_predicates=r.hierarchical_predicates;else if("controlledVocabulary"===c&&"SearchControl_6WTags"===e)a.controlledVocabulary=r.controlledVocabulary;else if("enterprise_ontology"===c&&"SearchControl_6WTags"===e)a.enterprise_ontology=r.enterprise_ontology;else if("current_enterprise_ontology_title"===c&&"SearchControl_6WTags"===e)a.current_enterprise_ontology_title=r.current_enterprise_ontology_title;else if("enterprise_ontology_history"===c&&"SearchControl_6WTags"===e)a.enterprise_ontology_history=r.enterprise_ontology_history;else if("attribute_custo"===c&&"SearchControl_6WTags"===e){if(s=r.attribute_custo,t.is(s)){if(s.hasOwnProperty("ds6w:type")){var l=s["ds6w:type"];if(t.is(l,"array"))for(var d=0;d<l.length;d++)if(UWA.is("AllDataSourcesandTypes"===l[d].source)){a=l[d];break}}s.hasOwnProperty("attributes_display")&&(a.attributes_display=s.attributes_display),s.hasOwnProperty("context_apps_predicates")&&(a.context_apps_predicates=s.context_apps_predicates)}}else"attribute_custo"===c&&"SearchControl_SearchTypes"===e&&(s=r.attribute_custo,t.is(s)&&(a.attribute_custo=s))}return a},updateSettingsJSON:function(e){var r,a,i,s=!1;if(r=t.is(e,"string")?JSON.parse(e):e,t.is(n._searchControlCenterSettingsJSON)?(a=t.is(n._searchControlCenterSettingsJSON,"string")?JSON.parse(n._searchControlCenterSettingsJSON):n._searchControlCenterSettingsJSON,t.is(a)&&(i=Object.keys(a))):s=!0,t.is(r))for(var o=Object.keys(r),c=0;c<o.length;c++){var l=o[c];if(t.is(l)&&r.hasOwnProperty(l))if("SearchControl_General"===l){var d=r.SearchControl_General,u=null,h=null;d&&d.result_categories&&(u=d.result_categories,delete d.result_categories),d&&d.search_synonyms&&(h=d.search_synonyms,delete d.search_synonyms),!0===s||0===i.length?(n._searchControlCenterSettingsJSON.search_settings=d,u&&(n._searchControlCenterSettingsJSON.result_categories=u),h&&(n._searchControlCenterSettingsJSON.search_synonyms=h)):(a.search_settings=d,u&&(a.result_categories=u),h&&(a.search_synonyms=h))}else if("SearchControl_SearchTypes"===l){var _=r.SearchControl_SearchTypes;if(!0===s||0===i.length)n._searchControlCenterSettingsJSON.type_custo=_;else if(i.length>0){let e=!1;for(let r=0;r<i.length;r++){let n=i[r];if(t.is(n)&&a.hasOwnProperty(n)&&"type_custo"===n){var p=a[n];p.type_display=_.type_display,p.SEARCH_INSTANCES=_.SEARCH_INSTANCES,p.easyTypeAccess=_.easyTypeAccess,p.excluded_types=_.excluded_types,p.default_datasourceandtype=_.default_datasourceandtype,e=!0}}!1===e&&(a.type_custo=_)}}else if("SearchControl_SearchAttributes"===l||"SearchControl_6WTags"===l){var g=!1,f=r.SearchControl_SearchAttributes;if(t.is(f)||(f=r.SearchControl_6WTags,g=!0),f.tagRelationships&&(n._searchControlCenterSettingsJSON.tagRelationships=f.tagRelationships),f.tagColorization&&(n._searchControlCenterSettingsJSON.tagColorization=f.tagColorization),f.hierarchical_predicates&&(n._searchControlCenterSettingsJSON.hierarchical_predicates=f.hierarchical_predicates),f.enterprise_ontology&&(n._searchControlCenterSettingsJSON.enterprise_ontology=f.enterprise_ontology),f.current_enterprise_ontology_title&&(n._searchControlCenterSettingsJSON.current_enterprise_ontology_title=f.current_enterprise_ontology_title),f.enterprise_ontology_history&&(n._searchControlCenterSettingsJSON.enterprise_ontology_history=f.enterprise_ontology_history),!0!==s&&0!==i.length||(n._searchControlCenterSettingsJSON.attribute_custo=f),f.controlledVocabulary)n._searchControlCenterSettingsJSON.controlledVocabulary=f.controlledVocabulary;else if(i.length>0){let e=!1;for(let r=0;r<i.length;r++){let n=i[r];if(t.is(n)&&a.hasOwnProperty(n)&&"attribute_custo"===n){var C=a[n];g&&(C.attributes_display=f.attributes_display);var m=C["ds6w:type"],v=f["ds6w:type"];if(t.is(v)&&v.length>0&&!g)C["ds6w:type"]=v;else{var y,b=!1;if(t.is(v,"array")&&v.length>0)for(var S=0;S<v.length;S++)if(v[S].hasOwnProperty("source")&&"AllDataSourcesandTypes"===v[S].source){y=v[S];break}if(t.is(m,"array")&&m.length>0&&t.is(y)){for(var D=0;D<m.length;D++){var A=m[D];t.is(A)&&A.source===y.source&&(m[D]=y,b=!0)}!1===b&&m.push(v[0])}else t.is(v)&&(C["ds6w:type"]=v)}if(f.hasOwnProperty("context_apps_predicates"))if(C.hasOwnProperty("context_apps_predicates")){var x=C.context_apps_predicates,T=f.context_apps_predicates,w=(b=!1,Object.keys(T[0]));if(w.length>0){for(var I=0;I<x.length;I++)if(x[I].hasOwnProperty(w[0])){x[I]=T[0],b=!0;break}!1===b&&x.push(T[0])}}else C.context_apps_predicates=f.context_apps_predicates;e=!0}}!1===e&&(a.attribute_custo=f)}}else"SearchControl_ColumnCusto"===l&&(a.column_custo=r.SearchControl_ColumnCusto)}},setDatasourceInternalMapping:function(e){t.is(e)&&(this._datasource_InternalName_Mapping=e)},getDatasourceInternalMappingValue:function(e){var r=this._datasource_InternalName_Mapping;if(t.is(r)&&t.is(e,"string"))for(var a=Object.keys(r),n=0;n<a.length;n++)if(r[a[n]]===e)return a[n]},getDatasourceDisplayMappingValue:function(e){var r=this._datasource_InternalName_Mapping;if(t.is(r)&&t.is(e,"string"))for(var a=Object.keys(r),n=0;n<a.length;n++)if(a[n]===e)return r[a[n]]},setAttributesInternalMappingForAllDataSourcesAndTypes:function(e,r){t.is(r)&&(this._types_InternalName_Mapping[e]=r)},getAttributesInternalMappingValueForAllDataSourcesAndTypes:function(e,r){if(t.is(r,"string")&&t.is(e,"string")){var a=this._types_InternalName_Mapping[e];if(t.is(a))for(var n=Object.keys(a),i=0;i<n.length;i++)if(a[n[i]]===r)return n[i]}},getAttributesDisplayMappingValueForAllDataSourcesAndTypes:function(e,r){if(t.is(r,"string")&&t.is(e,"string"))for(var a=Object.keys(this._types_InternalName_Mapping),n=0;n<a.length;n++){if(e===a[n])return this._types_InternalName_Mapping[e][r]}},setTypeInternalMapping:function(e,r){t.is(r)&&(this._types_InternalName_Mapping[e]=r)},getTypeInternalMappingValue:function(e,r){if(t.is(r,"string")&&t.is(e,"string")){var a=this._types_InternalName_Mapping[e];if(t.is(a))for(var n=Object.keys(a),i=0;i<n.length;i++)if(a[n[i]]===r)return n[i]}},getTypeDisplayMappingValue:function(e,r){if(t.is(r,"string")&&t.is(e,"string"))for(var a=Object.keys(this._types_InternalName_Mapping),n=0;n<a.length;n++){if(e===a[n])return this._types_InternalName_Mapping[e][r]}},getAppWisePredicates:function(e){var r,a={};if(t.is(e,"string")&&(r=t.is(n._searchControlCenterSettingsJSON,"string")?JSON.parse(n._searchControlCenterSettingsJSON):n._searchControlCenterSettingsJSON,t.is(r)&&r.hasOwnProperty("attribute_custo"))){var i=!1,s=r.attribute_custo;if(t.is(s)&&s.hasOwnProperty("context_apps_predicates")&&!0===s.attributes_display){var o=s.context_apps_predicates;if(t.is(o,"array"))for(var c=0;c<o.length;c++){var l=o[c];e===Object.keys(l)[0]&&(a=l[e],i=!0)}}if("X3DSEAR_AP"===e&&!1===i&&s.hasOwnProperty("ds6w:type")){var d=s["ds6w:type"];if(t.is(d,"array"))for(var u=0;u<d.length;u++)if(UWA.is("AllDataSourcesandTypes"===d[u].source)){t.is(d[u].predicates)&&(a.preferred_predicates=d[u].predicates),t.is(d[u].excluded_predicates)&&(a.excluded_predicates=d[u].excluded_predicates);break}}}return a},setAttributeInternalMapping:function(e,r,a){if(t.is(a)&&t.is(r,"string")&&t.is(e,"string")){var n={};n[r]=a;var i=Object.keys(this._attributes_InternalName_Mapping);if(i.length<=0)this._attributes_InternalName_Mapping[e]=n;else{for(var s=!1,o=0;o<i.length;o++)if(this._attributes_InternalName_Mapping[i[o]]===e){var c=this._attributes_InternalName_Mapping[i[o]];if(t.is(c)){c[r]=a,s=!0;break}}if(!1===s){var l=this._attributes_InternalName_Mapping[e];t.is(l)&&(l[r]=a)}}}},getAttributeInternalMapping:function(e,r,a){if(t.is(e,"string")&&t.is(r,"string")&&t.is(a,"string")){var n=this._attributes_InternalName_Mapping[e];if(t.is(n))for(var i=Object.keys(n),s=0;s<i.length;s++)if(i[s]===r)for(var o=n[i[s]],c=Object.keys(o),l=0;l<c.length;l++)if(o[c[l]]===a)return c[l]}}});return n}),define("DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept",["UWA/Core","UWA/Class/Debug","UWA/Class/Model","UWA/Class/Collection"],function(e,t,r,a){"use strict";var n=r.extend(t,{setup:function(e){this.set("narrower",new a([],{model:n})),this.set("broader",new a([],{model:n}));let t=e.id.split(":");t.length>0&&this.set("ontology",t[0]+":")},getLabel:function(){return this.get("label")},getURI:function(){return this.get("uri")},getShortURI:function(){return this.id},getOntology:function(){return this.get("ontology")},setAsRootWConcept:function(){this.set("isRootWConcept",!0)},setAsRootConcept:function(){this.set("isRootConcept",!0)},IsARootConcept:function(){return this.get("isRootConcept")},getURIPath:function(){let e=[],t=this;for(;t;)e.push(t.getURI()),t=t.getBroaderConcept();return e.reverse()},getRootConcept:function(){let e,t;for(;Array.isArray(e=this.getBroaderConcept())&&e.length>0;)t=e,e[0].getRootConcept();if(t)return t[0].getURI()},getRootW:function(){return this.get("rootW")},getBroaderConcept:function(){return this.get("broader")},_addBroaderConcept:function(e){this.get("broader").add(e)},addNarrowerConcept:function(e){this.get("narrower").add(e),e._addBroaderConcept(this)},getNarrowerConcept:function(){return this.get("narrower").toArray()},setAsTaggable:function(){this.set("taggable",!0)},setAsDeprecated:function(){this.set("deprecated",!0)},canBeTagged:function(){return this.get("taggable")},isDeprecated:function(){return this.get("deprecated")}});return n}),define("DS/SearchControlCenter/control/SCCCard",["UWA/Core","UWA/Element","UWA/Controls/Abstract","DS/Controls/TooltipModel"],function(e,t,r,a){"use strict";return r.extend({name:"scc-card",_title:null,_body:null,_value:null,init:function(e){this._parent(e),this._buildUI(e)},_buildUI:function(r){this._title=r.header.label,this._value=e.is(r.header.value)?r.header.value:r.header.label,this.elements.container=t.create("div",{class:"scc-card-container"}),this.elements.header=t.create("div",{class:"scc-card-header scc-card-flex"}).inject(this.elements.container),e.is(r.className)&&this.elements.header.addClassName(r.className);var n=t.create("p",{class:"scc-card-header-text",text:this._truncateString(r.header.label,25)}).inject(this.elements.header);e.is(r.className)&&n.addClassName(r.className),n.tooltipInfos=new a({shortHelp:r.header.label,position:"top",touchMode:!0}),!0===r.closable&&t.create("div",{class:"fonticon fonticon-clear fonticon-x search_center_delete_button_margin scc-card-close-button",styles:{color:"#b4b6ba"},events:{click:this._onClick.bind(this),mouseover:this._onMouseOver.bind(this),mouseout:this._onMouseOut.bind(this)}}).inject(this.elements.header),!0===r.isBodyRequired&&(this.elements.header.setStyle("border-bottom","1px solid #b2adad"),this.elements.body=t.create("div",{class:"scc-card-body"}).inject(this.elements.container))},_onClick:function(t){let r=e.clone(this.options);r.target=this.elements.container,this.dispatchEvent("onClose",r)},_onMouseOver:function(e){e.currentTarget.setStyle("color","#3d3d3d")},_onMouseOut:function(e){e.currentTarget.setStyle("color","#b4b6ba")},getTitle:function(){return this._title},getValue:function(){return this._value},getHeaderElement:function(){return this.elements.header},getBodyElement:function(){return this.elements.body},appendChildToBody:function(e){e.inject(this.elements.body)},_truncateString:function(t,r){return!e.is(t)||t.length<=r?t:t.slice(0,r)+" ..."}})}),define("DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",["UWA/Core","UWA/Utils","UWA/Class/Collection","DS/SearchControlCenter/Model/SearchControlCenterFacetListModel","WebappsUtils/WebappsUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,r,a,n,i,s){"use strict";return r.extend({model:a,setup:function(){e.log("SearchControlCenterFacetListCollection::setup"),this.url=n.getWebappsAssetUrl("SearchControlCenter","SearchControlCenter_Entries.json")},sync:function(t,r,a){e.log("SearchControlCenterFacetListCollection::sync"),a.proxy="passport",a.headers={"Accept-Language":widget.lang},this._parent.apply(this,[t,r,a])},parse:function(t){e.log("SearchControlCenterFacetListCollection::parse");var r=!1,a=null;e.is(window)&&e.is(window.location)&&e.is(window.location.search,"string")&&(a=window.location.search.substring(1)),e.is(a,"string")&&a.length>0&&(a.indexOf("AdminColumnsSearch")>=0||a.indexOf("SearchDisplayName")>=0)&&(r=!0);var n,o,c=[];return Array.isArray(t.facets)&&t.facets.forEach(function(e){n=s[e.facetID],o=s[e.facetID+".subTitle"];var t=i.getURL()+"/webapps/SearchControlCenter/assets/img/"+e.iconName;(r||!r&&"SearchControl_ColumnCusto"!==e.facetID)&&c.push({title:n,subtitle:o,introduction:"",image:t,facetJS:e.srcJS,domainid:e.facetID,id:e.facetID})}),c}})}),define("DS/SearchControlCenter/scripts/SearchControlCenterServices",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Alert","DS/UIKIT/Mask","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SNVocabAccess","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/SNResultUX/utils/SearchServices","DS/SNResultUX/utils/SearchViewOptions","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","css!DS/SearchControlCenter/SearchControlCenter"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_){"use strict";var p={parentCardDiv:null,draggedCardBlock:null,platformID:null,platformDisplayName:null,_datasourceList:[],_datSourceToVocabID:{},_Service_Nls_promise:r.deferred(),_applyButton:null,_restoreButton:null,_buttonStatus:!1,_URL:null,buildCardBlockRow:function(r){if(t.is(r.cardDiv)&&t.is(r.textOnCard)){var a=r.cardDiv,n=r.datasource,s=null,o=null,c=null;t.is(r.type)&&(s=r.type),t.is(r.uri)&&(o=r.uri),t.is(r.tabName)&&(c=r.tabName);var l=e.create("div",{class:"card-block search_center_general_display_flex search_center_top_margin card_block_design_elements",draggable:!0}).inject(a);if(l.appendChild(e.create("h3",{class:"card-title search_center_font_and_color",text:r.textOnCard})),!0===r.deleteOption){var d=e.create("div",{class:"fonticon fonticon-clear fonticon-x search_center_delete_button_margin"});l.appendChild(d),d.setStyle("color","#b4b6ba"),d.addEventListener("click",u,!1),d.addEventListener("mouseover",h,!1),d.addEventListener("mouseout",_,!1)}if(t.is(o)||(o=t.is(s)?this.getAttributesInternalName(n,s,r.textOnCard):this.getTypesInternalName(n,r.textOnCard)),l.setAttribute("sccuri",o),l.setAttribute("sccdatasource",n),l.setAttribute("scctype",s),y(l),t.is(c)&&"SearchControl_6WTags"===c){let e=[];if(e.push(l.getAttribute("sccuri")),"AllDataSourcesandTypes"===n){a.id}}if(t.is(c)&&"SearchControl_SearchAttributes"===c){let e=[];if(e.push(l.getAttribute("sccuri")),"AllDataSourcesandTypes"===n){let t={datasource:n,attributes:e,operation:"add",parentDIVID:a.id};i.addTo_Local_Attribute_Cache_ForAllTypes(t)}else{let t={datasource:n,type:s,attributes:e,operation:"add",parentDIVID:a.id};i.addTo_Local_Attribute_Cache(t)}}function u(e){if(t.is(e.currentTarget.parentElement)){var r=e.currentTarget.parentElement.parentElement;if(e.currentTarget.parentElement.destroy(),p.enableButtons(),t.is(c)&&"SearchControl_SearchAttributes"===c||"SearchControl_6WTags"===c){let e=r.childElementCount,l=[];for(var o=0;o<e;o++)l.push(r.children[o].getAttribute("sccuri"));if("AllDataSourcesandTypes"===n){let e={datasource:n,attributes:l,parentDIVID:a.id};i.update_Local_Attribute_Cache_ForAllTypes(e)}else{let e={datasource:n,type:s,attributes:l,parentDIVID:a.id};i.update_Local_Attribute_Cache(e)}"SearchControl_6WTags"===c&&1===r.childElementCount&&t.is(r.childNodes[0].childNodes[1])&&(a.childNodes[0].childNodes[1].hidden=!1)}0===r.childElementCount&&r.parentElement.parentElement.parentElement.children[0].addClassName("search_center_div search_center_margin search_center_general_display_flex")}}function h(e){e.currentTarget.setStyle("color","#3d3d3d")}function _(e){e.currentTarget.setStyle("color","#b4b6ba")}function g(e){p.draggedCardBlock=this,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.outerHTML)}function f(e){e.preventDefault&&e.preventDefault(),this.classList.add("over"),e.dataTransfer.dropEffect="move"}function C(){this.classList.remove("over")}function m(){this.classList.remove("over")}function v(e){if(e.stopPropagation&&e.stopPropagation(),p.draggedCardBlock!==this){this.parentNode.removeChild(p.draggedCardBlock);var r=e.dataTransfer.getData("text/html");this.insertAdjacentHTML("beforebegin",r);var n=this.previousSibling;if(y(n),n.children[1].addEventListener("click",u,!1),n.children[1].addEventListener("mouseover",h,!1),n.children[1].addEventListener("mouseout",_,!1),t.is(c)&&("SearchControl_SearchAttributes"===c||"SearchControl_6WTags"===c)){let e=this.parentNode.childElementCount,t=[];for(var s=0;s<e;s++)t.push(this.parentNode.children[s].getAttribute("sccuri"));var o=n.getAttribute("sccdatasource");if("AllDataSourcesandTypes"===o){let e={datasource:o,attributes:t,parentDIVID:a.id};i.update_Local_Attribute_Cache_ForAllTypes(e)}else{let e={datasource:o,type:n.getAttribute("scctype"),attributes:t,parentDIVID:a.id};i.update_Local_Attribute_Cache(e)}p.enableButtons()}}this.classList.remove("over")}function y(e){e.addEventListener("dragstart",g,!1),e.addEventListener("dragover",f,!1),e.addEventListener("dragleave",C,!1),e.addEventListener("drop",v,!1),e.addEventListener("dragend",m,!1)}}},createWdgAlert:function(){return new a({closable:!0,visible:!0,autoHide:!0,hideDelay:2500})},updateButtons:function(e,r){t.is(e)&&t.is(r)&&(this._applyButton=e,this._restoreButton=r)},isButtonDisabled:function(){return this._buttonStatus=!1,t.is(this._applyButton)&&t.is(this._restoreButton)&&!0===this._applyButton.isDisabled()&&!0===this._restoreButton.isDisabled()&&(this._buttonStatus=!0),this._buttonStatus},disableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!1===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!0),!1===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!0))},enableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!0===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!1),!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1))},enableRestoreButton:function(){t.is(this._restoreButton)&&!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1)},getButtonStatus:function(){return this._buttonStatus},reSetButtonStatus:function(){this._buttonStatus=!1},putMask:function(e){n.mask(e)},removeMask:function(e){n.unmask(e)},setPlatformID:function(e){t.is(e)&&(p.platformID=e)},getPlatformID:function(){if(t.is(p.platformID))return p.platformID},setPlatformDisplayName:function(e){t.is(e)&&(p.platformDisplayName=e)},getDataSourceList:function(e){var r=[],a=[];if(this._datasourceList.length>0)return this._datasourceList;if(t.is(p.platformID)){var n=s.getAvailableSources(p.platformID);if(t.is(n)){(e=e||{}).dataSources=n;var i=o.getValidDatasources(e);if(t.is(i)){if(t.is(i.dataSourceNames,"array")){a=i.dataSourceNames,a=d.filterSourceList(a);for(var l=0;l<a.length;l++)p._datSourceToVocabID[a[l]]=c.getVocabularyName(a[l])}t.is(i.dataSourceServices,"array")&&(r=i.dataSourceServices)}}return r.length>0&&this.getNLSValues(a,r,"ds6w:dataSource"),p._Service_Nls_promise.promise}},getNLSValues:function(e){var r={};r.dataSourceLists=e;var a=u.getNlsOfDataSources(r);if(t.is(a,"array")){var n={};n.AllDataSourcesandTypes=h.get("searchAttributes.DataSource.AllDataSourcesandTypes");for(var s=0;s<a.length;s++)n[e[s]]=a[s],p._datasourceList.push(a[s]);i.setDatasourceInternalMapping(n)}p._Service_Nls_promise.resolve(p._datasourceList)},getDatasourceInternalName:function(e){if(t.is(e))return i.getDatasourceInternalMappingValue(e)},getDatasourceDisplayName:function(e){if(t.is(e))return i.getDatasourceDisplayMappingValue(e)},updateAttributesMappingForAllDataSourcesAndTypes:function(e,r){t.is(e,"string")&&i.setAttributesInternalMappingForAllDataSourcesAndTypes(e,r)},getAttributesInternalNameForAllDataSourcesAndTypes:function(e,r){if(t.is(e))return i.getAttributesInternalMappingValueForAllDataSourcesAndTypes(e,r)},getAttributesDisplayNameForAllDataSourcesAndTypes:function(e,r){if(t.is(e))return i.getAttributesDisplayMappingValueForAllDataSourcesAndTypes(e,r)},updateTypesMapping:function(e,r){t.is(e,"string")&&i.setTypeInternalMapping(e,r)},getTypesInternalName:function(e,r){if(t.is(e))return i.getTypeInternalMappingValue(e,r)},getTypesDisplayName:function(e,r){if(t.is(e))return i.getTypeDisplayMappingValue(e,r)},updateAttributesMapping:function(e,r,a){t.is(e,"string")&&i.setAttributeInternalMapping(e,r,a)},getAttributesInternalName:function(e,r,a){if(t.is(e))return i.getAttributeInternalMapping(e,r,a)},getSettingsJSONFromTabName:function(e){if(t.is(e))return i.gateTabSettingJSON(e)},setLocalCacheForAttribute:function(e){if(t.is(e))return i.initiate_Local_Attribute_Cache(e)},setLocalCacheFor6WTags:function(e){if(t.is(e))return i.initiate_Local_6WTags_Cache(e)},getLocalCacheForAttribute:function(){return i.gate_Local_Attribute_Cache()},getLocalCacheFor6WTags:function(){return i.gate_Local_6WTags_Cache()},clearLocalCacheForAttribute:function(){return i.clear_Local_Attribute_Cache()},clearLocalCacheFor6WTags:function(){return i.clear_Local_6WTags_Cache()},getAppPredicates:function(e){if(t.is(e))return i.getAppWisePredicates(e)},setURL:function(e){this.url=e},getURL:function(){return this.url}};return p}),define("DS/SearchControlCenter/scripts/SearchcontrolColumnCusto",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/UIKIT/Popover","DS/UIKIT/Mask","DS/MessageBus/MessageBus","DS/SNInfraUX/Logger","css!DS/SearchControlCenter/SearchControlCenter","DS/SNInfraUX/SearchControlCenterFetchService","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_){"use strict";var p={importButton:null,fileChooser:null,jsonReader:null,_uploadeJsonFileName:null,displayCustoImportButton:null,displayCustoFileChooser:null,displayCustoJsonReader:null,_displayCustoUploadeJsonFileName:null,_columnCustoMemoryObject:null,_displayNameMemoryObject:null,_showColumnCusto:!1,_showDisplayNameCusto:!1,onRenderFacet:function(t){var r=null;UWA.is(window)&&UWA.is(window.location)&&UWA.is(window.location.search,"string")&&(r=window.location.search.substring(1)),UWA.is(r,"string")&&r.length>0&&r.indexOf("AdminColumnsSearch")>=0&&(this._showColumnCusto=!0),UWA.is(r,"string")&&r.length>0&&r.indexOf("SearchDisplayName")>=0&&(this._showDisplayNameCusto=!0);var a=e.create("div",{class:"search_center_columncusto_main_div",id:"search-type-tab-view-mode"}).inject(t);if(!0===this._showColumnCusto){var s=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(a),c=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(s);e.create("p",{class:"search_center_right_text",text:h.get("SearchColumnCusto.ImportColumnCusto")}).inject(c);var d=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(a);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(d);var u=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(d),_=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(d);p.fileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:"Upload Search Column Customization",buttonText:"Browse",events:{onChange:this._onFileInputChange.bind(this)}}).inject(u);var g=this;p.importButton=new i({id:"import_button_id",value:h.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){g._OnImportClick(),l.log("inside _OnImportClick() ")}}}).inject(_);var f=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(a),C=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(f);e.create("p",{class:"search_center_right_text",id:"search-column-custo-display-text"}).inject(C)}if(!0===this._showDisplayNameCusto){var m=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(a),v=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(m);e.create("p",{class:"search_center_right_text",text:h.get("SearchColumnCusto.ImportDisplayNameCusto")}).inject(v);var y=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(a);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(y);var b=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(y),S=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(y);p.displayCustoFileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:h.get("SearchColumnCusto.UploadDisplayNameCusto"),buttonText:"Browse",events:{onChange:this._onDisplayNameFileInputChange.bind(this)}}).inject(b);g=this;p.displayCustoImportButton=new i({id:"import_button_id",value:h.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){g._OnDisplayNameImportClick(),l.log("inside _OnDisplayNameImportClick() ")}}}).inject(S);var D=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(a),A=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(D);e.create("p",{class:"search_center_right_text",id:"search-displayname-custo-display-text"}).inject(A)}o.unmask(widget.body)},_onFileInputChange:function(e){var r=e.target.files[0].name;(this._uploadeJsonFileName=r,t.is(r,"string"))&&("json"===r.slice(2+(r.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(p.jsonReader=new FileReader,p.jsonReader.readAsText(e.target.files[0]),p.importButton.enable()):(p.importButton.disable(),p.fileChooser.clear(),alert(h.get("wrongJsonFileTypeSelectionWarning"))))},_OnImportClick:function(){document.getElementById("search-column-custo-display-text").innerHTML="The column custo file to upload: "+this._uploadeJsonFileName,p.importButton.disable(),_.enableButtons()},_onDisplayNameFileInputChange:function(e){var r=e.target.files[0].name;(this._displayCustoUploadeJsonFileName=r,t.is(r,"string"))&&("json"===r.slice(2+(r.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(p.displayCustoJsonReader=new FileReader,p.displayCustoJsonReader.readAsText(e.target.files[0]),p.displayCustoImportButton.enable()):(p.displayCustoImportButton.disable(),p.fileChooser.clear(),alert(h.get("wrongJsonFileTypeSelectionWarning"))))},_OnDisplayNameImportClick:function(){document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file to upload: "+this._displayCustoUploadeJsonFileName,p.displayCustoImportButton.disable(),_.enableButtons()},getTabInputsToStore:function(){t.is(this._uploadeJsonFileName)&&(document.getElementById("search-column-custo-display-text").innerHTML="The column custo file applied: "+this._uploadeJsonFileName,p.importButton.disable()),t.is(this._displayCustoUploadeJsonFileName)&&(document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file applied: "+this._displayCustoUploadeJsonFileName,p.displayCustoImportButton.disable()),_.enableRestoreButton();var e={},r={};if(t.is(this._uploadeJsonFileName)?(t.is(p.jsonReader.result)&&t.is(p.jsonReader.result)&&((e=JSON.parse(p.jsonReader.result)).uploadedColumnCustoFileName=this._uploadeJsonFileName),r.searchColumnCustoInputs=e):r.searchColumnCustoInputs=this._columnCustoMemoryObject,t.is(this._displayCustoUploadeJsonFileName)){var a={};t.is(p.displayCustoJsonReader.result)&&t.is(p.displayCustoJsonReader.result)&&((a=JSON.parse(p.displayCustoJsonReader.result)).uploadedDisplayCustoFileName=this._displayCustoUploadeJsonFileName),r.searchDisplayCustoInputs=a}else r.searchDisplayCustoInputs=this._displayNameMemoryObject;return r},onResetTab:function(e){u.getSearchSettings({tenantID:_.platformID}).then(function(e){var r;let a="",n="";if((r=t.is(e,"string")?JSON.parse(e):e).hasOwnProperty("column_custo")){var i=r.column_custo;t.is(i)&&i.hasOwnProperty("searchColumnCustoInputs")&&(p._columnCustoMemoryObject=i.searchColumnCustoInputs,t.is(p._columnCustoMemoryObject)&&t.is(p._columnCustoMemoryObject.uploadedColumnCustoFileName,"string")&&(a=p._columnCustoMemoryObject.uploadedColumnCustoFileName)),t.is(i)&&i.hasOwnProperty("searchDisplayCustoInputs")&&(p._displayNameMemoryObject=i.searchDisplayCustoInputs,t.is(p._displayNameMemoryObject)&&t.is(p._displayNameMemoryObject.uploadedDisplayCustoFileName,"string")&&(n=p._displayNameMemoryObject.uploadedDisplayCustoFileName))}!0===p._showColumnCusto&&(document.getElementById("search-column-custo-display-text").innerHTML=a.trim().length>0?"Current applied custo file: "+a:"There is no custom file applied yet."),!0===p._showDisplayNameCusto&&(document.getElementById("search-displayname-custo-display-text").innerHTML=n.trim().length>0?"Current applied display custo file: "+n:"There is no custom file applied yet.")},function(){}),this._uploadeJsonFileName=null,!0===p._showColumnCusto&&(p.fileChooser.clear(),p.importButton.disable())}};return p}),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils",["UWA/Core","UWA/Class","UWA/Class/Promise","UWA/Class/Collection","DS/WAFData/WAFData","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/SNInfraUX/SearchSettings","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/SNInfraUX/TaggerConfigAccess","DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,r,a,n,i,s,o,c,l,d,u){"use strict";return t.singleton({init:function(){let t=o.getOption("rootWConcepts"),i=o.getOption("concepts_rootW_Mapping"),s=new a([],{model:d}),l=new a([],{model:d}),h=new Map,_=new Map,p=[],g=[],f=[],C=[],m=[],v=[],y=[],b=[],S=[];this.hasConcepts=function(){return s.length>0},this.getConcept=function(e){return s.get(e)},this.getRenamedConcepts=function(){if(p.length>0)return p},this.getMovedConcepts=function(){if(g.length>0)return g},this.getDuplicateConcepts=function(){if(f.length>0)return f},this.getNewConcepts=function(){if(C.length>0)return C},this.getDeletedConcepts=function(){if(m.length>0)return m},this.getUnDeprecatedConcepts=function(){if(b.length>0)return b},this.getDeprecatedConcepts=function(){S=[],b=[];let e=y.length,t=v.length;if(e>0?y.forEach(function(e){v.forEach(function(t){e.getLabel()!=t.getLabel()&&S.push(t)})}):S=v,e>t&&y.forEach(function(e){t>0?v.forEach(function(t){e.includes(t)||b.push(e)}):b=y}),S.length>0)return S},this.isConceptAvailable=function(e){if("string"==typeof e&&e)return _.has(e.toLowerCase())};let D=function(e){let t=new d({id:e.shortURI,uri:e.uri,label:e.label}),r=e.types;return Array.isArray(r)||(r=[]),t.set("types",r),-1!==r.indexOf("ds6wclassifier:Tag")&&t.setAsTaggable(),-1!==r.indexOf("owl:DeprecatedClass")&&t.setAsDeprecated(),h.set(e.label,!0),_.set(e.label.toLowerCase(),!0),t},A=function(e,r,n){try{r=UWA.is(r,"string")?JSON.parse(r):r,l=s,s=function(e){let r=new a([],{model:d});return e.forEach(function(e){let a=r.get(e.shortURI);if(a)throw new Error(e.shortURI+" is already available from "+a.get("uri"));if(a=D(e),r.add(a),UWA.is(e.broader,"array")){let n=e.broader[0].shortURI;1==e.broader.length&&"ds6wclassifier:Root"===n?(a.setAsRootWConcept(),a.set("rootW",i[a.id.toLowerCase()])):e.broader.forEach(function(e){n=e.shortURI;let i=r.get(n);i||(i=D(e),r.add(i)),i.addNarrowerConcept(a),i.canBeTagged()&&a.setAsTaggable(),-1!=t.indexOf(i.id.toLowerCase())&&a.setAsRootConcept()})}}),r}(r),n(r)}catch(e){console.log("FAILED to parse /3drdfpersist/resources/v1/ontologies/ response"),n([])}},x=!0;this.getOntologyConceptsFromSessionId=function(t){return console.log("Creating a new promise to retrive concepts for sessionId="+t[0].sessionId+", and datasetTitle="+t[0].datasetTitle),new r(function(r){require(["DS/UWPClientCode/PublicAPI","DS/PlatformAPI/PlatformAPI"],function(a,i){var o;if(a.getApplicationConfiguration("app.urls.registry")||i.getApplicationConfiguration("app.urls.registry"))o=a.getApplicationConfiguration("app.urls.registry")||i.getApplicationConfiguration("app.urls.registry");else{o=`${a.getApplicationConfiguration("app.urls.myapps")||i.getApplicationConfiguration("app.urls.myapps")}/resources/AppsMngtRegistry/`}o?(console.log("registryUrl found, registryUrl="+o),c.getServicesByPlatform({platforms:[u.platformID],services:["ontology"],config:{url:o}}).then(function(a){if(console.log("i3DXCompassRegistryClient.getServicesByPlatform returns: "+JSON.stringify(a)),Array.isArray(a)&&a.length>0&&Array.isArray(a[0].services)&&a[0].services.length>0&&a[0].services[0].url){var i={method:"GET",headers:{Accept:"application/json"},url:a[0].services[0].url+"/3drdfklet/resources/v1/concepts/ds6wclassifier:Root/concepts?recurse=all&sessionId="+t[0].sessionId,onComplete:function(a){A(t[0].sessionId,a,r),y=v,v=[],s.forEach(function(e){!0===e.isDeprecated()&&v.push(e)}),function(t,r){if(p=[],C=[],m=[],g=[],f=[],0===t.length)return console.log("No previous Dataset To compare"),!0;if(t.length===r.length)t.forEach(function(t){r.forEach(function(r){if(t.get("label")!=r.get("label")&&t.get("uri")===r.get("uri")){let e={original_concept:t,renamed_concept:r};p.push(e)}if(t.getBroaderConcept().length>0&&t.get("uri")===r.get("uri")){if(!e.is(r.getBroaderConcept())&&r.getBroaderConcept().length>0)console.log("Father movement");else if(e.is(t.getBroaderConcept())&&t.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getURI()!=r.getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t,previous_father:t.getBroaderConcept().at(0),current_father:r.getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),g.push(e)}}else if(e.is(t)&&t.get("label")===r.get("label")&&t.getURI()!=r.getURI()&&e.is(t.getBroaderConcept())&&r.getBroaderConcept().length>0&&e.is(t.getBroaderConcept())&&r.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getLabel()===r.getBroaderConcept().at(0).getLabel()){let e={org_concept:t,duplicate:r};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}})});else if(r.length>t.length)for(let a=0;a<r._models.length;a++){let n=!1;for(let i=0;i<t._models.length;i++){if(t._models[i].get("label")!=r._models[a].get("label")&&t._models[i].get("uri")===r._models[a].get("uri")){let e={original_concept:t._models[i],renamed_concept:r._models[a]};p.push(e)}if(e.is(t._models[i])&&t._models[i].get("label")===r._models[a].get("label")&&t._models[i].getURI()!=r._models[a].getURI()&&e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(r._models[a].getBroaderConcept())&&r._models[a].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getLabel()===r._models[a].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[i],duplicate:r._models[a]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[i].get("uri")===r._models[a].get("uri")){if(n=!0,e.is(t._models[i])&&t._models[i].get("uri")===r._models[a].get("uri"))if(!e.is(r._models[a].getBroaderConcept())&&r._models[a].getBroaderConcept().length>0)console.log("Father Removed");else if(e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getURI()!=r._models[a].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[i],previous_father:t._models[i].getBroaderConcept().at(0),current_father:r._models[a].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),g.push(e)}break}}n||C.push(r._models[a])}else if(r.length<t.length)for(let a=0;a<t._models.length;a++){let n=!1;for(let i=0;i<r._models.length;i++){if(t._models[a].get("label")!=r._models[i].get("label")&&t._models[a].get("uri")===r._models[i].get("uri")){let e={original_concept:t._models[a],renamed_concept:r._models[i]};p.push(e)}if(e.is(t._models[a])&&t._models[a].get("label")===r._models[i].get("label")&&t._models[a].getURI()!=r._models[i].getURI()&&e.is(t._models[a].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(r._models[i].getBroaderConcept())&&r._models[i].getBroaderConcept().length>0&&t._models[a].getBroaderConcept().at(0).getLabel()===r._models[i].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[a],duplicate:r._models[i]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[a].get("uri")===r._models[i].get("uri")){if(n=!0,t._models[a].getBroaderConcept().length>0&&t._models[a].get("uri")===r._models[i].get("uri"))if(e.is(r._models[i].getBroaderConcept())){if(e.is(t._models[a].getBroaderConcept())&&t._models[a].getBroaderConcept().length>0&&t._models[a].getBroaderConcept().at(0).getURI()!=r._models[i].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[a],previous_father:t._models[a].getBroaderConcept().at(0),current_father:r._models[i].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),g.push(e)}}else console.log("Father movement");break}}n||(m.push(t._models[a]),x=!1)}}(l,s),r()},onFailure:function(){console.log(`FAILED to retrieve concents in sessionId=${t[0].sessionId}`),r([])}};n.authenticatedRequest(i.url,i)}else console.log("i3DXCompassRegistryClient.getServicesByPlatform did not provide data in expected format"),r([])},function(){console.log("i3DXCompassRegistryClient.getServicesByPlatform FAILED"),r([])})):(console.log("FAILED to retrieve registryUrl"),r([]))})})}}}).init()}),define("DS/SearchControlCenter/Views/SearchControlCenterLayoutView",["UWA/Core","UWA/Class/View","DS/UIKIT/Modal","DS/UIKIT/Mask","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/WAFData/WAFData","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_,p){"use strict";var g=t.extend({tagName:"div",className:"generic-detail",_postURL:null,_sccDefaultSettings:null,_containerSpan:null,init:function(e){e&&(this.model=e.model),this._parent.call(this,e)},setup:function(t){e.log("SCCLayoutView::setup!"),e.log(t)},render:function(){e.log("SCCLayoutView::render");var t=this;t._containerSpan=new e.Element("div",{class:"search_center_scroll",id:"search-control-center-general"}),t._containerSpan.inject(t.container),t._containerSpan.classList.add("search_center_container"),a.mask(widget.body),require([t.model._attributes.facetJS],function(e){e.onRenderFacet(t._containerSpan);var r=t.model._attributes.id,a=s.getSettingsJSONFromTabName(r);e.onResetTab(a),s.disableButtons()});var r=new e.Element("div",{class:"search-control-buttonContainer"});r.inject(t.container);var i=new n({id:"id_in_app_apply",value:u.get("ApplyButton.title"),className:"default  primary in_app_search_center_btn",events:{onClick:function(){t._OnApplyClick(!1),_.log("inside _OnApplyClick() ")}}}).inject(r,"bottom"),o=new n({id:"id_in_app_cancel",value:u.get("CancelButton.title"),className:"default in_app_search_center_btn",events:{onClick:function(){t._OnCancelClick(),_.log("inside _OnCancelClick() ")}}}).inject(r);new n({id:"id_in_app_restore",value:u.get("RestoreButton.title"),className:"default in_app_search_center_btn search_center_button_right_margin",events:{onClick:function(){t._OnResetClick(),_.log("inside _OnResetClick() ")}}}).inject(r);return s.updateButtons(i,o),s.disableButtons(),this},_OnCancelClick:function(){s.reSetButtonStatus();var e=this;require([e.model._attributes.facetJS],function(t){var r=e.model._attributes.id,a=s.getSettingsJSONFromTabName(r);t.onResetTab(a),s.disableButtons()})},_OnApplyClick:function(t){s.reSetButtonStatus();var r=this,a=t;require([r.model._attributes.facetJS],function(t){var n=t.getTabInputsToStore();if(e.is(n)){var i=r.model._attributes.id,l={};"SearchControl_SearchTypes"===i?l=n:l[i]=n,c.updateSettingsJSON(l)}s.disableButtons(),o.getServiceUrl({serviceName:"3DSpace",platformId:s.platformID,onComplete:function(t){if(e.is(t,"string")){g._postURL=t+"/resources/SNAPI/infra_services/searchsettings?tenant="+s.platformID;var n=null;a?(n=r._sccDefaultSettings,!0!==p.getOption("allowEnterpriseDictionaryModification")&&(n.enterprise_ontology=c.gateSettingsJSON().enterprise_ontology)):n=c.gateSettingsJSON();var i={timeout:5e4,method:"POST",data:JSON.stringify(n),type:"json",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(){if(a){r._updateMemoryModel(),(t=s.createWdgAlert()).inject(widget.body,"top");var e=u.replace(u.get("SearchInfra.restoreToDefaultsuccessmsg"),{tenant_name:s.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}else{var t;(t=s.createWdgAlert()).inject(widget.body,"top");e=u.replace(u.get("SearchInfra.successmsg"),{tenant_name:s.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}r._updateUI()},onFailure:function(e){if(a){(r=s.createWdgAlert()).inject(widget.body,"top");var t=u.get("SearchInfra.restoreToDefaultfailuremsg");t+=e,r.add({className:"error applyChangesAlert",message:t})}else{var r;(r=s.createWdgAlert()).inject(widget.body,"top");t=u.get("SearchInfra.failuremsg");t+=e,r.add({className:"error applyChangesAlert",message:t})}},onTimeout:function(e){var t=s.createWdgAlert();t.inject(widget.body,"top");var r=u.get("SearchInfra.timeoutmsg");r+=e,t.add({className:"error applyChangesAlert",message:r})}};require(["DS/SNInfraUX/SearchSettings"],function(e){(e.getOption("ODTLogs")||e.getOption("ODTLogs-SCCSettings"))&&_.warn("ODTLogs-SCCSettings:"+JSON.stringify(i))}),h.authenticatedRequest(g._postURL,i)}},onFailure:function(e){var t=s.createWdgAlert();t.inject(widget.body,"top");var r=u.get("SearchInfra.URLBuildError");r+=e,t.add({className:"error applyChangesAlert",message:r})}})})},_OnResetClick:function(){var t=this,a=new r({header:u.get("SearchInfra.restoreToDefaultHeader"),closable:!0,body:u.replace(u.get("SearchInfra.restoreToDefaultConfirmationmsg"),{tenant_name:s.platformDisplayName}),footer:[new n({className:"primary",value:u.get("SearchInfra.yesButton"),events:{onClick:function(){t._sccDefaultSettings=JSON.parse(l),e.is(t._sccDefaultSettings)&&t._OnApplyClick(!0),a.destroy()}}}),new n({value:u.get("SearchInfra.noButton"),events:{onClick:function(){a.destroy()}}})]}).inject(document.body);a.show()},_updateMemoryModel:function(){var e=this;e._sccDefaultSettings&&(c.setSettingsJSON(e._sccDefaultSettings),require([e.model._attributes.facetJS],function(t){var r=e.model._attributes.id,a=s.getSettingsJSONFromTabName(r);t.onResetTab(a),s.disableButtons()}))},_updateUI:function(){let t=this;require([t.model._attributes.facetJS],function(r){if(e.is(r)&&e.is(r.onUpdateUI,"function")){let e=t.model._attributes.id;r.onUpdateUI(e)}})},destroy:function(){this.stopListening(),this._parent.apply(this,arguments)}});return g}),define("DS/SearchControlCenter/scripts/SCCSynonymsDictonary",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/UIKIT/Popover","DS/UIKIT/Modal","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,r,a,n,i,s,o,c){"use strict";return{importButton:null,fileChooser:null,checkboxActivateSynonyms:null,jsonReader:null,newSynonymsToStore:null,storedSynonyms:null,onRender:function(s){var l=this,d=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-search_synonyms-text"}).inject(s);e.create("p",{class:"search_center_text_heading",text:o.get("GeneralTab.SearchSynonyms.title")}).inject(d);var u=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"general-tab-abbreviated-count"}).inject(s),h=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-synonyms-toggle"}).inject(u);this.checkboxActivateSynonyms=new r({type:"checkbox",label:o.get("GeneralTab.SearchSynonyms.checkbox.label"),className:"primary",touchMode:"true"}).inject(h),this.checkboxActivateSynonyms.addEventListener("change",function(){!t.is(l.storedSynonyms)&&l.checkboxActivateSynonyms.checkFlag||c.enableButtons(),l._setBrowseFileState(l.checkboxActivateSynonyms.checkFlag)},!1);var _=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(u);new i({target:_,trigger:"hover",animate:"true",position:"top",body:o.get("GeneralTab.SearchSynonyms.checkbox.info"),title:""}),this.divFileChooserSpan=e.create("div",{class:"search_center_margin search_center_disable",id:"div-file-chooser-span"}).inject(s);var p=e.create("div",{class:"",id:"div-file-chooser-lable"}).inject(this.divFileChooserSpan),g=(e.create("p",{class:"search_center_text",text:o.get("GeneralTab.SearchSynonyms.FileChooser.label"),styles:{}}).inject(p),e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"search-type-display"}).inject(this.divFileChooserSpan)),f=e.create("div",{class:"",id:"search-synonyms-file-chooser",styles:{width:"85%",position:"relative"}}).inject(g);this.fileChooser=new a({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),buttonText:o.get("GeneralTab.SearchSynonyms.FileChooser.buttonText"),events:{onChange:this._onFileInputChange.bind(this)}}).inject(f);var C=e.create("div",{class:"",id:"search-synonyms-file-import",styles:{"margin-left":"5px","margin-right":"5px",width:"15%",position:"center"}}).inject(g),m=this;this.importButton=new n({id:"import_button_id",value:o.get("GeneralTab.SearchSynonyms.FileChooser.validate"),className:"default",disabled:!0,events:{onClick:function(){m._onImportClick()}}}).inject(C)},_onFileInputChange:function(e){var r=e.target.files[0],a=r.name;t.is(a,"string")&&("json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?t.is(this.storedSynonyms)?this._confirmAndReadFileAsText(r):this._readFileAsText(r):(this.importButton.disable(),this.fileChooser.clear(),this._showAlert(o.get("GeneralTab.SearchSynonyms.errors.JsonOnly"),"error")))},_onImportClick:function(){try{this._isValidJson(this.jsonReader)&&(c.enableButtons(),this._showAlert(o.get("GeneralTab.SearchSynonyms.success.ValidJson"),"success"))}catch(e){this.fileChooser.clear(),this._showAlert(e.message,"error")}this.importButton.disable()},_isValidJson:function(e){var r=null;if(!t.is(e.result))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.InvalidJson"));try{r=JSON.parse(e.result)}catch(e){throw new Error(o.get("GeneralTab.SearchSynonyms.errors.ParsingError"))}if(!t.is(r,"object"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));return Object.keys(r).forEach(function(e){if(!t.is(r[e],"array"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));r[e].forEach(e=>{if(!t.is(e,"string"))throw new Error(o.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"))})}),this.newSynonymsToStore=r,!0},updateTabInputsToStore:function(e){let r={};r.activateSnonyms=this.checkboxActivateSynonyms.checkFlag,r.synonyms=t.is(this.newSynonymsToStore)?this.newSynonymsToStore:this.storedSynonyms,e.search_synonyms=r},onResetTab:function(e){if(t.is(e)){var r=e.activateSnonyms;this.storedSynonyms=e.synonyms,this.checkboxActivateSynonyms.checkFlag=r,t.is(this.storedSynonyms)&&(this.fileChooser.elements.textfield.placeholder=o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.override"))}else this.fileChooser.elements.textfield.placeholder=o.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),this.checkboxActivateSynonyms.checkFlag=!1,this.storedSynonyms=null;this.fileChooser.clear(),this.importButton.disable()},_showAlert:function(e,t){var r=c.createWdgAlert();r.inject(widget.body,"top"),r.add({className:t,message:e})},_readFileAsText:function(e){"undefined"!=typeof FileReader&&(this.jsonReader=new FileReader,this.jsonReader.readAsText(e),this.importButton.enable())},_confirmAndReadFileAsText:function(e){var t=this,r=new s({header:o.get("GeneralTab.SearchSynonyms.warning.header"),closable:!1,escapeToClose:!1,visible:!0,body:o.get("GeneralTab.SearchSynonyms.warning.body"),footer:[new n({className:"primary",value:o.get("GeneralTab.SearchSynonyms.warning.button.Yes"),events:{onClick:function(){t._readFileAsText(e),r.destroy()}}}),new n({value:o.get("GeneralTab.SearchSynonyms.warning.button.No"),events:{onClick:function(){t.fileChooser.clear(),t.importButton.disable(),r.destroy()}}})]}).inject(document.body)},_setBrowseFileState:function(e){!0===e?this.divFileChooserSpan.removeClassName("search_center_disable"):this.divFileChooserSpan.addClassName("search_center_disable")}}}),define("DS/SearchControlCenter/scripts/SearchcontrolSearchAttributes",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/Controls/ComboBox","DS/UIKIT/Popover","DS/UIKIT/Mask","DS/MessageBus/MessageBus","DS/SNInfraUX/SNVocabAccess","DS/FedDictionaryAccess/FedDictionaryAccessAPI","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,r,a,n,i,s,o,c,l,d,u,h){"use strict";var _={datasourceComboBox:null,selectTypeComboBox:null,preferredAttrCard:null,preferredAttrComboBox:null,divAdvanceSearchSpan:null,divDataSourceDisplaySpan:null,moreAttrCard:null,moreAttrComboBox:null,_attributesMap:{},_SearchAttributes_promise:r.deferred(),getAttributesPromise:function(){return this._SearchAttributes_promise.promise},onRenderFacet:function(r){var a=e.create("div",{class:"search_center_secondary_div",id:"search-center-Attriute"}).inject(r);_.divDataSourceDisplaySpan=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_disable",id:"search-type-display"}).inject(a);var o=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"search-type-display-text"}).inject(_.divDataSourceDisplaySpan),l=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-type-display-combo"}).inject(_.divDataSourceDisplaySpan);_.datasourceComboBox=new n({placeholder:u.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0}).inject(l),l.setStyle("display","grid"),_.datasourceComboBox.elements.container.setStyle("max-width","unset");var d=[],p=h.getDataSourceList();if(t.is(p,"array")){let e=p.length;for(let t=0;t<e;t++)d.push(p[t]);_.datasourceComboBox.elementsList=d}if(h._datasourceList.length>0){let e=h._datasourceList;if(t.is(e,"array")){let t=e.length;for(let r=0;r<t;r++)d.push(e[r]);_.datasourceComboBox.elementsList=d}}else h.getDataSourceList().then(function(e){if(t.is(e,"array")){let t=e.length;for(let r=0;r<t;r++)d.push(e[r]);_.datasourceComboBox.elementsList=d}});var g=this;_.datasourceComboBox.addEventListener("change",function(){h.enableButtons(),_.selectTypeComboBox.disabled=!1,_.preferredAttrComboBox.disabled=!0,_.moreAttrComboBox.disabled=!0,s.mask(v),g.cleanUpAttributeCards();var e=h.getDatasourceInternalName(_.datasourceComboBox.currentValue),r={};r.vocabId=h._datSourceToVocabID[e],r.tenantId=h.platformID,c.loadVocabularyClasses(r,function(r){if(r.classInfos.length>0){var a=[],n={};for(let e=0;e<r.classInfos.length;e++)t.is(r.classInfos[e].nlsName,"string")&&t.is(r.classInfos[e].uri)&&(a.push(r.classInfos[e].nlsName),n[r.classInfos[e].uri]=r.classInfos[e].nlsName);h.updateTypesMapping(e,n),_.selectTypeComboBox.elementsList=a}else{_.selectTypeComboBox.disabled=!0;var i=h.createWdgAlert(),o=u.get("SearchType.NoTypesWarning");i.add({className:"warning applyChangesAlert",message:o})}s.unmask(v),_._SearchAttributes_promise.resolve()})}),e.create("p",{class:"search_center_text",text:u.get("searchAttributes.DataSource")}).inject(o);var f=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(_.divDataSourceDisplaySpan);new i({target:f,trigger:"hover",animate:"true",position:"top",body:u.get("searchAttributes.DataSource.popover"),title:""}),_.divAdvanceSearchSpan=e.create("div",{class:"search_center_disable",id:"search-type-display"}).inject(a);var C=e.create("div",{class:"search_center_general_tab_div",id:"search-type-display"}).inject(_.divAdvanceSearchSpan),m=e.create("div",{class:"search_center_div_left search_center_general_display_flex"}).inject(C),v=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-preferred_attrs_combo"}).inject(C);e.create("p",{class:"search_center_text",text:u.get("searchAttributes.selectType")}).inject(m);var y=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(C);new i({target:y,trigger:"hover",animate:"true",position:"top",body:u.get("searchAttributes.selectType.popover"),title:""}),_.selectTypeComboBox=new n({placeholder:u.get("Choose_type"),touchMode:!0,disabled:!0,enableSearchFlag:!0}).inject(v),v.setStyle("display","grid"),_.selectTypeComboBox.elements.container.setStyle("max-width","unset"),_.selectTypeComboBox.addEventListener("change",function(){h.enableButtons(),s.mask(T),s.mask(P);var e=h.getDatasourceInternalName(_.datasourceComboBox.currentValue),r=h.getTypesInternalName(e,_.selectTypeComboBox.currentValue);if(t.is(r)){var a={};a.className=r,a.tenantId=h.platformID,c.loadRelevantPredicates(a,function(a){if(g.cleanUpAttributeCards(),a.vocabularyPredicateInfo.length>0){a.vocabularyPredicateInfo.sort(function(e,r){var a=e.nlsName;t.is(a)||(a=e.uri),a=a.toUpperCase();var n=r.nlsName;return t.is(n)||(n=r.uri),a<(n=n.toUpperCase())?-1:a>n?1:0}),_.preferredAttrComboBox.disabled=!1,_.moreAttrComboBox.disabled=!1;var n=[];for(let e=0;e<a.vocabularyPredicateInfo.length;e++)if(t.is(a.vocabularyPredicateInfo[e].nlsName,"string")&&t.is(a.vocabularyPredicateInfo[e].uri)){if("ds6w:label"===a.vocabularyPredicateInfo[e].uri||"ds6w:identifier"===a.vocabularyPredicateInfo[e].uri||"ds6w:modified"===a.vocabularyPredicateInfo[e].uri||"ds6w:description"===a.vocabularyPredicateInfo[e].uri||"ds6w:responsible"===a.vocabularyPredicateInfo[e].uri||"ds6w:created"===a.vocabularyPredicateInfo[e].uri)continue;n.push(a.vocabularyPredicateInfo[e].nlsName),_._attributesMap[a.vocabularyPredicateInfo[e].uri]=a.vocabularyPredicateInfo[e].nlsName}h.updateAttributesMapping(e,r,_._attributesMap),_.preferredAttrComboBox.elementsList=n,_.moreAttrComboBox.elementsList=n;var i=h.getLocalCacheForAttribute();if(t.is(i)&&i.length>0)for(var o=0;o<i.length;o++){var c=i[o];if(r===c.uri&&e===c.source){var l=c.predicates;if(t.is(l)&&l.length>0){S.className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";for(var d=0;d<l.length;d++){var u=c.predicates[d].uri;let t=_._attributesMap[u],a={cardDiv:_.preferredAttrCard,datasource:e,type:r,textOnCard:t,uri:u,tabName:"SearchControl_SearchAttributes",deleteOption:!0};h.buildCardBlockRow(a)}}var p=c.excluded_predicates;if(t.is(p)&&p.length>0){j.className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";for(var f=0;f<p.length;f++){var C=c.excluded_predicates[f].uri;let t=_._attributesMap[C],a={cardDiv:_.moreAttrCard,datasource:e,type:r,textOnCard:t,uri:C,tabName:"SearchControl_SearchAttributes",deleteOption:!0};h.buildCardBlockRow(a)}}}}}else _.preferredAttrComboBox.disabled=!0,_.moreAttrComboBox.disabled=!0;s.unmask(T),s.unmask(P)})}else s.unmask(T),s.unmask(P)});var b=e.create("div",{class:"search_center_general_tab_div search_center_margin"}).inject(_.divAdvanceSearchSpan),S=e.create("div",{class:"search_center_div_left search_center_margin search_center_general_display_flex"}).inject(b),D=e.create("div",{class:"search_center_div_right"}).inject(b);e.create("p",{class:"search_center_text_normal",text:u.get("searchAttributes.Preffered_Attributes")}).inject(S);var A=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(b);new i({target:A,trigger:"hover",animate:"true",position:"top",body:u.get("searchAttributes.Preffered_Attributes.popover"),title:""});var x=e.create("div",{class:"search_center_div_datasource search_center_only_grid search_center_bottom_margin search_center_top_margin"}).inject(D),T=e.create("div",{class:"search_center_div_type_combo search_center_only_grid",id:"SearchAttributes-preferred_attrs_combo"}).inject(x),w=["Datasource","Type","Title","Name","Modification date","Creation date"];_.preferredAttrComboBox=new n({elementsList:w,placeholder:u.get("searchAttributes.Add_preferredAttr"),touchMode:!0,disabled:!0}).inject(T),_.preferredAttrComboBox.elements.container.setStyle("max-width","unset"),_.preferredAttrComboBox.addEventListener("change",function(){var e=_.moreAttrCard.childNodes.length,r=[];for(let t=0;t<e;t++)r.push(_.moreAttrCard.childNodes[t].getAttribute("sccURI"));var a=_.preferredAttrCard.childNodes.length,n=[];for(let e=0;e<a;e++)n.push(_.preferredAttrCard.childNodes[e].getAttribute("sccURI"));var i=_.preferredAttrComboBox.currentValue;if(t.is(i,"string")){var s,o=h.getDatasourceInternalName(_.datasourceComboBox.currentValue),c=h.getTypesInternalName(o,_.selectTypeComboBox.currentValue);s=h.getAttributesInternalName(o,c,i);var l=!1,d=null;if(t.is(s))if(r.length>0&&r.indexOf(s)>-1&&(d=u.get("searchAttributes.preferredAttrWarning"),l=!0),n.length>0&&!1===l&&n.indexOf(s)>-1&&(d=u.get("searchAttributes.AttributeWarning"),l=!0),!1===l){S.className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";var p={cardDiv:_.preferredAttrCard,datasource:o,type:c,textOnCard:i,tabName:"SearchControl_SearchAttributes",deleteOption:!0};h.buildCardBlockRow(p),h.enableButtons()}else{var g=h.createWdgAlert();g.inject(widget.body,"top"),g.add({className:"warning applyChangesAlert",message:d})}_.preferredAttrComboBox.selectedIndex=-1}});var I=e.create("div",{class:"search_center_div_card search_center_top_margin"}).inject(D);_.preferredAttrCard=e.create("div",{class:"card search_center_card_panel",id:"SearchAttributes_preferredAttr"}).inject(I);var N=e.create("div",{class:"search_center_general_tab_div "}).inject(_.divAdvanceSearchSpan),j=e.create("div",{class:"search_center_div_left search_center_margin search_center_general_display_flex"}).inject(N),B=e.create("div",{class:"search_center_div_right"}).inject(N);e.create("p",{class:"search_center_text_normal",text:u.get("searchAttributes.More_Attributes")}).inject(j);var O=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(N);new i({target:O,trigger:"hover",animate:"true",position:"top",body:u.get("searchAttributes.More_Attributes.popover"),title:""});var W=e.create("div",{class:"search_center_div_datasource search_center_bottom_margin search_center_only_grid search_center_top_margin"}).inject(B),P=e.create("div",{class:"search_center_div_type_combo search_center_only_grid",id:"SearchAttributes_more_attrs_combo"}).inject(W);w=["Datasource","Type","Title","Name","Modification date","Creation date"];_.moreAttrComboBox=new n({elementsList:w,placeholder:u.get("searchAttributes.Add_moreAttr"),nbDisplayedElements:w.length,touchMode:!0,disabled:!0}).inject(P),_.moreAttrComboBox.elements.container.setStyle("max-width","unset"),_.moreAttrComboBox.addEventListener("change",function(){var e=_.preferredAttrCard.childNodes.length,r=[];for(let t=0;t<e;t++)r.push(_.preferredAttrCard.childNodes[t].getAttribute("sccURI"));var a=_.moreAttrCard.childNodes.length,n=[];for(let e=0;e<a;e++)n.push(_.moreAttrCard.childNodes[e].getAttribute("sccURI"));var i=_.moreAttrComboBox.currentValue;if(t.is(i,"string")){var s,o=h.getDatasourceInternalName(_.datasourceComboBox.currentValue),c=h.getTypesInternalName(o,_.selectTypeComboBox.currentValue);s=h.getAttributesInternalName(o,c,i);var l=!1,d=null;if(t.is(s))if(r.length>0&&r.indexOf(s)>-1&&(d=u.get("searchAttributes.excludeAttrWarning"),l=!0),n.length>0&&!1===l&&n.indexOf(s)>-1&&(d=u.get("searchAttributes.AttributeWarning"),l=!0),!1===l){j.className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";var p={cardDiv:_.moreAttrCard,datasource:o,type:c,textOnCard:i,tabName:"SearchControl_SearchAttributes",deleteOption:!0};h.buildCardBlockRow(p),h.enableButtons()}else{var g=h.createWdgAlert();g.inject(widget.body,"top"),g.add({className:"warning applyChangesAlert",message:d})}_.moreAttrComboBox.selectedIndex=-1}});var F=e.create("div",{class:"search_center_div_card search_center_top_margin"}).inject(B);_.moreAttrCard=e.create("div",{class:"card search_center_card_panel",id:"SearchAttributes_moreAttr"}).inject(F)},getTabInputsToStore:function(){var e={},r=[],a=h.getLocalCacheForAttribute();if(t.is(a,"array")&&a.length>0)r=a;else{var n={};n.source=h.getDatasourceInternalName(_.datasourceComboBox.currentValue),n.uri=h.getTypesInternalName(n.source,_.selectTypeComboBox.currentValue);for(var i=[],s=_.preferredAttrCard.childNodes.length,o=0;o<s;o++){var c={};c.uri=_.preferredAttrCard.childNodes[o].getAttribute("sccURI"),t.is(c.uri)&&i.push(c)}n.predicates=i;for(var l=[],d=_.moreAttrCard.childNodes.length,u=0;u<d;u++){var p={};p.uri=_.moreAttrCard.childNodes[u].getAttribute("sccURI"),t.is(p.uri)&&l.push(p)}n.excluded_predicates=l,r.push(n)}return e["ds6w:type"]=r,e},isThisNotARootPredicates:function(e){return""!==e.subPropertyOf},filter6WRootPredicates:function(e){var t,r={},a={},n=[];if(e.ds6w.properties.length>0){var i=(t=e.ds6w.properties).length;if(void 0!==t&&i>0){e.ds6w.properties=t.filter(this.isThisNotARootPredicates),t.sort(function(e,t){var r=e.label;r=r.toUpperCase();var a=t.label;return r<(a=a.toUpperCase())?-1:r>a?1:0});for(var s=0;s<i;s++)"ds6w:project"!==t[s].curi&&"ds6w:community"!==t[s].curi&&(n.push(t[s].label),a[t[s].curi]=t[s].label,_._attributesMap[t[s].curi]=t[s].label)}}return r.predicates=n,r.typeMap=a,r},getPredicatesObject:function(){return new r(function(e,t){var r={onComplete:function(t){UWA.log("Got a predicates result!"+t),e(t)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),t(e)},tenantId:h.platformID,lang:widget.lang,apiVersion:"R2019x"};l.getFedProperties(r)})},cleanUpAttributeCards:function(){for(var e=_.preferredAttrCard.childElementCount-1;e>=0;e--)_.preferredAttrCard.childNodes[e].destroy();_.preferredAttrCard.parentElement.parentElement.parentElement.children[0].addClassName("search_center_div_left search_center_margin search_center_general_display_flex");for(var t=_.moreAttrCard.childElementCount-1;t>=0;t--)_.moreAttrCard.childNodes[t].destroy();_.moreAttrCard.parentElement.parentElement.parentElement.children[0].addClassName("search_center_div_left search_center_margin search_center_general_display_flex")},onResetTab:function(e){var r;r=t.is(e,"string")?JSON.parse(e):e,h.clearLocalCacheForAttribute();if(this.cleanUpAttributeCards(),t.is(r)&&r.hasOwnProperty("ds6w:type")){var a=r["ds6w:type"];if(t.is(a,"array")){var n=t.clone(a,!0);h.setLocalCacheForAttribute(n);var i=a[a.length-1],s=i.source,o=i.uri,c=i.predicates,l=i.excluded_predicates,d=h.getDatasourceDisplayName(s);_.datasourceComboBox.elementsList.length>0&&(_.datasourceComboBox.currentValue=d,_.getAttributesPromise().then(function(){if(_.selectTypeComboBox.elementsList.length>0){var e=h.getTypesDisplayName(s,o);if(t.is(e)&&e===_.selectTypeComboBox.currentValue){if(t.is(c)&&c.length>0){_.preferredAttrCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";for(let e=0;e<c.length;e++){let t=c[e].uri,r=_._attributesMap[t],a={cardDiv:_.preferredAttrCard,datasource:s,type:o,textOnCard:r,uri:t,tabName:"SearchControl_SearchAttributes",deleteOption:!0};h.buildCardBlockRow(a)}}if(t.is(l)&&l.length>0){_.moreAttrCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";for(let e=0;e<l.length;e++){let t=l[e].uri,r=_._attributesMap[t],a={cardDiv:_.moreAttrCard,datasource:s,type:o,textOnCard:r,uri:t,tabName:"SearchControl_SearchAttributes",deleteOption:!0};h.buildCardBlockRow(a)}}}else _.selectTypeComboBox.currentValue=e,!1===h.isButtonDisabled()&&h.disableButtons()}}))}}},enableUI:function(){_.divDataSourceDisplaySpan.removeClassName("search_center_disable"),_.divAdvanceSearchSpan.removeClassName("search_center_disable")},disableUI:function(){_.divDataSourceDisplaySpan.addClassName("search_center_disable"),_.divAdvanceSearchSpan.addClassName("search_center_disable")}};return _}),define("DS/SearchControlCenter/scripts/SearchcontrolSearchTypes",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","DS/UIKIT/Popover","DS/UIKIT/Mask","DS/SearchControlCenter/scripts/SearchcontrolSearchAttributes","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/SNInfraUX/SearchLogin","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SNVocabAccess"],function(e,t,r,a,n,i,s,o,c,l,d,u,h){"use strict";var _={datasourceComboBox:null,typeComboBox:null,prefferedTypeDiv:null,moreTypeDiv:null,moreTypesdatasourceComboBox:null,moreTypestypeComboBox:null,defaultDatasourceComboBox:null,defaultTypeComboBox:null,checkboxInstanceSearch:null,checkboxTypeDisplay:null,preferredTypesCard:null,moreTypesCard:null,preferredTypesMap:{},excludeTypesMap:{},listofItemsArray:[],listofDatasourcesArray:[],_defaultDatasource:null,onRenderFacet:function(o){var l=e.create("div",{class:"search_center_main_div",id:"search-center-Types"}).inject(o),d=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(l),p=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"search-type-display-text"}).inject(d),g=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-type-display-toggle"}).inject(d);_.checkboxTypeDisplay=new r({type:"checkbox",label:c.get("searchType.typeDisplay"),className:"primary",touchMode:"true"}).inject(g),e.create("p",{class:"search_center_text",text:c.get("searchType.Title")}).inject(p);var f=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-instance-search"}).inject(l),C=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"search-type-display-text"}).inject(f),m=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-type-instance-toggle"}).inject(f);_.checkboxInstanceSearch=new r({type:"checkbox",label:c.get("searchType.instanceSearch"),className:"primary",touchMode:"true"}).inject(m),e.create("p",{class:"search_center_text",text:c.get("searchType.instanceSearch.Title")}).inject(C);var v=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_disable",id:"search-type-display"}).inject(l),y=e.create("div",{class:"search_center_div_left search_center_general_display_flex search_center_margin ",id:"search-type-display-text"}).inject(v),b=e.create("div",{class:"search_center_div_right search_center_general_display_flex search_center_margin",id:"search-type-display-combo"}).inject(v);_.defaultDatasourceComboBox=new a({placeholder:c.get("Choose_default_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(b),b.setStyle("display","grid"),_.defaultDatasourceComboBox.elements.container.setStyle("max-width","unset"),_.defaultDatasourceComboBox.addEventListener("change",function(){u.enableButtons();var e=c.get("General.None");_.defaultDatasourceComboBox.currentValue===e&&(_.defaultDatasourceComboBox.selectedIndex=-1)}),e.create("p",{class:"search_center_text_normal",text:c.get("SearchType.DefaultDataSource")}).inject(y);var S=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(v);new n({target:S,trigger:"hover",animate:"true",position:"top",body:c.get("SearchType.DefaultDataSource.popover"),title:""});var D=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_disable search_preferred_types",id:"search-type-display"}).inject(l),A=e.create("div",{class:"search_center_div_left search_center_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(D);e.create("p",{class:"search_center_text_normal",text:c.get("searchType.Prefferedtypes.Title")}).inject(A);var x=e.create("div",{class:"search_center_div_right",id:"search-type-display-text"}).inject(D),T=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(D);new n({target:T,trigger:"hover",animate:"true",position:"top",body:c.get("searchType.Prefferedtypes.popover"),title:""});var w=e.create("div",{class:"search_center_div_datasource search_center_bottom_margin search_center_top_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(x),I=e.create("div",{class:"search_center_div_type_combo search_center_general_display_flex",id:"search-type-display-text"}).inject(w);_.datasourceComboBox=new a({placeholder:c.get("Choose_data_source"),touchMode:!0}).inject(I),_.datasourceComboBox.addEventListener("change",function(){_.typeComboBox.disabled=!1,i.mask(_.prefferedTypeDiv);var e=u.getDatasourceInternalName(_.datasourceComboBox.currentValue),r={};r.vocabId=u._datSourceToVocabID[e],r.tenantId=u.platformID,r.lang=u._language,h.loadVocabularyClasses(r,function(r){if(r.classInfos.length>0){for(var a=[],n={},s=0;s<r.classInfos.length;s++)t.is(r.classInfos[s].nlsName,"string")&&t.is(r.classInfos[s].uri)&&(a.push(r.classInfos[s].nlsName),n[r.classInfos[s].uri]=r.classInfos[s].nlsName);u.updateTypesMapping(e,n),_.typeComboBox.elementsList=a}else{_.typeComboBox.disabled=!0;var o=u.createWdgAlert(),l=c.get("SearchType.NoTypesWarning");o.inject(widget.body,"top"),o.add({className:"warning applyChangesAlert",message:l})}i.unmask(_.prefferedTypeDiv)})}),_.prefferedTypeDiv=e.create("div",{class:"search_center_div_type_combo search_center_div_left_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(w),_.typeComboBox=new a({placeholder:c.get("Add_preferred_types"),touchMode:!0}).inject(_.prefferedTypeDiv),_.typeComboBox.disabled=!0,_.typeComboBox.addEventListener("change",function(){var e=_.moreTypesCard.childNodes.length,r=[];for(let t=0;t<e;t++)r.push(_.moreTypesCard.childNodes[t].getAttribute("sccURI"));var a=_.preferredTypesCard.childNodes.length,n=[];for(let e=0;e<a;e++)n.push(_.preferredTypesCard.childNodes[e].getAttribute("sccURI"));A.className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";var i=_.typeComboBox.currentValue;if(t.is(i,"string")){var s=u.getDatasourceInternalName(_.datasourceComboBox.currentValue),o=u.getTypesInternalName(s,i),l=!1,d=null;if(t.is(o))if(r.length>0&&r.indexOf(o)>-1&&(d=c.get("SearchType.preferredTypeWarning"),l=!0),n.length>0&&!1===l&&n.indexOf(o)>-1&&(d=c.get("searchType.TypeWarning"),l=!0),!1===l){var h={cardDiv:_.preferredTypesCard,datasource:s,textOnCard:i,deleteOption:!0};u.buildCardBlockRow(h),u.enableButtons()}else{var p=u.createWdgAlert();p.inject(widget.body,"top"),p.add({className:"warning applyChangesAlert",message:d})}_.typeComboBox.selectedIndex=-1}});var N=e.create("div",{class:"search_center_div_card search_center_top_margin search_center_top_margin",id:"search-type-display-text"}).inject(x);_.preferredTypesCard=e.create("div",{class:"card search_center_card_panel",id:"SearchTypes_preferredType"}).inject(N);var j=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_disable search_excluded_types",id:"search-type-display"}).inject(l),B=e.create("div",{class:"search_center_div_left search_center_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(j);e.create("p",{class:"search_center_text_normal",text:c.get("searchType.Excludedtype.Title")}).inject(B);var O=e.create("div",{class:"search_center_div_right",id:"search-type-display-text"}).inject(j),W=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(j);new n({target:W,trigger:"hover",animate:"true",position:"top",body:c.get("searchType.Excludedtype.popover"),title:""});var P=e.create("div",{class:"search_center_div_datasource search_center_bottom_margin search_center_top_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(O),F=e.create("div",{class:"search_center_div_type_combo search_center_general_display_flex",id:"search-type-display-text"}).inject(P);_.moreTypesdatasourceComboBox=new a({placeholder:c.get("Choose_data_source"),touchMode:!0}).inject(F),_.moreTypesdatasourceComboBox.addEventListener("change",function(){_.moreTypestypeComboBox.disabled=!1,i.mask(_.moreTypeDiv);var e=u.getDatasourceInternalName(_.moreTypesdatasourceComboBox.currentValue),r={};r.vocabId=u._datSourceToVocabID[e],r.tenantId=u.platformID,r.lang=u._language,h.loadVocabularyClasses(r,function(r){if(r.classInfos.length>0){for(var a=[],n={},s=0;s<r.classInfos.length;s++)t.is(r.classInfos[s].nlsName,"string")&&t.is(r.classInfos[s].uri)&&(a.push(r.classInfos[s].nlsName),n[r.classInfos[s].uri]=r.classInfos[s].nlsName);u.updateTypesMapping(e,n),_.moreTypestypeComboBox.elementsList=a}else{_.moreTypestypeComboBox.disabled=!0;var o=u.createWdgAlert(),l=c.get("SearchType.NoTypesWarning");o.inject(widget.body,"top"),o.add({className:"warning applyChangesAlert",message:l})}i.unmask(_.moreTypeDiv)})}),_.moreTypeDiv=e.create("div",{class:"search_center_div_type_combo search_center_div_left_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(P),_.moreTypestypeComboBox=new a({placeholder:c.get("Add_excluded_types"),touchMode:!0}).inject(_.moreTypeDiv),_.moreTypestypeComboBox.disabled=!0,_.moreTypestypeComboBox.addEventListener("change",function(){var e=_.preferredTypesCard.childNodes.length,r=[];for(let t=0;t<e;t++)r.push(_.preferredTypesCard.childNodes[t].getAttribute("sccURI"));var a=_.moreTypesCard.childNodes.length,n=[];for(let e=0;e<a;e++)n.push(_.moreTypesCard.childNodes[e].getAttribute("sccURI"));B.className="search_center_set_left_div search_center_top_margin search_center_general_display_flex";var i=_.moreTypestypeComboBox.currentValue;if(t.is(i,"string")){var s=u.getDatasourceInternalName(_.moreTypesdatasourceComboBox.currentValue),o=u.getTypesInternalName(s,i),l=!1,d=null;if(t.is(o))if(r.length>0&&r.indexOf(o)>-1&&(d=c.get("SearchType.excludeTypeWarning"),l=!0),n.length>0&&!1===l&&n.indexOf(o)>-1&&(d=c.get("searchType.TypeWarning"),l=!0),!1===l){var h={cardDiv:_.moreTypesCard,datasource:s,textOnCard:i,deleteOption:!0};u.buildCardBlockRow(h),u.enableButtons()}else{var p=u.createWdgAlert();p.inject(widget.body,"top"),p.add({className:"warning applyChangesAlert",message:d})}_.moreTypestypeComboBox.selectedIndex=-1}});var R=e.create("div",{class:"search_center_div_card search_center_top_margin",id:"search-type-display-text"}).inject(O);_.moreTypesCard=e.create("div",{class:"card search_center_card_panel",id:"SearchTypes_moreType"}).inject(R);var M=[];if(M.push(c.get("General.None")),u._datasourceList.length>0){let e=u._datasourceList;if(t.is(e,"array")){let r=M.concat(e);_.defaultDatasourceComboBox.elementsList=r,t.is(_._defaultDatasource)&&(_.defaultDatasourceComboBox.currentValue=_._defaultDatasource),_.datasourceComboBox.elementsList=e,_.moreTypesdatasourceComboBox.elementsList=e}}else u.getDataSourceList().then(function(e){if(t.is(e,"array")){let r=M.concat(e);_.defaultDatasourceComboBox.elementsList=r,t.is(_._defaultDatasource)&&(_.defaultDatasourceComboBox.currentValue=_._defaultDatasource,u.disableButtons()),_.datasourceComboBox.elementsList=e,_.moreTypesdatasourceComboBox.elementsList=e}});_.checkboxTypeDisplay.addEventListener("change",function(){u.enableButtons(),!1===_.checkboxTypeDisplay.checkFlag?(f.addClassName("search_center_disable"),D.addClassName("search_center_disable"),j.addClassName("search_center_disable"),v.addClassName("search_center_disable"),s.disableUI()):(f.removeClassName("search_center_disable"),D.removeClassName("search_center_disable"),j.removeClassName("search_center_disable"),v.removeClassName("search_center_disable"),s.enableUI())}.bind(this)),_.checkboxInstanceSearch.addEventListener("change",function(){if(u.enableButtons(),!0===_.checkboxInstanceSearch.checkFlag){var e=u.createWdgAlert(),t=c.get("SearchType.InstanceSearchWarning");e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:t})}}),s.onRenderFacet(o)},getTabInputsToStore:function(){var e={type_display:_.checkboxTypeDisplay.checkFlag,SEARCH_INSTANCES:_.checkboxInstanceSearch.checkFlag},r=[],a={},n=u.getDatasourceInternalName(_.defaultDatasourceComboBox.currentValue);t.is(n)&&(a.source=n,r.push(a)),e.default_datasourceandtype=r;for(var i=[],o=_.preferredTypesCard.childNodes.length,c=0;c<o;c++){var l={};l.uri=_.preferredTypesCard.childNodes[c].getAttribute("sccURI"),l.source=_.preferredTypesCard.childNodes[c].getAttribute("sccDataSource"),t.is(l.uri)&&t.is(l.source)&&i.push(l)}e.easyTypeAccess=i;for(var d=[],h=_.moreTypesCard.childNodes.length,p=0;p<h;p++){var g={};g.uri=_.moreTypesCard.childNodes[p].getAttribute("sccURI"),g.source=_.moreTypesCard.childNodes[p].getAttribute("sccDataSource"),t.is(g.uri)&&t.is(g.source)&&d.push(g)}e.excluded_types=d;var f=s.getTabInputsToStore(),C={};return C.SearchControl_SearchTypes=e,C.SearchControl_SearchAttributes=f,C},onResetTab:function(e){for(var r=_.preferredTypesCard.childElementCount-1;r>=0;r--)_.preferredTypesCard.childNodes[r].destroy();_.preferredTypesCard.parentElement.parentElement.parentElement.children[0].addClassName("search_center_div search_center_general_display_flex");for(var a,n,i,o=_.moreTypesCard.childElementCount-1;o>=0;o--)_.moreTypesCard.childNodes[o].destroy();if(_.moreTypesCard.parentElement.parentElement.parentElement.children[0].addClassName("search_center_div search_center_general_display_flex"),(a=t.is(e,"string")?JSON.parse(e):e).hasOwnProperty("type_custo")&&(n=a.type_custo),a.hasOwnProperty("attribute_custo")&&(i=a.attribute_custo,s.onResetTab(i)),t.is(n)){if(n.hasOwnProperty("type_display")){var c=n.type_display;t.is(c)&&(_.checkboxTypeDisplay.checkFlag=c)}if(n.hasOwnProperty("SEARCH_INSTANCES")){var h=n.SEARCH_INSTANCES;t.is(h)&&(_.checkboxInstanceSearch.checkFlag=h)}else _.checkboxInstanceSearch.checkFlag=!1;if(n.hasOwnProperty("default_datasourceandtype")){var p=n.default_datasourceandtype;if(t.is(p)&&p.length>0){var g=p[p.length-1],f=u.getDatasourceDisplayName(g.source);_.defaultDatasourceComboBox.elementsList.length>0?_.defaultDatasourceComboBox.currentValue=f:_._defaultDatasource=f}else _.defaultDatasourceComboBox.selectedIndex=-1}else _.defaultDatasourceComboBox.selectedIndex=-1;var C=[],m=[],v=[],y=[];if(n.hasOwnProperty("easyTypeAccess")){var b=n.easyTypeAccess;if(t.is(b,"array"))for(let e=0;e<b.length;e++){let r=b[e].uri,a=b[e].source;t.is(a)&&m.push(a),t.is(r)&&C.push(r)}}if(n.hasOwnProperty("excluded_types")){var S=n.excluded_types;if(t.is(S,"array"))for(let e=0;e<S.length;e++){let r=S[e].uri,a=S[e].source;t.is(a)&&v.push(a),t.is(r)&&y.push(r)}}var D=C.concat(y),A=m.concat(v);if(D.length>0&&A.length>0&&D.length===A.length){let e=[],r=!0;for(let a=0;a<D.length;a++){let n=D[a];if(t.is(n)){let i=u.getTypesDisplayName(A[a],n);t.is(i)||(r=!1);let s=n.indexOf(":");if(s>=0){let t=n.substr(s+1);e.push(t)}else e.push(n)}}if(r){let e=!1;for(let t=0;t<C.length;t++){let r=u.getTypesDisplayName(m[t],C[t]),a={cardDiv:_.preferredTypesCard,datasource:m[t],textOnCard:r,uri:C[t],deleteOption:!0};u.buildCardBlockRow(a),e=!0}!0===e&&(_.preferredTypesCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex",e=!1);for(let t=0;t<y.length;t++){let r=u.getTypesDisplayName(v[t],y[t]),a={cardDiv:_.moreTypesCard,datasource:v[t],textOnCard:r,uri:y[t],deleteOption:!0};u.buildCardBlockRow(a),e=!0}!0===e&&(_.moreTypesCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex")}else{for(var x=[],T=0;T<A.length;T++)x.push({value:e[T],source:[d.getServiceFromSource(A[T])]});l.getNlsOfPropertiesValuesBySource({"ds6w:type":x},{tenantId:u.platformID,lang:u._language,onComplete:function(e){let t=e["ds6w:type"],r=!1;for(let e=0;e<C.length;e++){let a=null,n=C[e].indexOf(":"),i=t[a=n>=0?C[e].substr(n+1):C[e]],s={cardDiv:_.preferredTypesCard,datasource:m[e],textOnCard:i,uri:C[e],deleteOption:!0};u.buildCardBlockRow(s),r=!0}!0===r&&(_.preferredTypesCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex",r=!1);for(var a=0;a<y.length;a++){let e=null,n=y[a].indexOf(":"),i=t[e=n>=0?y[a].substr(n+1):y[a]],s={cardDiv:_.moreTypesCard,datasource:v[a],textOnCard:i,uri:y[a],deleteOption:!0};u.buildCardBlockRow(s),r=!0}!0===r&&(_.moreTypesCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex")},onFailure:function(){let e=!1;for(let t=0;t<C.length;t++){let r={cardDiv:_.preferredTypesCard,datasource:m[t],textOnCard:C[t],uri:C[t],deleteOption:!0};u.buildCardBlockRow(r),e=!0}!0===e&&(_.preferredTypesCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex",e=!1);for(let t=0;t<y.length;t++){let r={cardDiv:_.moreTypesCard,datasource:v[t],textOnCard:y[t],uri:y[t],deleteOption:!0};u.buildCardBlockRow(r),e=!0}!0===e&&(_.moreTypesCard.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_top_margin search_center_general_display_flex")}})}}}u.removeMask(widget.body)}};return _}),define("DS/SearchControlCenter/scripts/SCCTagColorizationHelper",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchLogin","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchPreferences"],function(e,t,r,a,n,i,s,o,c){"use strict";return{getAllPredicates:function(e){var a=this;return new t(function(t,n){var i={};a.getAllTags().then(function(n){var s=a._getPredicateValuesWithSource(n);a._mergeTags(s,e),i.sourceInfo=s,a.getPredicateValuesNls(s).then(function(e){var a=Object.keys(e).map(function(e){return e.split("/").pop()});r.getResourcesInfo(a.join(","),{tenantId:o.getPlatformID(),onComplete:function(r){var a={};r.vocabularyElementNLSInfo.forEach(function(e){a[e.uri]=e.nlsName}),Object.keys(e).forEach(function(t){e[t].nls=a[t.split("/").pop()]}),i.colorization=e,t(i)},onFailure:function(){i.colorization={},t(i)}})})})})},getAllTags:function(){var r=this;return new t(function(t,s){var l=e.is(n.getOption("tagColorQuery"))?n.getOption("tagColorQuery"):e.is(c.getItem("tagColorQuery"))?c.getItem("tagColorQuery"):"[ds6w:modified]>1970/01/01";c.setItem("tagColorQuery",l);var d={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({with_indexing_date:!0,with_nls:!1,label:"3DSearch-SCC-TagColorization"+i.getUserId()+"-"+(new Date).getTime(),locale:i.getLanguage(),query:l,refine:{},specific_source_parameter:{},select_predicate:["ds6w:label"],source:[],tenant:o.getPlatformID(),nresults:1,order_by:"desc",order_field:"relevance",start:0,with_synthesis:!0})};r.get3DSearchSericeURLPromise().then(function(e){d.onComplete=function(e){var a=JSON.parse(e),n=r._removeUnsupportedTagValues(a.facets);t(n)},d.onFailure=function(e){s(e)},a.authenticatedRequest(e+"/search",d)})})},_removeUnsupportedTagValues:function(t){var r=[];if(e.is(t,"array")){var a=n.getOption("tagColorization");r=t.filter(function(e){return a.supported_value_types.indexOf(e.type)>=0&&a.unsupported_predicates.indexOf(e.sixw)<0})}return r},getPredicateValuesNls:function(r){var a=this;return new t(function(t,n){var i={},o={},c={};e.is(r)&&(Object.keys(r).forEach(function(e){i[e]||(i[e]=[]),Object.keys(r[e]).forEach(t=>{i[e].push({value:t,source:[s.getServiceFromSource(r[e][t])]})})}),Object.keys(i).forEach(function(e){var t=e.split("/").pop();o[t]=i[e]}),a.getTagValuesNls(o).then(function(e){Object.keys(i).forEach(function(t){var r=t.split("/").pop();c[t]||(c[t]={values:e[r]})}),t(c)}))})},getTagValuesNls:function(e){return new t(function(t,a){r.getNlsOfPropertiesValuesBySource(e,{tenantId:o.getPlatformID(),lang:i.getLanguage(),onComplete:function(e){t(e)},onFailure:function(){t({})}})})},get3DSearchSericeURLPromise:function(){return i.getSericeURLPromise(o.getPlatformID(),"3DSearch")},_getPredicateValuesWithSource:function(t){var r={};return e.is(t,"array")&&t.forEach(t=>{if(e.is(t.object,"string")){var a=t.sixw;r[a]||(r[a]={}),r[a][t.object]=t.sources[0]}}),r},_mergeTags:function(t,r){e.is(t)&&e.is(r)&&Object.keys(r).forEach(a=>{e.is(t[a])?t[a]=e.merge(t[a],r[a]):t[a]=e.clone(r[a],!0)})}}}),define("DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Promise","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/Api/SearchApi","DS/SNInfraUX/SearchRessources","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/Logger","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/SearchControlCenterServices","text!DS/SearchControlCenter/assets/Ontology_Datasets.json"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_,p,g,f){"use strict";let C=t.singleton(r,{_treeDocument:null,_distributionServiceURLPromise:null,_ontologyServiceURLPromise:null,_urldistribution:"/3drdfpersist/governance/v3/datasets/",_distribution:"/distributions?mask=standard",_urlontology:"/3drdfklet/resources/v1/concepts/ds6wclassifier:Root/concepts?recurse=all&relation=broaderOf&offset=0&sessionId=",_testQA:p.getOption("allowEnterpriseDictionaryModification"),init:function(){this._distributionServiceURLPromise=C._getSericeURLPromise("lakegovernance"),this._ontologyServiceURLPromise=C._getSericeURLPromise("ontology"),this._treeDocument=new s({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}})},buildSearchResults:function(t){let r=this;e.is(t)&&e.is(t.onComplete,"function")&&(e.is(r._treeDocument)&&e.is(r._treeDocument.destroy,"function")&&(r._treeDocument.destroy(),r._treeDocument=null),r._treeDocument=new s({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}}),h.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_buildSearchResults"),r._getResultPromise().then(function(a){h.log("response OK"),r._treeDocument.prepareUpdate();let n=JSON.parse(a);e.is(n.datasets)&&n.datasets.forEach(function(e){let t={},a=!1;t.id=e["@id"],t.label=e.title,t.description=e.description,t.tooltip=e.description,a=!0;{let e=new o(t);r._treeDocument.addRoot(e)}}),r._treeDocument.pushUpdate(),t.onComplete.call(void 0,r._treeDocument),h.groupEnd()},function(){if(h.log("response KO"),!0===r._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],function(a){let n=JSON.parse(a);if(e.is(n,"array")){let a=n.length;r._treeDocument.prepareUpdate();for(let e=0;e<a;e++){let t=new o({id:n[e].dataset,label:n[e].datasetTitle});r._treeDocument.addRoot(t)}r._treeDocument.pushUpdate(),e.is(t.onFailure,"function")&&t.onFailure.call(void 0,r._treeDocument)}})}h.groupEnd()}))},setselected:function(t){if(!e.is(t,"array")||!e.is(this._treeDocument))return;let r=!1;this._treeDocument.prepareUpdate();let a=t.length,n=this._treeDocument.getRoots(),i=n.length;for(let s=0;s<a;s++){let a=t[s],o=a&&a.datasetTitle;if(e.is(o)&&o.length)for(let e=0;e<i;e++){let t=n[e];t&&t._options.label===o&&(t.select(),e=i,r=!0)}}return this._treeDocument.pushUpdate(),r},getConceptsOfConcept:function(t){let r;if(e.is(t)&&e.is(t.onComplete,"function")&&(r=e.is(t.sessionsId)?t.sessionsId:void 0,e.is(r))){let a=this;C._getontologySericeURLPromise().then(function(i){let s={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(r,a){let n=JSON.parse(r);e.is(n)&&t.onComplete.call(void 0,n)},onFailure:function(e){h.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getConceptsOfConcept onFailure: ",e)}},o=i+a._urlontology+r;n.authenticatedRequest(o,s)},function(){reject("Failed to retireve distribution service url")})}},getDataSetStructure:function(t){let r=this;if(h.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getDataSetStructure"),!e.is(r._treeDocument)||!e.is(t)||!e.is(t.onComplete,"function"))return void h.groupEnd();let a=r._treeDocument.getXSO().get(),n=a.length;if(n){let i=a[n-1],s={id:i._options.id,object:i._options,onComplete:function(r){if(e.is(r,"object")){let e={dataset:i._options.id,datasetTitle:i._options.label,sessionId:r.identifier,"session@id":r["@id"],sessionTitle:r.title};t.onComplete.call(void 0,e),h.log("onComplete: ",e),h.groupEnd()}},onFailure:function(){if(!0===r._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],function(r){let a=JSON.parse(r);for(let r=0;r<a.length;r++){let n=a[r];if(n.datasetTitle===i._options.label){e.is(t.onFailure,"function")&&t.onFailure.call(void 0,n),h.log("onFailure: ",n);break}}})}h.groupEnd()}};r._querydistributions(s)}else t.onComplete.call(void 0,void 0),h.groupEnd()},clean:function(){e.is(this._treeDocument)&&e.is(this._treeDocument.removeRoots,"function")&&this._treeDocument.removeRoots(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},destroy:function(){this._parent(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},_getResultPromise:function(){let t=this;return new a(function(r,a){h.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_getResultPromise");let i=t._getTenant();require(["DS/UWPClientCode/PublicAPI","DS/PlatformAPI/PlatformAPI"],function(t,s){var o;if(t.getApplicationConfiguration("app.urls.registry")||s.getApplicationConfiguration("app.urls.registry"))o=t.getApplicationConfiguration("app.urls.registry")||s.getApplicationConfiguration("app.urls.registry");else{o=`${t.getApplicationConfiguration("app.urls.myapps")||s.getApplicationConfiguration("app.urls.myapps")}/resources/AppsMngtRegistry/`}o?(h.log("registryUrl found, registryUrl="+o),_.getServicesByPlatform({platforms:[i],services:["lakegovernance"],config:{url:o}}).then(function(t){if(h.log("i3DXCompassRegistryClient.getServicesByPlatform returns: "+JSON.stringify(t)),Array.isArray(t)&&t.length>0&&Array.isArray(t[0].services)&&t[0].services.length>0&&t[0].services[0].url){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){r(e.extend(t))},onFailure:function(e){a(e)}},s=t[0].services[0].url+"/3drdfpersist/governance/v3/datasets";n.authenticatedRequest(s,i)}else h.error("i3DXCompassRegistryClient.getServicesByPlatform did not provide data in expected format"),r([])},function(){h.error("i3DXCompassRegistryClient.getServicesByPlatform FAILED"),r([])})):(h.error("FAILED to retrieve registryUrl"),r([]))})})},_buildSearchQuery:function(){let t=this,r=JSON.parse(f);if(e.is(r,"object")){let e=t._getTenant(),a=r.nresults?r.nresults:p.getOption("max_selection_for_selectall",{tenant:e});r.tenant=e,r.nresults=a}return r},_querydistributions:function(t){if(h.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions"),!e.is(t)||!e.is(t.id))return;let r=this;C._getdistributionSericeURLPromise().then(function(a){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(r,a){let n=JSON.parse(r);if(e.is(n,"object")){let r=n.distributions;if(e.is(r,"array")){let a=r.length,n=0;for(;n<a;n++){let a=r[n];e.is(a,"object")&&e.is(a.identifier,"string")&&t.onComplete.call(void 0,a)}}}},onFailure:function(e){h.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions onFailure: ",e),t.onFailure.call(void 0,e)}},s=a+r._urldistribution+t.id+r._distribution;n.authenticatedRequest(s,i)},function(){reject("Failed to retireve distribution service url")})},_getSericeURLPromise:function(e){let t=this;return new a(function(r,a){let n=t._getTenant();i.getServiceUrl({serviceName:e,platformId:n,onComplete:function(e){e?r(e):!0===t._testQA?r(e):a()},onFailure:function(e){a(e)}})})},_getdistributionSericeURLPromise:function(){return this._distributionServiceURLPromise},_getontologySericeURLPromise:function(){return this._ontologyServiceURLPromise},_getTenant:function(){return e.is(g.platformID)?g.platformID:u.getActiveTenant()}});return C}),define("DS/SearchControlCenter/scripts/SCCTagColorization",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/ComboBox","DS/UIKIT/Popover","DS/SearchControlCenter/control/SCCCard","DS/SearchControlCenter/control/SCCColorPicker","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorizationHelper","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/Controls/Toggle","DS/Controls/LineEditor","DS/SNInfraUX/SearchPreferences","DS/SNInfraUX/SearchSettings"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_){"use strict";return{_tagColorizeMap:null,_parentDiv:null,_predicateToCBMap:null,render:function(e){this._parentDiv=e,this._tagColorizeMap={},this._predicateToCBMap=new Map},onRender:function(r){var i=this;i.tabSettings=r,i._cleanupUI();var s=t.is(i.tabSettings)&&t.is(i.tabSettings.sourceInfo)?i.tabSettings.sourceInfo:void 0;c.getAllPredicates(s).then(function(r){i.tagsToShowInCB=t.clone(r.colorization,!0),i.tagsSource=t.clone(r.sourceInfo,!0),i.div6WtagsColorizeSpan=e.create("div",{id:"search-center-tag-colorize"}).inject(i._parentDiv);var s=e.create("div",{class:"search_center_general_tab_div search_center_margin"}).inject(i.div6WtagsColorizeSpan),o=e.create("div",{class:"search_center_div_left search_center_margin search_center_general_display_flex search_center_6Wtags_align",id:"div_tag_olorize_text"}).inject(s);e.create("p",{class:"search_center_text",text:l.get("6WTagsFilter.ColorizeTagTitle")}).inject(o);var c=e.create("div",{class:"search_center_div_right",id:"div_tag_colorize_card_combo_span"}).inject(s);_.getOption("updateQuery")&&i._changeSearchQueryUI().inject(c);var d=e.create("div",{class:"search_center_div_datasource search_center_only_grid search_center_top_margin",id:"div_tag_colorize_combo_span"}).inject(c);i.tagColorizePredicatesComboBox=new a({elementsList:i._predicateToShowCB(),placeholder:l.get("6WTagsFilter.ColorizeTag.PredicateComboBox.placeholder"),touchMode:!0,mainElementVisibleFlag:!0}).inject(d),i.divTagColorizeCardSpan=e.create("div",{class:"div-tag-colorize-card-span",id:"div_tag_colorize_card_span"}).inject(c);var u=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(s);new n({target:u,trigger:"hover",animate:"true",position:"top",body:l.get("6WTagsFilter.ColorizeTag.PredicateComboBox.info"),title:""}),i.tagColorizePredicatesComboBox.addEventListener("hide",i._onChangePredicates.bind(i),!1),t.is(i.tabSettings)&&i._createCardsWithStoredPredicates(i.tabSettings.colorization)})},_createCardsWithStoredPredicates:function(e){var r=this;t.is(e)&&Object.keys(e).length>0&&Object.keys(e).forEach(function(t){var a=e[t],n=r._createPredicateCard(t);Object.keys(r._storedValueToShow(t,a)).forEach(function(e){r._createPredicateValueCard(n.getBodyElement(),t,e,a[e])})})},_onChangePredicates:function(e){if(-1!==e.dsModel.selectedIndex){e.stopPropagation();var t=e.dsModel.value;e.dsModel.currentLabel;this._createPredicateCard(t),e.currentTarget.dsModel.selectedIndex=-1}},_createPredicateCard:function(r){var n=this,s=n.tagsToShowInCB[r].nls;if(n._isPredicateCardAlreadyPresent(r)){var o=l.get("6WTagsFilter.ColorizeTag.warning.predicateExist");this._showWarningAlert(o)}else{if(!(t.is(n._tagColorizeMap,"object")&&Object.keys(n._tagColorizeMap).length>=100)){var c=e.create("div",{class:"div-scc-card-container"}).inject(this.divTagColorizeCardSpan),d=new i({header:{label:s,value:r},closable:!0,isBodyRequired:!0,className:"scc-predicate-card"}).inject(c),u=e.create("div",{class:"div-tag-colorize-combo-box search_center_only_grid"}),h=new a({elementsList:n._valueToShowInCB(r),placeholder:l.get("6WTagsFilter.ColorizeTag.ValueComboBox.placeholder"),touchMode:!0,mainElementVisibleFlag:!0}).inject(u);return d.appendChildToBody(u),n._storePredicateInMemory(r),n._predicateToCBMap.set(r,h),h.addEventListener("hide",function(e){n._onChangeValues(e,r)},!1),d.addEvent("onClose",function(e){n._removePredicate(e,r)}),n._removeFromCBModel(this.tagColorizePredicatesComboBox,r),d}o=l.get("6WTagsFilter.ColorizeTag.warning.predicateExeedsLimit");this._showWarningAlert(o)}},_onChangeValues:function(e,t){if(e.stopPropagation(),o.enableButtons(),-1!==e.dsModel.selectedIndex){e.dsModel.currentLabel;var r=e.dsModel.currentValue,a=e.currentTarget.getParent().getParent();this._createPredicateValueCard(a,t,r),e.dsModel.selectedIndex=-1}},_createPredicateValueCard:function(r,a,n,o){var c=this;if(c._isValueCardAlreadyPresent(a,n)){var d=l.get("6WTagsFilter.ColorizeTag.warning.predicateValueExist");this._showWarningAlert(d)}else{var u=c._tagColorizeMap[a];if(t.is(u,"object")&&Object.keys(u).length>=21){d=l.get("6WTagsFilter.ColorizeTag.warning.valueExeedsLimit");this._showWarningAlert(d)}else{var h=c.tagsToShowInCB[a].values[n],_=e.create("div",{class:"div-tag-colorize-predicate-value scc-card-flex"}),p=new s({initialValue:o}).inject(_),g=new i({header:{label:h,value:n},closable:!0,isBodyRequired:!1,className:"scc-predicate-value-card"}).inject(_);_.inject(r),this._storePredicateValuesInMemory(a,n,p._getCurrentColor()),p.addEvent("onColorChange",function(e){c._onColorChange(e,a,n)}),g.addEvent("onClose",function(e){c._removePredicateValue(e,a,n)}),c._removeFromCBModel(c._predicateToCBMap.get(a),n)}}},_onColorChange:function(e,t,r){o.enableButtons(),this._storePredicateValuesInMemory(t,r,e.color)},_removePredicateValue:function(e,t,r){var a=e.target;o.enableButtons(),this._addToCBModel(this._predicateToCBMap.get(t),r,this.tagsToShowInCB[t].values[r]),this._removePredicateValueFromMemory(t,r),a.getParent().destroy()},_removePredicate:function(e,t){var r=e.target;o.enableButtons(),this._removePredicateFromMemory(t),this._addToCBModel(this.tagColorizePredicatesComboBox,t,this.tagsToShowInCB[t].nls),this._predicateToCBMap.delete(t),r.getParent().destroy()},getInputsToStore:function(){var e=this,r={};r.colorization=t.clone(this._tagColorizeMap,!0);var a={};return Object.keys(e._tagColorizeMap).forEach(t=>{Object.keys(e._tagColorizeMap[t]).forEach(r=>{a[t]||(a[t]={}),a[t][r]=e.tagsSource[t][r]})}),r.sourceInfo=a,e.tabSettings=r,r},_storePredicateInMemory:function(e){t.is(e)&&(t.is(this._tagColorizeMap[e])||(this._tagColorizeMap[e]={}))},_storePredicateValuesInMemory:function(e,r,a){if(t.is(e)&&t.is(r)&&t.is(a)){t.is(this._tagColorizeMap[e])||(this._tagColorizeMap[e]={});var n=this.tagsToShowInCB[e].values[r],i=this;Object.keys(this.tagsToShowInCB[e].values).forEach(function(t){i.tagsToShowInCB[e].values[t]==n&&(i._tagColorizeMap[e][t]=a)})}},_removePredicateValueFromMemory:function(e,r){if(t.is(e)&&t.is(r)){var a=this.tagsToShowInCB[e].values[r],n=this;Object.keys(this._tagColorizeMap[e]).forEach(function(t){n.tagsToShowInCB[e].values[t]==a&&delete n._tagColorizeMap[e][t]})}},_removePredicateFromMemory:function(e){t.is(e)&&delete this._tagColorizeMap[e]},_predicateToShowCB:function(){var e=this,t=[];return Object.keys(e.tagsToShowInCB).forEach(function(r){t.push({label:e.tagsToShowInCB[r].nls,value:r})}),t},_removeFromCBModel:function(e,r){var a=e.elementsList;if(t.is(a,"array")&&a.length>0){var n=t.clone(a,!0);n.forEach((t,a)=>{if(t.value===r)return n.splice(a,1),void(e.elementsList=n)})}},_addToCBModel:function(e,r,a){var n=e.elementsList;if(t.is(n,"array")){var i=t.clone(n,!0);i.push({label:a,value:r}),e.elementsList=i}},_valueToShowInCB:function(e){var t=this,r=[],a={};return Object.keys(t.tagsToShowInCB[e].values).forEach(function(n){var i=t.tagsToShowInCB[e].values[n];a[i]||(r.push({label:i,value:n}),a[i]=!0)}),r},_storedValueToShow:function(e,t){var r={},a={},n=this;return Object.keys(t).forEach(function(i){var s=n.tagsToShowInCB[e].values[i];r[s]||(a[i]=t[i],r[s]=!0)}),a},_isPredicateCardAlreadyPresent:function(e){return t.is(this._tagColorizeMap[e])},_isValueCardAlreadyPresent:function(e,r){return t.is(this._tagColorizeMap[e][r])},_showWarningAlert:function(e){var t=o.createWdgAlert();t.inject(widget.body,"top"),t.add({className:"warning applyChangesAlert",message:e})},_cleanupUI:function(){t.is(this.div6WtagsColorizeSpan)&&(this.div6WtagsColorizeSpan.destroy(),this.div6WtagsColorizeSpan=null),this._tagColorizeMap={},this._predicateToCBMap.clear()},_changeSearchQueryUI:function(){var t=this,r=e.create("div",{class:"div-change-search-query"}),a=e.create("div",{class:"div-change-search-query-toggle"}).inject(r),n=new d({type:"checkbox",label:l.get("6WTagsFilter.ColorizeTag.ChnageQuery.label"),checkFlag:!1,value:0}).inject(a),i=e.create("div",{class:"div-change-search-query-editor scc-card-flex search_center_disable",disabled:!0,styles:{height:"36px",border:"solid 1px #c9baba","border-radius":"4px"}}).inject(r),s=e.create("input",{placeholder:l.get("6WTagsFilter.ColorizeTag.ChnageQuery.placeholder"),type:"search",value:h.getItem("tagColorQuery"),styles:{width:"100%",border:"none","margin-left":"5px"}}).inject(i);e.create("div",{class:"fonticon fonticon-update",styles:{right:"12px",cursor:"pointer","margin-top":"6px","margin-right":"6px"},events:{click:function(){h.setItem("tagColorQuery",s.value),t.onRender(t.tabSettings)}}}).inject(i);return n.addEventListener("buttonclick",function(e){e.stopPropagation(),e.dsModel.checkFlag?i.removeClassName("search_center_disable"):i.addClassName("search_center_disable")}),r}}}),define("DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/WUXAutoComplete/AutoComplete","DS/Controls/ComboBox","DS/UIKIT/Popover","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,r,a,n,i,s,o,c,l,d){"use strict";return{_structureToStore:[],_structureStored:null,_mainControlDivSection:null,_warningReport:"",_deletedConcepts:!1,_hierarchicalFatherMovement:!1,_duplicateConcepts:!1,render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},destroy:function(){this._parent(),t.is(c)&&t.is(c.destroy,"function")&&(c.destroy(),c=null)},getTabInputsToStore:function(){return this._structureToStore},getInputFromStore:function(e){!0===o.getOption("allowEnterpriseDictionaryModification")?(this._structureToStore=[],this._structureStored=e):t.is(e,"array")&&0!==e.length&&(this._structureStored=e,this._structureToStore=e)},getSelectedDatasetTitle:function(){return this.datasetAutocomplete.value},onUpdateUI:function(){let e=!1;this._structureStored&&this._structureStored.length?e=!0:this._structureToStore&&this._structureToStore.length&&(e=!0),!0===e||(this.datasetAutocomplete.value="",this.datasetAutocomplete.elementsTree=void 0,c.clean(),this.buildSearchResults())},renderControlledSection:function(t){this._mainControlDivSection=e.create("div",{class:"search_center_main_div",id:"control-Ontology-main"}).inject(t);e.create("div",{class:"",id:"control-Ontology-title"}).inject(this._mainControlDivSection);this.renderDataSetSection(this._mainControlDivSection)},renderDataSetSection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection)},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{}).inject(t);var r=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),a=this._createDatasetControl({class:"control_vocab_community_title",divRow:r});this.datasetAutoCompleteDiv=a},_createAddCategoryRowSpan:function(t){var r=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return r.addClassName("control_vocab_add_category_row_span"),r},_createDatasetControl:function(t){var r=e.create("div",{class:t.class,id:"Ontology_DataSet_Combo"}).inject(t.divRow);return this.datasetAutocomplete=new i({placeholder:d.get("6WTagsFilter.ControlledOntology.Dataset.title"),touchMode:!0,enableSearchFlag:!0,allowFreeInputFlag:!1,multiSearchMode:!0===o.getOption("allowEnterpriseDictionaryModification")}).inject(r),this.datasetAutocomplete.elements.container.setStyle("width","100%"),this.datasetAutocomplete.addEventListener("change",this._onChangeDataset.bind(this)),this.buildSearchResults(),this.datasetAutocomplete},buildSearchResults:function(){let e=this,r={onComplete:function(r){t.is(r)&&(e.datasetAutocomplete.elementsTree=r)},onFailure:function(r){t.is(r)&&(e.datasetAutocomplete.elementsTree=r)}};c.buildSearchResults(r)},_onChangeDataset:function(e){let r=this,a=!0,n=r.datasetAutocomplete.value;if(t.is(n,"array")){a=!1;let e=n.length;if(0===e)return void(r._structureToStore=[]);let t=!1,i=r._structureToStore.length;if(e<i)for(let a=i-1;a>=0;a--){let i=r._structureToStore[a];t=!0;for(let r=0;r<e;r++){if(n[r]===i.datasetTitle){t=!1;break}}!0===t&&(r._structureToStore.splice(a,1),a=-1)}if(!0===t)return}let i={onComplete:function(e){r._warningReport="",r._deletedConcepts=!1,r._hierarchicalFatherMovement=!1,r._duplicateConcepts=!1,r._addOrnotInDataSetStructure(e,a),l.getOntologyConceptsFromSessionId(r._structureToStore).then(function(){let e=l.getRenamedConcepts();e&&(r._warningReport+="<br><b>Renamed Concepts:</b><br><br>",e.forEach(function(e){r._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.original_concept.get("id")+" is renamed from "+e.original_concept.get("label")+" to "+e.renamed_concept.get("label")+"<br>"}));let a=l.getDeprecatedConcepts();a&&(r._warningReport+="<br><b>Deprecated Concepts:</b> <br><br>",a.forEach(function(e){r._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let n=l.getUnDeprecatedConcepts();n&&(r._warningReport+="<br><b>UnDeprecated Concepts:</b> <br><br>",n.forEach(function(e){r._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let i=l.getNewConcepts();t.is(i)&&(r._warningReport+="<br><b>New Concepts:</b> <br><br>",i.forEach(function(e){r._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let s=l.getDeletedConcepts();t.is(s)&&(r._deletedConcepts=!0,r.areConceptsMoved()||r.areConceptsDuplicated()?r._warningReport+="<br><b>Deployment not allowed, because deleted concepts found!!! </b><br><br><b> Deleted Concepts:</b> <br><br>":r._warningReport="<br><b>Deployment not allowed, because deleted concepts found!!! </b><br><br><b> Deleted Concepts:</b> <br><br>",s.forEach(function(e){r._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let o=l.getMovedConcepts();t.is(o)&&(r._hierarchicalFatherMovement=!0,r.areConceptsDeleted()||r.areConceptsDuplicated()?r._warningReport+="<br><b>Deployment not allowed, hierarchical father movement found!!! </b><br><br><b> Hierarchical Father Movement:</b> <br><br>":r._warningReport="<br><b>Deployment not allowed, hierarchical father movement found!!! </b><br><br><b> Hierarchical Father Movement:</b> <br><br>",o.forEach(function(e){r._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.concept.get("id")+"</b> is moved from father <b>"+e.previous_father.get("id")+"</b> to father <b>"+e.current_father.get("id")+"</b><br>"}));let c=l.getDuplicateConcepts();t.is(c)&&(r._duplicateConcepts=!0,r.areConceptsDeleted()||r.areConceptsMoved()?r._warningReport+="<br><b>Deployment not allowed, duplicate concepts under same hierarchy found!!! </b><br><br><b> Duplicate Concepts:</b> <br><br>":r._warningReport="<br><b>Deployment not allowed, duplicate concepts under same hierarchy found!!! </b><br><br><b> Duplicate Concepts:</b> <br><br>",c.forEach(function(e){r._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.org_concept.get("id")+"</b> is duplicated as <b>"+e.duplicate.get("id")+"</b> with label <b>"+e.duplicate.get("label")+"</b><br>"}))},function(){reject("Failed to compare datasets"),r._warningReport="<b>Failed to compare datasets</b><br><br>"})},onFailure:function(e){r._addOrnotInDataSetStructure(e,a)}};c.getDataSetStructure(i)},getWarningReport:function(){let e=this._warningReport;return""===e&&(e="<b>Old And New datasets are identical!</b>"),this.getSelectedDatasetTitle()||(e="<b>Please select a valid dataset!</b>"),e},areConceptsDeleted:function(){return this._deletedConcepts},areConceptsMoved:function(){return this._hierarchicalFatherMovement},areConceptsDuplicated:function(){return this._duplicateConcepts},_addOrnotInDataSetStructure:function(e,r){let a=this,n=t.is(e)&&e.datasetTitle,i=!0,s=a._structureToStore.length-1;if(t.is(r)&&!0===r)a._structureToStore=[],i=!0;else for(let e=s;e>=0;e--){if(a._structureToStore[e].datasetTitle===n){a._structureToStore.splice(e,1),i=!1;break}}!0===i&&a._structureToStore.push(e)}}}),define("DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t,r,a,n,i,s){"use strict";return{_tenantOntologies:{},_tenantCommunities:{},_fetchSwymCommunities:function(e,t){var r=this;let a=i.getPlatformID(),n=this._tenantCommunities[a];return n||(n=new Promise(function(e){r._apiCalltoFetchSwymCommunities(function(t){e(t)},function(t){e([])})}),this._tenantCommunities[a]=n),n},_apiCalltoFetchSwymCommunities:function(t,r){let o=i.getPlatformID();s.getServiceUrl({serviceName:"3DSearch",platformId:o,onComplete:function(i){!function(i){var s={label:"3DSearch-"+n.getUserId()+"-"+(new Date).getTime(),query:'[ds6w:type]:"swym:Community"',with_nls:!1,with_synthesis:!1,with_synthesis_hierarchical:!1,with_indexing_date:!1,select_file:[],source:["swym"],select_predicate:["ds6w:label"],tenant:o,nresults:1e3,refine:{},specific_source_parameter:{}},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:e.Json.encode(s),url:i+"/search",onComplete:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e.results)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return r(e)}};a.authenticatedRequest(c.url,c)}(i)},onFailure:function(){r("FAILED to retrieve 3DSearch url for tenant")}})},_fetchOntologies:function(){let e=this,t=i.getPlatformID();var r=this._tenantOntologies[t];return r||(r=new Promise(function(t){e._apiCalltoFetchOntologies(function(e){t(e)},function(e){t([])})}),this._tenantOntologies[t]=r),r},_apiCalltoFetchOntologies:function(e,t){var r=i.getPlatformID();s.getServiceUrl({serviceName:"ontology",platformId:r,onComplete:function(r){!function(r){var n={method:"GET",headers:{Accept:"application/json"},url:r+"/3drdfpersist/resources/v1/ontologies",onComplete:function(t){try{t=JSON.parse(t)}catch(e){t=e}return e(t)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e)}};a.authenticatedRequest(n.url,n)}(r)},onFailure:function(){resolve([])}})}}}),define("DS/SearchControlCenter/scripts/SearchControlCenterInfra",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Input/Button","DS/UIKIT/Accordion","DS/UIKIT/Mask","DS/WAFData/WAFData","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/3DSearchControl_UIsettings.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchControlCenterFetchService","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/UIKIT/Alert","DS/SNInfraUX/SearchUtils"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_,p,g,f,C,m){"use strict";return{url3DSpacepromise:r.deferred(),CSVpromise:r.deferred(),initInfraPromise:r.deferred(),_postURL:null,_listOfFacets:[],_listOfFacetNames:[],uiRefresh:function(){this._listOfFacetNames.length>0?this._OnResetClick():this.init()},initInfra:function(){var e=this,r={onComplete:function(){var r={tenantID:p.platformID,key:"SCC_UI"};_.getSearchSettings(r).then(function(r){var a;if((a=t.is(r,"string")?JSON.parse(r):r).hasOwnProperty("attribute_custo")){var n=!1,i=a.attribute_custo;if(i.hasOwnProperty("ds6w:type")){var s=i["ds6w:type"];let e=!1;for(var o=0;o<s.length;o++){if("AllDataSourcesandTypes"===s[o].source){e=!0;break}}!1===e&&(n=!0)}else i["ds6w:type"]=[],n=!0;if(!0===n){let t={source:"AllDataSourcesandTypes"};t.predicates=e._getDefaultPredicates(),i["ds6w:type"].push(t)}}g.setSettingsJSON(a),e.initInfraPromise.resolve()},function(t){i.unmask(widget.body),e.initInfraPromise.reject();var r=p.createWdgAlert();r.inject(widget.body,"top");var a=c.get("SearchInfra.failuremsg");a+=t,r.add({className:"error",message:a})})},onFailure:function(){e.initInfraPromise.reject(),i.unmask(widget.body),d.log("Login fails !!")}};return r.tenantID=widget.getValue("x3dPlatformId"),t.is(r.tenantID)&&""!==r.tenantID||(r.tenantID="OnPremise"),f.getServiceUrl({serviceName:"3DSearch",platformId:r.tenantID,onComplete:function(e){var a;t.is(e,"array")?a=e[0].url:t.is(e,"string")&&(a=e),t.is(a)&&(r.fedSearchURL=a),t.is(r.tenantID,"string")&&(u.login(r),p.setPlatformID(r.tenantID))},onFailure:function(e){var t=p.createWdgAlert();t.inject(widget.body,"top");var r=c.get("SearchInfra.URLBuildError");r+=e,t.add({className:"error",message:r})}}),f.getPlatformConfig({serviceName:"3DSpace",onComplete:function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.platformId===r.tenantID){p.setPlatformDisplayName(a.displayName);break}}}}),this.initInfraPromise.promise},_getDefaultPredicates:function(){var e=[],r=!1,a=localStorage.getItem("TagNavigator-simplifiedTagger");return t.is(a)&&"true"===a&&(r=!0),r&&e.push({uri:"computedCountryInfo"}),e.push({uri:"ds6w:dataSource"}),e.push({uri:"ds6w:type"}),r||e.push({uri:"ds6w:category"}),e.push({uri:"ds6w:modified"}),r&&e.push({uri:"ds6w:created"}),e.push({uri:"ds6w:lastModifiedBy"}),e.push({uri:"ds6w:responsible"}),e},check3DSpaceAvailablity:function(){var e=widget.getValue("x3dPlatformId");t.is(e)&&""!==e||(e="OnPremise");var r=this;return f.getServiceUrl({serviceName:"3DSpace",platformId:e,onComplete:function(e){if(t.is(e))r.url3DSpacepromise.resolve(e);else{var a=new Error("no platform");r.url3DSpacepromise.reject(a)}},onFailure:function(){var e=new Error("no platform");r.url3DSpacepromise.reject(e)}}),this.url3DSpacepromise.promise},checkCSVAvailability:function(){var e=this;return m.getGrantedRoles(function(t){for(var r=!1,a=0;a<t.length;a++)if("CSV"===t[a].id){r=!0;break}if(r)e.CSVpromise.resolve(t);else{var n=new Error("no access");e.CSVpromise.reject(n)}}),this.CSVpromise.promise}}}),define("DS/SearchControlCenter/scripts/SearchControlCenterWidget",["UWA/Core","UWA/Class/Model","UWA/Class/Collection","UWA/Class/View","WebappsUtils/WebappsUtils","DS/W3DXComponents/Skeleton","DS/W3DXComponents/ContentSet","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/Views/SearchControlCenterLayoutView","DS/SearchControlCenter/scripts/SearchControlCenterInfra","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,r,a,n,i,s,o,c,l,d,u){"use strict";var h={bones:null,height:"auto",licenceAlert:null,unMaximizedHeight:null,generalViewOpts:{contents:{useInfiniteScroll:!1,usePullToRefresh:!1}},setBodyHeight:function(e){e&&("auto"!==e&&(e+="px"),widget.body.setStyle("height",e))},buildSkeleton:function(){var t=c;return new i({domains:{collection:"DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",view:null,swipe:!1,viewOptions:h.generalViewOpts,idCardOptions:{actions:function(){return null},facets:function(){return[{text:"Edit",icon:"tools",handler:i.getRendererHandler(t)}]}}}},{root:"domains",startRoute:"/domains/SearchControl_General/?facet=0",useRootChannelView:!1,responsiveTrigger:function(){var e=widget.getView().type;return"channel"===widget.getValue("view")&&("maximized"===e||"fullscreen"===e)},events:{onItemClick:function(t){e.log(t)},onSlide:function(t,r){e.log(t),e.log(r)}}})},onLoad:function(){function t(e){var t=d.createWdgAlert();t.options.autoHide=!1,t.inject(widget.body,"top"),t.add({className:"warning",message:e})}h.bones&&h.bones.destroy(),d.putMask(widget.body),l.check3DSpaceAvailablity(),l.checkCSVAvailability(),l.initInfra().then(function(r){l.check3DSpaceAvailablity().then(function(r){l.checkCSVAvailability().then(function(t){var r="";r=d.getPlatformID(),e.is(r)&&""!==r||(r=e.is(widget.getValue("x3dPlatformId"))?widget.getValue("x3dPlatformId"):"OnPremise",d.setPlatformID(r)),widget.setTitle(r),o.getServiceUrl({serviceName:"3DSpace",platformId:r,onComplete:function(e){d.setURL(e),h.bones=h.buildSkeleton(),widget.body.setContent(h.bones.render())},onFailure:function(e){var t=d.createWdgAlert();t.inject(widget.body,"top");var r=u.get("SearchInfra.URLBuildError");r+=e,t.add({className:"error applyChangesAlert",message:r})}})},function(e){t(u.get("html.license"))})},function(e){t(u.get("html.platform"))}),d.removeMask(widget.body)},function(e){t(u.get("html.InitInfra")),d.removeMask(widget.body)})},onRefresh:function(t){function r(e){var t=d.createWdgAlert();t.options.autoHide=!1,t.inject(widget.body,"top"),t.add({className:"warning",message:e})}h.bones&&h.bones.destroy(),d.putMask(widget.body),l.check3DSpaceAvailablity(),l.checkCSVAvailability(),l.check3DSpaceAvailablity().then(function(t){l.checkCSVAvailability().then(function(t){var r="";r=d.getPlatformID(),e.is(r)&&""!==r||(r=e.is(widget.getValue("x3dPlatformId"))?widget.getValue("x3dPlatformId"):"OnPremise",d.setPlatformID(r)),widget.setTitle(r),o.getServiceUrl({serviceName:"3DSpace",platformId:r,onComplete:function(e){d.setURL(e),h.bones=h.buildSkeleton(),widget.body.setContent(h.bones.render())},onFailure:function(e){var t=d.createWdgAlert();t.inject(widget.body,"top");var r=u.get("SearchInfra.URLBuildError");r+=e,t.add({className:"error applyChangesAlert",message:r})}})},function(e){r(u.get("html.license"))})},function(e){r(u.get("html.platform"))}),d.removeMask(widget.body)},onViewChange:function(e){}};return h}),define("DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/UIKIT/Popover","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,r,a,n,i,s,o,c,l,d,u,h){"use strict";return{communityOntologyMapping:[],render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},getTabInputsToStore:function(){return this.communityOntologyMapping},getInputFromStore:function(e){let t=this;e&&(this.communityOntologyMapping=e.slice(0)),this.ontologies&&0===Object.keys(this.ontologies).length&&empty.constructor===Object||t.divCreatedCategoriesSection&&(t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach((e,r)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)}))},renderControlledSection:function(t){this.mainControlDivSection=e.create("div",{class:"search_center_main_div ",id:"control-vocab-main"}).inject(t);var r=e.create("div",{class:"",id:"control-vocab-title"}).inject(this.mainControlDivSection);e.create("p",{class:"control_vocab_text_heading",text:h.get("6WTagsFilter.ControlledVocab.title")}).inject(r),this.renderActivateControlVocab(this.mainControlDivSection),this.renderCommunitySection(this.mainControlDivSection)},renderActivateControlVocab:function(t){var r=this,a=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"activate-control-vocab"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"activate-control_vocab-toggle"}).inject(a);this.checkboxActivateControlVocab=new n({type:"checkbox",label:h.get("6WTagsFilter.ControlledVocab.CheckBox.label"),className:"primary",touchMode:"true"}).inject(i);var s=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(a);s.setStyle("color","#b4b6ba"),s.addEventListener("mouseover",this._manageMouseOver,!1),s.addEventListener("mouseout",this._manageMouseOut,!1),new o({target:s,trigger:"hover",animate:"true",position:"top",title:""}),this.checkboxActivateControlVocab.addEventListener("change",function(e){r.toggleDisableStateOfInputFields()})},toggleDisableStateOfInputFields:function(){1==this.checkboxActivateControlVocab.checkFlag?this.divCategoriesSection.removeClassName("search_center_disable"):this.divCategoriesSection.addClassName("search_center_disable")},renderCommunitySection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section search_center_disable"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection),this.renderMappings(this.divCategoriesSection)},_createAddCategoryRowSpan:function(t){var r=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return r.addClassName("control_vocab_add_category_row_span"),r},_createCommunityControl:function(r){var a=e.create("div",{class:r.class,id:r.id}).inject(r.divRow),n=new c;this.communityAutocomplete=new s({placeholder:h.get("6WTagsFilter.ControlledVocab.Community.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:n,multiSearchMode:!1}).inject(a),this.communityAutocomplete.elements.container.setStyle("max-width","unset"),this.communityAutocomplete.addEventListener("change",this._onChangeCommunity.bind(this)),d._fetchSwymCommunities().then(function(e){t.is(e,"array")&&e.length?e.forEach((e,t)=>{if(e.hasOwnProperty("attributes")){let t,r;e.attributes.filter(function(e){if("internal"==e.format&&"resourceid"==e.name){let r=e.value.split(":");t=r[r.length-1]}"attribute"==e.format&&"ds6w:label"==e.name&&(r=e.value)}),n.addRoot(new l({label:r,value:t}))}}):console.log("The fed search failed")});var i=this;return this.selectedCommunity,this.communityAutocomplete.addEventListener("change",function(){i.enableAddCategoryButton()}),this.communityAutocomplete},_onChangeCommunity:function(e){if(this.communityAutocomplete.value){let e=this.communityAutocomplete.value,t=this.communityOntologyMapping.filter(function(t){return t.id==e});t&&t.length&&(this._updateCommunity=t[0].id,this.updateCategoryButton.elements.container.setStyle("display","inline-flex"),this.updateCategoryButton._disabledState=!1,this.updateCategoryButton.disabled=!1,this.addCategoryButton.elements.container.setStyle("display","none"))}else this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.elements.container.setStyle("display","inline-flex")},_createOntologyControl:function(r){let a=this;var n=e.create("div",{class:r.class,id:r.id}).inject(r.divRow),i=new c;return this.ontologyAutocomplete=new s({placeholder:h.get("6WTagsFilter.ControlledVocab.Ontology.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:i}).inject(n),this.ontologyAutocomplete.elements.container.setStyle("max-width","unset"),this.ontologiesObj={},d._fetchOntologies().then(function(e){t.is(e,"array")&&e.length?(e.forEach((e,t)=>{"ds6wclassifier:"!==e.shortURI&&e.hasOwnProperty("label")&&(a.ontologiesObj[e.shortURI]=e.label,i.addRoot(new l({label:e.label,value:e.shortURI})))}),a.getInputFromStore()):console.log("The failure is because:"+e)}),this.ontologyAutocomplete.addEventListener("change",function(){a.enableAddCategoryButton()}),this.ontologyAutocomplete},renderDisableFreeTagging:function(t){var r=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"disable-free-tagging"}).inject(t),a=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"disable-free-tagging-toggle"}).inject(r);this.checkboxDisableFreeTagging=new n({type:"checkbox",label:h.get("6WTagsFilter.ControlledVocab.DisableFreeTagging.label"),className:"primary",touchMode:"true"}).inject(a);var i=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(r);i.setStyle("color","#b4b6ba"),i.addEventListener("mouseover",this._manageMouseOver,!1),i.addEventListener("mouseout",this._manageMouseOut,!1),new o({target:i,trigger:"hover",animate:"true",position:"top",title:""})},enableAddCategoryButton:function(){this.communityAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value.length?(this.addCategoryButton.disabled=!1,u.enableButtons()):this.addCategoryButton.disabled=!0},renderAddButtonCategoryRow:function(t){var r=e.create("div",{class:"search_center_div_uidisplay search_center_margin search_center_category_add_add",id:"add-btn-control_vocab"}).inject(t);this.addCategoryButton=new a({emphasize:"primary",touchMode:!0,disabled:!0,label:h.get("InstantSearch.Category.Action.AddNewCategory")}).inject(r),this.updateCategoryButton=new a({emphasize:"primary",touchMode:!0,disabled:!0,label:h.get("6WTagsFilter.ControlledVocab.UpdateButton.label")}).inject(r),this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.getContent().addEventListener("buttonclick",this._onAddClick.bind(this)),this.updateCategoryButton.getContent().addEventListener("buttonclick",this._onAddClick.bind(this,!0))},_onAddClick:function(e){let t=this,r={type:"swym:Community"};if(this._updateCommunity){this.communityOntologyMapping.forEach(e=>{if(e.id==t._updateCommunity){if(t.ontologyAutoCompleteDiv.selectedItems.length){t.ontologyAutoCompleteDiv.value.forEach((r,a)=>{-1==e.ontologies.indexOf(r)&&e.ontologies.push(t.ontologyAutoCompleteDiv.value[a])})}e.freeInput=t.checkboxDisableFreeTagging.checkFlag}})}else r.id=t.communityAutoCompleteDiv.value,r.name=t.communityAutoCompleteDiv.selectedItems.getAttributeValue("label"),r.ontologies=t.ontologyAutoCompleteDiv.value,r.freeInput=t.checkboxDisableFreeTagging.checkFlag,t.communityOntologyMapping.push(r);console.log("The community mappings:"+JSON.stringify(t.communityOntologyMapping)),t.communityAutoCompleteDiv.value="",t.ontologyAutoCompleteDiv.value=[],t.checkboxDisableFreeTagging.checkFlag=!1,t.updateCategoryButton.elements.container.setStyle("display","none"),t.addCategoryButton.elements.container.setStyle("display","inline-flex"),this._updateCommunity=null,t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach((e,r)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)})},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{class:"search_center_add_category_section"}).inject(t);var r=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),a=this._createCommunityControl({class:"control_vocab_community_title",divRow:r}),n=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),i=this._createOntologyControl({class:"control_vocab_ontology_title",divRow:n}),s=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection});this.renderDisableFreeTagging(s);this.communityAutoCompleteDiv=a,this.ontologyAutoCompleteDiv=i,this.renderAddButtonCategoryRow(this.divAddCategoriesSection)},_createCategoryRowSpan:function(t){var r=e.create("div",{class:t.class}).inject(t.parentDiv);return r.addClassName("search_center_category_row_span"),r},_createCategoryRowHtmlDiv:function(t){var r=e.create("div",{class:t.class,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return r.addClassName("search_center_category_row_html"),r},_getCategoryRowHtml:function(e){var t=this;let r=e.mappingInfo.ontologies.map(e=>t.ontologiesObj[e]);return e.mappingInfo.name+" - "+r},renderMappings:function(t){let r=this;this.divCreatedCategoriesSection=e.create("div",{class:"search_center_created_categories_section"}).inject(t),this.communityOntologyMapping&&this.communityOntologyMapping.length&&(this.divCreatedCategoriesSection.empty(),this.communityOntologyMapping.forEach((e,t)=>{r.renderMappingsRow(r.divCreatedCategoriesSection,e)}))},renderMappingsRow:function(e,t){var r=this._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",parentDiv:e});this._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",parentDiv:r,mappingInfo:t})}}}),define("DS/SearchControlCenter/scripts/Searchcontrol6WTagsFilter",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/Controls/ComboBox","DS/UIKIT/Popover","DS/UIKIT/Mask","DS/FedDictionaryAccess/FedDictionaryAccessAPI","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/SearchControlCenter_AllowedApps.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorization","DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary","DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","text!DS/SNInfraUX/assets/SearchcontrolCenter_TagRelationship.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/SNInfraUX/SearchControlCenterFetchService","DS/UIKIT/Scroller","DS/SearchControlCenter/Views/SearchControlCenterLayoutView"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_,p,g,f,C,m,v,y,b,S,D){"use strict";let A={preferredPredicatesComboBox:null,preferredWhatCards:null,preferredWhereCards:null,preferredWhoCards:null,preferredWhenCards:null,preferredHowCards:null,preferredWhyCards:null,excludedPredicatesComboBox:null,excludedWhatCards:null,excludedWhereCards:null,excludedWhoCards:null,excludedWhenCards:null,excludedHowCards:null,excludedWhyCards:null,checkboxAttributeDisplay:null,checkboxActivateTagRelationship:null,applicationCntxtComboBox:null,_attributesMap:{},_6WSubProperties:[],_6WPredicatesMap:[],_listOfDefaultAndTags:[],_listOfIrrelevantAndTags:[],_appsMap:{},_filter6WRootPredicatesPromise:r.deferred(),_rootWOfPredicatesPromise:r.deferred(),_datasetInput:null,scrollerText:"",scrollerBody:{},onRenderFacet:function(r){let o=e.create("div",{class:"search_center_main_div",id:"search-center-6WTags1"}).inject(r),c=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(o),m=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"search-type-display-text"}).inject(c),D=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-predicates-display-combo"}).inject(c);A.checkboxAttributeDisplay=new a({type:"checkbox",label:l.get("searchAttributes.AttributeDisplay"),className:"primary",checkFlag:"true",touchMode:"true"}).inject(D),e.create("p",{class:"search_center_text",text:l.get("searchAttributes.CustomizedAttributes")}).inject(m);let x=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(o),T=e.create("div",{class:"search_center_div_left search_center_6Wtags_align search_center_general_display_flex",id:"search-type-display-text"}).inject(x),w=e.create("div",{class:"search_center_div_right search_center_div_datasource search_center_only_grid search_center_top_margin",id:"context-Application-6WTags-combo"}).inject(x);A.applicationCntxtComboBox=new n({selectedIndex:0,touchMode:!0,mainElementVisibleFlag:!0}).inject(w),e.create("p",{class:"search_center_text",text:l.get("SearchCenter6WTagsFilter.Context")}).inject(T);let I=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(x);new i({target:I,trigger:"hover",animate:"true",position:"top",body:l.get("SearchCenter6WTagsFilter.Context.Title.popover"),title:""});let N=e.create("div",{class:"search_center_general_tab_div search_center_margin "}).inject(o),j=e.create("div",{class:"search_center_div_left search_center_6Wtags_align search_center_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(N);e.create("p",{class:"search_center_text",text:l.get("SearchCenter6WTagsFilter.Preferred.Title")}).inject(j);let B=e.create("div",{class:"search_center_div_right",id:"search-type-display-text"}).inject(N),O=e.create("div",{class:"search_center_div_datasource search_center_only_grid search_center_top_margin",id:"Preferred-6WTags-combo"}).inject(B);A.preferredPredicatesComboBox=new n({elementsList:[],placeholder:l.get("SearchCenter6WTagsFilter.AddPreferred_tags"),touchMode:!0,mainElementVisibleFlag:!0}).inject(O);let W=e.create("div",{class:"search_center_div_card search_center_top_margin",id:"search-type-display-text"}).inject(B);A.preferredWhatCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredWhatAttr"}).inject(W);let P=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.preferredWhatCards);e.create("span",{class:"fonticon fonticon-3ds-what search_center_6Wtags_WSection search_center_font_and_color",text:" What"}).inject(P);this._buildNoSelectionMsgDiv(P),A.preferredWhereCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredWhereAttr"}).inject(W);let F=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.preferredWhereCards);e.create("span",{class:"fonticon fonticon-3ds-where search_center_6Wtags_WSection",text:" Where"}).inject(F);this._buildNoSelectionMsgDiv(F),A.preferredWhoCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredWhoAttr"}).inject(W);let R=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.preferredWhoCards);e.create("span",{class:"fonticon fonticon-3ds-who search_center_6Wtags_WSection",text:" Who"}).inject(R);this._buildNoSelectionMsgDiv(R),A.preferredWhenCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredWhenAttr"}).inject(W);let M=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.preferredWhenCards);e.create("span",{class:"fonticon fonticon-3ds-when search_center_6Wtags_WSection",text:" When"}).inject(M);this._buildNoSelectionMsgDiv(M),A.preferredHowCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredHowAttr"}).inject(W);let k=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.preferredHowCards);e.create("span",{class:"fonticon fonticon-3ds-how search_center_6Wtags_WSection",text:" How"}).inject(k);this._buildNoSelectionMsgDiv(k),A.preferredWhyCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredWhyAttr"}).inject(W);let E=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.preferredWhyCards);e.create("span",{class:"fonticon fonticon-3ds-why search_center_6Wtags_WSection",text:" Why"}).inject(E);this._buildNoSelectionMsgDiv(E);let U=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(N);new i({target:U,trigger:"hover",animate:"true",position:"top",body:l.get("SearchCenter6WTagsFilter.Preferred.Title.popover"),title:""});let L=this;A.preferredPredicatesComboBox.addEventListener("change",function(){let e=L._getCardsList("Excluded"),r=e.length,a=[];for(let t=0;t<r;t++)a.push(e[t].uri);let n=L._getCardsList("Preferred"),i=n.length,s=[];for(let e=0;e<i;e++)s.push(n[e].uri);let o=A.preferredPredicatesComboBox.currentValue;if(t.is(o,"string")){let e="AllDataSourcesandTypes",r=u.getAttributesInternalNameForAllDataSourcesAndTypes(e,o),n=!1,i=null;if(t.is(r)){let t;if(a.length>0&&(t=a.indexOf(r))>-1&&(i=l.get("6WTagsFilter.preferredAttrWarning"),n=!0),s.length>0&&!1===n&&(t=s.indexOf(r))>-1&&(i=l.get("searchAttributes.AttributeWarning"),n=!0),!1===n){let t=A._get6WDiv(r,"Preferred");j.className="search_center_set_left_div search_center_6Wtags_align search_center_margin search_center_general_display_flex";let a={cardDiv:t,datasource:e,type:"",textOnCard:o,uri:r,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(a),u.enableButtons()}else{let e=u.createWdgAlert();e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:i})}}A.preferredPredicatesComboBox.selectedIndex=-1}});let V=e.create("div",{class:"search_center_secondary_div",id:"search-center-6WTags2"}).inject(r);V.addClassName("search_center_secondary_div_topMargin");let H=e.create("div",{class:"search_center_general_tab_div search_center_margin"}).inject(V),J=e.create("div",{class:"search_center_div_left search_center_6Wtags_align search_center_margin search_center_general_display_flex",id:"search-type-display-text"}).inject(H);e.create("p",{class:"search_center_text",text:l.get("SearchCenter6WTagsFilter.Excluded.Title")}).inject(J);let X=e.create("div",{class:"search_center_div_right",id:"search-type-display-text"}).inject(H),z=e.create("div",{class:"search_center_div_datasource search_center_only_grid search_center_top_margin",id:"Excluded-6WTags-combo"}).inject(X);A.excludedPredicatesComboBox=new n({elementsList:[],placeholder:l.get("SearchCenter6WTagsFilter.AddExcluded_tags"),touchMode:!0,mainElementVisibleFlag:!0}).inject(z);let G=e.create("div",{class:"search_center_div_card search_center_top_margin",id:"search-type-display-text"}).inject(X);A.excludedWhatCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_excludedWhatAttr"}).inject(G);let K=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.excludedWhatCards);e.create("span",{class:"fonticon fonticon-3ds-what search_center_6Wtags_WSection search_center_font_and_color",text:" What"}).inject(K);this._buildNoSelectionMsgDiv(K),A.excludedWhereCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_excludedWhereAttr"}).inject(G);let q=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.excludedWhereCards);e.create("span",{class:"fonticon fonticon-3ds-where search_center_6Wtags_WSection search_center_font_and_color",text:" Where"}).inject(q);this._buildNoSelectionMsgDiv(q),A.excludedWhoCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_excludedWhoAttr"}).inject(G);let Q=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.excludedWhoCards);e.create("span",{class:"fonticon fonticon-3ds-who search_center_6Wtags_WSection search_center_font_and_color",text:" Who"}).inject(Q);this._buildNoSelectionMsgDiv(Q),A.excludedWhenCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_excludedWhenAttr"}).inject(G);let $=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.excludedWhenCards);e.create("span",{class:"fonticon fonticon-3ds-when search_center_6Wtags_WSection search_center_font_and_color",text:" When"}).inject($);this._buildNoSelectionMsgDiv($),A.excludedHowCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_excludedHowAttr"}).inject(G);let Y=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.excludedHowCards);e.create("span",{class:"fonticon fonticon-3ds-how search_center_6Wtags_WSection search_center_font_and_color",text:" How"}).inject(Y);this._buildNoSelectionMsgDiv(Y),A.excludedWhyCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_excludedWhyAttr"}).inject(G);let Z=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredAttr"}).inject(A.excludedWhyCards);e.create("span",{class:"fonticon fonticon-3ds-why search_center_6Wtags_WSection search_center_font_and_color",text:" Why"}).inject(Z);this._buildNoSelectionMsgDiv(Z);let ee=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(H);new i({target:ee,trigger:"hover",animate:"true",position:"top",body:l.get("SearchCenter6WTagsFilter.Excluded.Title.popover"),title:""}),A.excludedPredicatesComboBox.addEventListener("change",function(){let e=L._getCardsList("Excluded"),r=e.length,a=[];for(let t=0;t<r;t++)a.push(e[t].uri);let n=L._getCardsList("Preferred"),i=n.length,s=[];for(let e=0;e<i;e++)s.push(n[e].uri);let o=A.excludedPredicatesComboBox.currentValue;if(t.is(o,"string")){let e="AllDataSourcesandTypes",r=u.getAttributesInternalNameForAllDataSourcesAndTypes(e,o),n=!1,i=null;if(t.is(r)){let t;if(a.length>0&&(t=a.indexOf(r))>-1&&(i=l.get("searchAttributes.AttributeWarning"),n=!0),s.length>0&&!1===n&&(t=s.indexOf(r))>-1&&(i=l.get("6WTagsFilter.excludeAttrWarning"),n=!0),!1===n){let t=A._get6WDiv(r,"Excluded");J.className="search_center_set_left_div search_center_6Wtags_align search_center_margin search_center_general_display_flex";let a={cardDiv:t,datasource:e,type:"",textOnCard:o,uri:r,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(a),u.enableButtons()}else{let e=u.createWdgAlert();e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:i})}}A.excludedPredicatesComboBox.selectedIndex=-1}});let te=e.create("div",{class:"search_center_main_div",id:"search-center-TagReln"}).inject(r),re=(e.create("div",{class:"search_center_main_div",id:"search-center-TagRelnEmpt"}).inject(r),e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-center-TagReln-Span1"}).inject(te)),ae=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"search-center-TagReln-Span1-Text"}).inject(re),ne=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-center-TagReln-Span1-chkbox"}).inject(re);A.checkboxActivateTagRelationship=new a({type:"checkbox",label:l.get("SearchCenter6WTagsFilter.TagRelationship.specify.label"),className:"primary",checkFlag:!1,touchMode:"true"}).inject(ne),e.create("p",{class:"search_center_text",text:l.get("SearchCenter6WTagsFilter.TagRelationship.label")}).inject(ae);let ie=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_disable",id:"search-center-TagReln-Span2"}).inject(te),se=e.create("div",{class:"search_center_div_left search_center_6Wtags_align search_center_margin search_center_general_display_flex",id:"search-center-TagReln-Span2-Text"}).inject(ie);e.create("p",{class:"search_center_text",text:l.get("SearchCenter6WTagsFilter.TagRelationship.Preferred.Title")}).inject(se);let oe=e.create("div",{class:"search_center_div_right search_center_div_datasource search_center_only_grid search_center_top_margin",id:"Tag-Relationship-6WTags-combo"}).inject(ie);A.configTagRelationshipPredicatesComboBox=new n({elementsList:[],placeholder:l.get("SearchCenter6WTagsFilter.TagRelationship.AddPreferred_tags"),touchMode:!0,mainElementVisibleFlag:!0}).inject(oe);let ce=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(ie);new i({target:ce,trigger:"hover",animate:"true",position:"top",body:l.get("SearchCenter6WTagsFilter.TagRelationship.Preferred.Title.popover"),title:""});let le=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"search-center-TagReln-Span3"}).inject(te);A.tagRelationshipCards=e.create("div",{class:"search_center_created_categories_section_header scc-tag-relationship-row",id:"SCC6WTagsFilter_preferredHierarchicalWhatAttr"}).inject(le);let de=e.create("div",{class:"search_center_created_categories_section_header search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredHierarchicalAttr"}).inject(A.tagRelationshipCards);e.create("span",{class:"search_center_font_and_color scc_6wtags_tag_relationship_orbtn",text:"OR"}).inject(de),e.create("span",{class:"search_center_font_and_color scc_6wtags_tag_relationship_andbtn",text:"AND"}).inject(de),e.create("span",{class:"search_center_font_and_color scc_6wtags_tag_relationship_xorbtn",text:"XOR"}).inject(de);if(this._listOfDefaultAndTags.length<=0&&this._listOfIrrelevantAndTags.length<=0){let e=JSON.parse(f);if(t.is(e)&&e.hasOwnProperty("Predicates_Default_AND")&&t.is(e.Predicates_Default_AND,"array"))for(let t=0;t<e.Predicates_Default_AND.length;t++){let r=e.Predicates_Default_AND[t];this._listOfDefaultAndTags.push(r)}if(t.is(e)&&e.hasOwnProperty("Predicates_Irrelevant_AND")&&t.is(e.Predicates_Irrelevant_AND,"array"))for(let t=0;t<e.Predicates_Irrelevant_AND.length;t++){let r=e.Predicates_Irrelevant_AND[t];this._listOfIrrelevantAndTags.push(r)}}if(A.configTagRelationshipPredicatesComboBox.addEventListener("change",function(){let e=L._getTagRelationshipCards(),r=e.length,a=[];for(let t=0;t<r;t++)a.push(e[t].uri);let n=A.configTagRelationshipPredicatesComboBox.currentValue;if(t.is(n,"string")){let e="AllDataSourcesandTypes",r=u.getAttributesInternalNameForAllDataSourcesAndTypes(e,n),i=!1,s=null;if(t.is(r)){let e;if(a.length>0&&!1===i&&(e=a.indexOf(r))>-1&&(s=l.get("searchAttributes.AttributeWarning"),i=!0),!1===i){let e="OR";if(L._listOfDefaultAndTags.length>0){L._listOfDefaultAndTags.indexOf(r)>-1&&(e="AND")}se.className="search_center_set_left_div search_center_6Wtags_align search_center_margin search_center_general_display_flex";let t={cardDiv:A.tagRelationshipCards,textOnCard:n,uri:r,tabName:"SearchControl_6WTags",operator:e};L.renderTagRelationshipRow(t),A.tagRelationshipCards.childNodes[0].hidden=!1,u.enableButtons()}else{let e=u.createWdgAlert();e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:s})}}A.configTagRelationshipPredicatesComboBox.selectedIndex=-1}}),A.checkboxActivateTagRelationship.addEventListener("change",function(){u.enableButtons(),!1===A.checkboxActivateTagRelationship.checkFlag?(ie.addClassName("search_center_disable"),le.addClassName("search_center_disable")):(ie.removeClassName("search_center_disable"),le.removeClassName("search_center_disable"))}.bind(this)),!0===C.getOption("activate_hierarchical_tag_depth")){let s=e.create("div",{class:"search_center_main_div",id:"search-center-6WTags3"}).inject(r),o=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display-hiearchical-predicates"}).inject(s),c=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"search-type-display-text-hiearchical-predicates"}).inject(o),d=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-predicates-display-combo-hiearchical-predicates"}).inject(o);A.checkboxHierarchicalTagsDisplay=new a({type:"checkbox",label:l.get("SearchCenter6WTagsFilter.hierarchicalPredicates.specify.label"),className:"primary",checkFlag:!1,touchMode:"true"}).inject(d),e.create("p",{class:"search_center_text",text:l.get("SearchCenter6WTagsFilter.hierarchicalPredicates.label")}).inject(c);let h=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_disable"}).inject(s),_=e.create("div",{class:"search_center_div_left search_center_6Wtags_align search_center_margin search_center_general_display_flex",id:"search-type-display-text-hiearchical-predicates"}).inject(h);e.create("p",{class:"search_center_text",text:l.get("SearchCenter6WTagsFilter.hierarchicalPredicates.Preferred.Title")}).inject(_);let p=e.create("div",{class:"search_center_div_right",id:"search-type-display-text-hiearchical-predicates"}).inject(h),g=e.create("div",{class:"search_center_div_datasource search_center_only_grid search_center_top_margin",id:"Preferred-Hierarchical-6WTags-combo"}).inject(p),f=[];A.preferredHierarchicalPredicatesComboBox=new n({elementsList:f,placeholder:l.get("SearchCenter6WTagsFilter.hierarchicalPredicates.AddPreferred_tags"),touchMode:!0,mainElementVisibleFlag:!0}).inject(g);let m=e.create("div",{class:"search_center_div_card search_center_top_margin",id:"search-type-display-text-hiearchical-predicates"}).inject(p);A.preferredHierarchicalWhatCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredHierarchicalWhatAttr"}).inject(m);let v=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredHierarchicalAttr"}).inject(A.preferredHierarchicalWhatCards);e.create("span",{class:"fonticon fonticon-3ds-what search_center_6Wtags_WSection search_center_font_and_color",text:" What"}).inject(v);this._buildNoSelectionMsgDiv(v),A.preferredHierarchicalWhereCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredHierarchicalWhereAttr"}).inject(m);let y=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredHierarchicalAttr"}).inject(A.preferredHierarchicalWhereCards);e.create("span",{class:"fonticon fonticon-3ds-where search_center_6Wtags_WSection",text:" Where"}).inject(y);this._buildNoSelectionMsgDiv(y),A.preferredHierarchicalWhoCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredHierarchicalWhoAttr"}).inject(m);let b=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredHierarchicalAttr"}).inject(A.preferredHierarchicalWhoCards);e.create("span",{class:"fonticon fonticon-3ds-who search_center_6Wtags_WSection",text:" Who"}).inject(b);this._buildNoSelectionMsgDiv(b),A.preferredHierarchicalWhenCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredHierarchicalWhenAttr"}).inject(m);let S=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredHierarchicalAttr"}).inject(A.preferredHierarchicalWhenCards);e.create("span",{class:"fonticon fonticon-3ds-when search_center_6Wtags_WSection",text:" When"}).inject(S);this._buildNoSelectionMsgDiv(S),A.preferredHierarchicalHowCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredHierarchicalHowAttr"}).inject(m);let D=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredHierarchicalAttr"}).inject(A.preferredHierarchicalHowCards);e.create("span",{class:"fonticon fonticon-3ds-how search_center_6Wtags_WSection",text:" How"}).inject(D);this._buildNoSelectionMsgDiv(D),A.preferredHierarchicalWhyCards=e.create("div",{class:"card search_center_card_panel",id:"SCC6WTagsFilter_preferredHierarchicalWhyAttr"}).inject(m);let x=e.create("div",{class:"search_center_font_and_color search_center_general_display_flex",id:"SCC6WTagsFilter_preferredHierarchicalAttr"}).inject(A.preferredHierarchicalWhyCards);e.create("span",{class:"fonticon fonticon-3ds-why search_center_6Wtags_WSection",text:" Why"}).inject(x);this._buildNoSelectionMsgDiv(x);let T=e.create("span",{class:"fonticon fonticon-info search_center_margin_CardSpan_icon"}).inject(h);new i({target:T,trigger:"hover",animate:"true",position:"top",body:l.get("SearchCenter6WTagsFilter.hierarchicalPredicates.Preferred.Title.popover"),title:""});let w=this;A.preferredHierarchicalPredicatesComboBox.addEventListener("change",function(){let e=w._getCardsList("PreferredHierarchical"),r=e.length,a=[];for(let t=0;t<r;t++)a.push(e[t].uri);let n=A.preferredHierarchicalPredicatesComboBox.currentValue;if(t.is(n,"string")){let e="AllDataSourcesandTypes",i=u.getAttributesInternalNameForAllDataSourcesAndTypes(e,n),s=!1,o=null,c=C.getOption("max_deep_hierarchy_tags");if(r>=c){o=l.get("SearchCenter6WTagsFilter.hierarchicalPredicates.Message.MaxReached"),o=l.replace(o,{max:c});let e=u.createWdgAlert();return e.inject(widget.body,"top"),e.add({className:"error applyChangesAlert",message:o}),void(A.preferredHierarchicalPredicatesComboBox.selectedIndex=-1)}if(t.is(i)){let t;if(a.length>0&&!1===s&&(t=a.indexOf(i))>-1&&(o=l.get("searchAttributes.AttributeWarning"),s=!0),!1===s){let t=A._get6WDiv(i,"PreferredHierarchical");_.className="search_center_set_left_div search_center_6Wtags_align search_center_margin search_center_general_display_flex";let r={cardDiv:t,datasource:e,type:"",textOnCard:n,uri:i,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(r),u.enableButtons()}else{let e=u.createWdgAlert();e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:o})}}A.preferredHierarchicalPredicatesComboBox.selectedIndex=-1}}),A.checkboxHierarchicalTagsDisplay.addEventListener("change",function(){u.enableButtons(),!1===A.checkboxHierarchicalTagsDisplay.checkFlag?h.addClassName("search_center_disable"):h.removeClassName("search_center_disable")}.bind(this))}let ue=e.create("div",{class:"search_center_third_div",id:"search-center-6WTags3"}).inject(r),he=e.create("div",{class:"search_center_fourth_div",id:"search-center-6WTags4"}).inject(r);if(!0===this._isOntologyActivated()){let t=e.create("div",{}).inject(he),r=e.create("div",{class:"companyTagsLevelDiv"}).inject(t),a=(e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagsHeader",text:l.get("6WTagsFilter.CompanyTags.companyTagslevel1i.text")}).inject(r),e.create("div",{class:"companyTagsLevelDiv",id:"companyTagslevel2"}).inject(t)),n=(e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel2i",text:l.get("6WTagsFilter.CompanyTags.companyTagslevel2i.text")}).inject(a),e.create("div",{class:"input-group companyTagsLevelSubDiv",id:"companyTagslevel2ii"}).inject(a));var _e=e.create("input",{type:"text",class:"form-control",id:"datasetInput",placeholder:l.get("6WTagsFilter.ControlledOntology.Dataset.title"),disabled:"true"}).inject(n);this._datasetInput=_e,this.getCurrentDatasetTitle(_e);var pe=new v({id:"datasetSelectormodal",className:"site-reset",closable:!0,header:"<h4>"+l.get("6WTagsFilter.CompanyTags.datasetSelectormodal.header")+"</h4>",body:"",footer:[new y({id:"datasetSelectormodalUpdateBtn",value:l.get("6WTagsFilter.CompanyTags.datasetSelectormodal.updateBtn"),className:"primary",events:{onClick:function(){pe.hide(),fe.hide(),o.show(),Se.hide();var e=p.getSelectedDatasetTitle();e&&_e.setAttribute("placeholder",e)}}}),new y({id:"datasetSelectormodalCancelBtn",value:l.get("6WTagsFilter.CompanyTags.datasetSelectormodal.cancelBtn"),className:"default",events:{onClick:function(){pe.hide()}}})]}).inject(n);let i=e.create("div",{id:"comboBoxDiv"});pe.setBody(i);var ge=e.create("span",{class:"input-group-btn"}).inject(n),fe=new y({id:"updateDatasetBtn",value:l.get("6WTagsFilter.CompanyTags.updateDatasetBtn.value"),events:{onClick:function(){b.getSearchSettings({tenantID:u.platformID}).then(function(e){if(e.hasOwnProperty("enterprise_ontology")){let t=[{dataset:e.enterprise_ontology[0].dataset,datasetTitle:e.enterprise_ontology[0].datasetTitle,sessionId:e.enterprise_ontology[0].sessionId,"session@id":e.enterprise_ontology[0]["session@id"],sessionTitle:e.enterprise_ontology[0].sessionTitle}];g.getOntologyConceptsFromSessionId(t).then(function(){console.log("First time test")},function(){reject("Fail: First in session")})}_e.setAttribute("placeholder",e.enterprise_ontology[0].datasetTitle)}),pe.show()}}}).inject(ge);let s=e.create("div",{id:"companyTagslevel2iii",class:"companyTagsLevelSubDiv"}).inject(a),o=e.create("div",{class:"companyTagsLevelSubDiv"}).inject(s);new y({value:l.get("6WTagsFilter.CompanyTags.testNDeployBtn.value"),id:"testNDeployBtn",class:"companyTagslevel2iiiaBtn",className:"primary",events:{onClick:function(){Ce.show(),Ce.setBody(p.getWarningReport()),ve.enable(),(p.areConceptsDuplicated()||p.areConceptsMoved()||p.areConceptsDeleted()||!p.getSelectedDatasetTitle())&&ve.disable()}}}).inject(o);o.hide();new y({value:l.get("6WTagsFilter.CompanyTags.testBtn.value"),id:"testBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){ye.show(),ye.setBody(p.getWarningReport())}}}).inject(o),new y({value:l.get("6WTagsFilter.CompanyTags.cancelUpdateBtn.value"),id:"cancelUpdateBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){o.hide(),fe.show(),Se.show(),L.getCurrentDatasetTitle(_e)}}}).inject(o);let c=e.create("div",{class:"companyTagsLevelSubDiv"}).inject(s);var Ce=new v({className:"site-reset",closable:!0,header:"<h4>"+l.get("6WTagsFilter.CompanyTags.statusModal.header")+"</h4>",footer:[]}).inject(c),me=e.create("div",{}),ve=new y({id:"statusModalFooterDeployBtn",value:l.get("6WTagsFilter.CompanyTags.deployBtn.value"),className:"primary",events:{onClick:function(){o.hide(),Se.show(),fe.show(),Ce.hide(),p.onUpdateUI(),L.clickOnApply(),L.scrollerText=p.getSelectedDatasetTitle()+"\n"+L.scrollerText,L.scrollerBody.setText(L.scrollerText)}}}).inject(me);new y({id:"statusModalFooterCancelDeployBtn",value:l.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){o.hide(),Se.show(),fe.show(),Ce.hide(),L.getCurrentDatasetTitle(_e)}}}).inject(me);Ce.setFooter(me);var ye=new v({className:"site-reset",closable:!0,header:"<h4>"+l.get("6WTagsFilter.CompanyTags.statusModal2.header")+"</h4>",footer:[]}).inject(c),be=e.create("div",{});new y({id:"statusModal2FooterCancelTestBtn",value:l.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){ye.hide()}}}).inject(be);ye.setFooter(be);var Se=new y({value:l.get("6WTagsFilter.CompanyTags.statusBtn.value"),className:" success btn-sm active companyTagStatus",events:{onClick:function(){Se.setFocus(!1)}}}).inject(c);let d=e.create("div",{class:"companyTagsLevelDiv"}).inject(t),h=(e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel3i",text:l.get("6WTagsFilter.CompanyTags.companyTagslevel3i.text")}).inject(d),e.create("div",{}).inject(d));this.scrollerBody=e.create("div",{id:"DataSetScroller",text:this.scrollerText?this.scrollerText:""}).inject(h),new S({element:this.scrollerBody}).inject(h)}C.getOption("tagsColorCustomize")&&h.render(ue),C.getOption("controlledVocabulary")&&(C.getOption("tagsColorCustomize")?_.render(he):_.render(ue)),!0===this._isOntologyActivated()&&p.render(comboBoxDiv),s.mask(z),s.mask(O),L.getPredicatesObject().then(function(e){let r=L.filter6WRootPredicates(e);L.getRootWOfPredicates().then(function(a){L.cleanUpAttributeCards(),A.preferredPredicatesComboBox.elementsList=r.predicates,t.is(A.preferredHierarchicalPredicatesComboBox)&&(A.preferredHierarchicalPredicatesComboBox.elementsList=r.predicates),t.is(A.configTagRelationshipPredicatesComboBox)&&(A.configTagRelationshipPredicatesComboBox.elementsList=r.predicates),A.excludedPredicatesComboBox.elementsList=r.predicates,u.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",r.typeMap);let n=u.getLocalCacheFor6WTags();if(t.is(n)&&n.length>0)for(let e=0;e<n.length;e++){let r=n[e];if("AllDataSourcesandTypes"===r.source){let e=r.predicates;if(t.is(e)&&e.length>0){j.className="search_center_set_left_div search_center_6Wtags_align search_center_margin search_center_general_display_flex";for(let t=0;t<e.length;t++){let e=r.predicates[t].uri,a={cardDiv:A._get6WDiv(e,"Preferred"),datasource:"AllDataSourcesandTypes",textOnCard:A._attributesMap[e],uri:e,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(a)}}let a=r.excluded_predicates;if(t.is(a)&&a.length>0){J.className="search_center_set_left_div search_center_6Wtags_align search_center_margin search_center_general_display_flex";for(let e=0;e<a.length;e++){let t=r.excluded_predicates[e].uri,a={cardDiv:A._get6WDiv(t,"Excluded"),datasource:"AllDataSourcesandTypes",textOnCard:A._attributesMap[t],uri:t,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(a)}}}}let i=[],s=JSON.parse(d);if(t.is(s)&&s.hasOwnProperty("applications")&&t.is(s.applications,"array"))for(let e=0;e<s.applications.length;e++){let t=s.applications[e];A._appsMap[t.nlsName]=t.appID,i.push(t.nlsName)}A.applicationCntxtComboBox.elementsList=i,A.applicationCntxtComboBox.addEventListener("change",function(){u.enableButtons(),L.cleanUpAttributeCards(),u.clearLocalCacheFor6WTags();let r=L.filter6WRootPredicates(e);L.cleanUpAttributeCards(),A.preferredPredicatesComboBox.elementsList=r.predicates,t.is(A.preferredHierarchicalPredicatesComboBox)&&(A.preferredHierarchicalPredicatesComboBox.elementsList=r.predicates),t.is(A.configTagRelationshipPredicatesComboBox)&&(A.configTagRelationshipPredicatesComboBox.elementsList=r.predicates),A.excludedPredicatesComboBox.elementsList=r.predicates,u.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",r.typeMap);let a=u.getAppPredicates(A._appsMap[A.applicationCntxtComboBox.currentValue]),n=null,i=null;if(a.hasOwnProperty("preferred_predicates")&&(n=a.preferred_predicates),a.hasOwnProperty("excluded_predicates")&&(i=a.excluded_predicates),t.is(n)&&n.length>0){A.preferredWhatCards.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_6Wtags_align search_center_top_margin search_center_general_display_flex";for(let e=0;e<n.length;e++){let r=n[e].uri,a=A._get6WDiv(r,"Preferred"),i=A._attributesMap[r];if(t.is(a)&&t.is(i)){let e={cardDiv:a,datasource:"AllDataSourcesandTypes",type:"",textOnCard:i,uri:r,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(e)}}}if(t.is(i)&&i.length>0){A.excludedWhatCards.parentElement.parentElement.parentElement.children[0].className="search_center_set_left_div search_center_6Wtags_align search_center_top_margin search_center_general_display_flex";for(let e=0;e<i.length;e++){let r=i[e].uri,a=A._get6WDiv(r,"Excluded"),n=A._attributesMap[r];if(t.is(a)&&t.is(n)){let e={cardDiv:a,datasource:"AllDataSourcesandTypes",type:"",textOnCard:n,uri:r,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(e)}}}}.bind(L)),A.applicationCntxtComboBox.currentValue=i[0],u.disableButtons()}),s.unmask(widget.body),s.unmask(O),s.unmask(z)},function(){s.unmask(widget.body)}),A.checkboxAttributeDisplay.addEventListener("change",function(){u.enableButtons(),!1===A.checkboxAttributeDisplay.checkFlag?(N.addClassName("search_center_disable"),V.addClassName("search_center_disable"),x.addClassName("search_center_disable")):(N.removeClassName("search_center_disable"),V.removeClassName("search_center_disable"),x.removeClassName("search_center_disable"))}.bind(this))},isThisNotARootPredicates:function(e){return""!==e.subPropertyOf},renderTagRelationshipRow:function(r){let n=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:r.textOnCard}).inject(r.cardDiv);n.addClassName("search_center_category_row_span");let i=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:r.textOnCard+"Text_part",html:r.textOnCard}).inject(n);i.addClassName("search_center_category_row_html"),t.is(r.uri)&&i.setAttribute("sccuri",r.uri);let s=new a({type:"radio",value:1}).inject(n);s.elements.container.addClassName("scc_6wtags_tag_relationship_orbtn_toggle");let o=new a({type:"radio",value:0}).inject(n);if(o.elements.container.addClassName("scc_6wtags_tag_relationship_andbtn_toggle"),this._listOfIrrelevantAndTags.length>0&&t.is(r.uri)){this._listOfIrrelevantAndTags.indexOf(r.uri)>-1&&o.elements.container.addClassName("search_center_disable")}let c=new a({type:"radio",value:0}).inject(n);c.elements.container.addClassName("scc_6wtags_tag_relationship_xorbtn_toggle"),s.addEventListener("change",function(){u.enableButtons()}.bind(this)),o.addEventListener("change",function(){u.enableButtons()}.bind(this)),c.addEventListener("change",function(){u.enableButtons()}.bind(this)),t.is(r.operator)&&"AND"===r.operator?o.checkFlag=!0:t.is(r.operator)&&"OR"===r.operator?s.checkFlag=!0:c.checkFlag=!0;let l=e.create("div",{class:"fonticon fonticon-clear fonticon-x scc_6wtags_tag_relationship_delete"}).inject(n);l.setStyle("color","#b4b6ba"),l.addEventListener("click",function(e){if(t.is(e.currentTarget.parentElement)){let t=e.currentTarget.parentElement.parentElement;e.currentTarget.parentElement.destroy(),1===t.childNodes.length&&(t.childNodes[0].hidden=!0),u.enableButtons()}},!1),l.addEventListener("mouseover",function(e){e.currentTarget.setStyle("color","#3d3d3d")},!1),l.addEventListener("mouseout",function(e){e.currentTarget.setStyle("color","#b4b6ba")},!1)},_getKeyByValue:function(e,t){return Object.keys(e).find(r=>e[r]===t)},_buildNoSelectionMsgDiv:function(r){if(t.is(r)){let t=e.create("div",{class:"search_center_general_display_flex search_center_6Wtags_NoPredicateSection",id:"search-type-display-text"}).inject(r);e.create("p",{class:"search_center_text search_center_6Wtags",text:l.get("SearchCenter6WTagsFilter.No_Predicate")}).inject(t)}},_get6WDiv:function(e,r){let a=null,n=A._6WPredicatesMap.find(function(t){return t.curi===e});return t.is(n)?("ds6w:what"===n.lineage&&(a="Preferred"===r?A.preferredWhatCards:"PreferredHierarchical"===r?A.preferredHierarchicalWhatCards:A.excludedWhatCards),"ds6w:where"===n.lineage&&(a="Preferred"===r?A.preferredWhereCards:"PreferredHierarchical"===r?A.preferredHierarchicalWhereCards:A.excludedWhereCards),"ds6w:who"===n.lineage&&(a="Preferred"===r?A.preferredWhoCards:"PreferredHierarchical"===r?A.preferredHierarchicalWhoCards:A.excludedWhoCards),"ds6w:when"===n.lineage&&(a="Preferred"===r?A.preferredWhenCards:"PreferredHierarchical"===r?A.preferredHierarchicalWhenCards:A.excludedWhenCards),"ds6w:how"===n.lineage&&(a="Preferred"===r?A.preferredHowCards:"PreferredHierarchical"===r?A.preferredHierarchicalHowCards:A.excludedHowCards),"ds6w:why"===n.lineage&&(a="Preferred"===r?A.preferredWhyCards:"PreferredHierarchical"===r?A.preferredHierarchicalWhyCards:A.excludedWhyCards)):"computedCountryInfo"===e&&(a="Preferred"===r?A.preferredWhereCards:"PreferredHierarchical"===r?A.preferredHierarchicalWhereCards:A.excludedWhereCards),t.is(a)&&t.is(a.childNodes[0].childNodes[1])&&(a.childNodes[0].childNodes[1].hidden=!0),a},filter6WRootPredicates:function(e){let r,a,n={},i={},s=[],o=A.applicationCntxtComboBox.currentValue,c=A._appsMap[o];for(a in e)if(e[a].properties.length>0){let n=(r=e[a].properties).length;if(void 0!==r&&n>0){e[a].properties=r.filter(this.isThisNotARootPredicates),r.sort(function(e,t){let r=e.label;r=r.toUpperCase();let a=t.label;return r<(a=a.toUpperCase())?-1:r>a?1:0});for(let o=0;o<n;o++){if("X3DSEAR_AP"===c&&("ds6w:project"===r[o].curi||"ds6w:community"===r[o].curi||"ds6w:what"===r[o].curi||"ds6w:where"===r[o].curi||"ds6w:who"===r[o].curi||"ds6w:when"===r[o].curi||"ds6w:how"===r[o].curi||"ds6w:why"===r[o].curi))continue;let n=r[o].label;t.is(n)&&""!==n&&("ds6w"!==a&&(n=n+" ("+e[a].label+")"),s.push(n),i[r[o].curi]=n,A._attributesMap[r[o].curi]=n,A._6WSubProperties.push(r[o].curi))}}}let d=localStorage.getItem("TagNavigator-simplifiedTagger");if(t.is(d)&&"true"===d){let e=l.get("SearchCenter6WTagsFilter.Predicates.OwnerCountry"),t="computedCountryInfo";s.push(e),i[t]=e,A._attributesMap[t]=e}return n.predicates=s,n.typeMap=i,this._filter6WRootPredicatesPromise.resolve(),n},clickOnApply:function(){u.enableButtons(),document.getElementById("id_in_app_apply").click(),u.disableButtons()},getCurrentDatasetTitle:function(e){b.getSearchSettings({tenantID:u.platformID}).then(function(t){t.hasOwnProperty("enterprise_ontology")&&e.setAttribute("placeholder",t.enterprise_ontology[0].datasetTitle)})},getPredicatesObject:function(){return new r(function(e,t){let r={onComplete:function(t){UWA.log("Got a predicates result!"+t),e(t)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),t(e)},tenantId:u.platformID,lang:widget.lang,apiVersion:"R2021x"};o.getFedProperties(r)})},getRootWOfPredicates:function(){let e=this;if(A._6WSubProperties.length>0){let r=null;A._6WSubProperties.forEach(e=>{r=t.is(r)?r+","+e:e});let a={onComplete:function(r){UWA.log("Got a Root W of predicates result!"),t.is(r,"array")&&(A._6WPredicatesMap=r),e._rootWOfPredicatesPromise.resolve(r)},onFailure:function(t){UWA.log("getPropertiesRoots service request Fail!"+t),e._rootWOfPredicatesPromise.reject(t)},tenantId:u.platformID,lang:widget.lang};o.getPropertiesRoots(r,a)}return this._rootWOfPredicatesPromise.promise},cleanUpTagRelationCards:function(){for(let e=A.tagRelationshipCards.childElementCount-1;e>0;e--){let r=A.tagRelationshipCards.childNodes[e];t.is(r)&&r.destroy()}A.tagRelationshipCards.childNodes[0].hidden=!0},cleanUpAttributeCards:function(){let e=A.preferredWhatCards.parentElement.childElementCount;for(let r=0;r<e;r++){let e=A.preferredWhatCards.parentElement.childNodes[r];if(t.is(e)){for(let t=e.childElementCount-1;t>0;t--)e.childNodes[t].destroy();t.is(e.childNodes[0].childNodes[1])&&(e.childNodes[0].childNodes[1].hidden=!1)}}e=A.excludedWhatCards.parentElement.childElementCount;for(let r=0;r<e;r++){let e=A.excludedWhatCards.parentElement.childNodes[r];if(t.is(e)){for(let t=e.childElementCount-1;t>0;t--)e.childNodes[t].destroy();t.is(e.childNodes[0].childNodes[1])&&(e.childNodes[0].childNodes[1].hidden=!1)}}},_getCardsList:function(e){let r=[],a=null;if(t.is(e,"string")){"Preferred"===e?a=A.preferredWhatCards:"PreferredHierarchical"===e?a=A.preferredHierarchicalWhatCards:"Excluded"===e&&(a=A.excludedWhatCards);let n=a.parentElement.childElementCount;for(let e=0;e<n;e++){let n=a.parentElement.childNodes[e];if(t.is(n)){let e=n.childElementCount;for(let a=1;a<e;a++){let e={};e.uri=n.childNodes[a].getAttribute("sccURI"),t.is(e.uri)&&r.push(e)}}}}return r},_getTagRelationshipCards:function(){let e=[],r=A.tagRelationshipCards,a=r.childElementCount;for(let n=1;n<a;n++){let a=r.childNodes[n];if(t.is(a)){a.childElementCount;if(a.childElementCount>3){let r={};r.uri=a.childNodes[0].getAttribute("sccURI"),!0===a.childNodes[1].dsModel.checkFlag?r.operator="OR":!0===a.childNodes[2].dsModel.checkFlag?r.operator="AND":r.operator="XOR",t.is(r.uri)&&e.push(r)}}}return e},_getTagIrrelevantOperator:function(){let e={};return e.irrelevantANDPredicates=this._listOfIrrelevantAndTags,e},getTabInputsToStore:function(){let e={attributes_display:A.checkboxAttributeDisplay.checkFlag},r=[],a={},n=[];if(t.is(n,"array")&&1===n.length)t.is(n[0].source)&&(a.source=n[0].source),t.is(n[0].predicates)&&(a.predicates=n[0].predicates),t.is(n[0].excluded_predicates)&&(a.excluded_predicates=n[0].excluded_predicates),r.push(a);else{a.source="AllDataSourcesandTypes";let e=A._getCardsList("Preferred");a.predicates=e;let t=A._getCardsList("Excluded");a.excluded_predicates=t,r.push(a)}let i=[],s={},o={},c=A.applicationCntxtComboBox.currentValue,l=A._appsMap[c];return t.is(a.predicates)&&(o.preferred_predicates=a.predicates),t.is(a.excluded_predicates)&&(o.excluded_predicates=a.excluded_predicates),s[l]=o,i.push(s),e.context_apps_predicates=i,"X3DSEAR_AP"===l&&(e["ds6w:type"]=r),C.getOption("tagsColorCustomize")&&(e.tagColorization=h.getInputsToStore()),C.getOption("controlledVocabulary")&&(e.controlledVocabulary=_.getTabInputsToStore()),!0===this._isOntologyActivated()&&(e.enterprise_ontology=p.getTabInputsToStore(),e.current_enterprise_ontology_title=e.enterprise_ontology[0].datasetTitle,e.enterprise_ontology_history=A.scrollerText),!0===C.getOption("activate_hierarchical_tag_depth")&&(e.hierarchical_predicates={specify_hierarchical_predicates:A.checkboxHierarchicalTagsDisplay.checkFlag,hierarchical_predicates:A._getCardsList("PreferredHierarchical")},this._checkHierarchicalTagUpdate(e.hierarchical_predicates),this._prev_hierarchical_predicates=e.hierarchical_predicates),e.tagRelationships={activate_tag_relationship:A.checkboxActivateTagRelationship.checkFlag,tagRelationship_predicates:A._getTagRelationshipCards(),tagRelationship_IrrelevantOpert:A._getTagIrrelevantOperator()},e},_checkHierarchicalTagUpdate:function(e){let r=!1;if(t.is(this._prev_hierarchical_predicates))if(this._prev_hierarchical_predicates.specify_hierarchical_predicates!==e.specify_hierarchical_predicates)r=!0;else if(this._prev_hierarchical_predicates.hierarchical_predicates.length!==e.hierarchical_predicates.length)r=!0;else{let t=[];this._prev_hierarchical_predicates.hierarchical_predicates.forEach(e=>{t.push(e.uri)});for(let a=0;a<e.hierarchical_predicates.length;a++)if(t.indexOf(e.hierarchical_predicates[a].uri)<0){r=!0;break}}else r=!0;e.version=r?""+ +new Date:this._prev_hierarchical_predicates.version},onResetTab:function(e){let r;r=t.is(e,"string")?JSON.parse(e):e,u.clearLocalCacheFor6WTags();let a=this;if(a.cleanUpAttributeCards(),t.is(r)){if(r.hasOwnProperty("attributes_display")){let e=r.attributes_display;t.is(e)&&(A.checkboxAttributeDisplay.checkFlag=e)}let n="X3DSEAR_AP",i=this._getKeyByValue(A._appsMap,n);t.is(i)&&(A.applicationCntxtComboBox.currentValue=i),this.cleanUpAttributeCards();let s=null,o=null,c="AllDataSourcesandTypes";if(r.hasOwnProperty("context_apps_predicates")){let e=r.context_apps_predicates;if(t.is(e)){this.cleanUpAttributeCards();let e=u.getAppPredicates(n);e.hasOwnProperty("preferred_predicates")&&(s=e.preferred_predicates),e.hasOwnProperty("excluded_predicates")&&(o=e.excluded_predicates)}}else s=r.predicates,o=r.excluded_predicates;if(t.is(s)&&s.length>0)for(let e=0;e<s.length;e++){let t=s[e].uri,r={cardDiv:A._get6WDiv(t,"Preferred"),datasource:c,type:"",textOnCard:A._attributesMap[t],uri:t,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(r)}if(t.is(o)&&o.length>0)for(let e=0;e<o.length;e++){let t=o[e].uri,r={cardDiv:A._get6WDiv(t,"Excluded"),datasource:c,type:"",textOnCard:A._attributesMap[t],uri:t,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(r)}if(r.hasOwnProperty("tagRelationships")){let e=r.tagRelationships;t.is(e)&&(t.is(A.tagRelationshipCards)&&this.cleanUpTagRelationCards(),A.checkboxActivateTagRelationship.checkFlag=e.activate_tag_relationship,t.is(e.tagRelationship_predicates)&&e.tagRelationship_predicates.length>0&&a.getPredicatesObject().then(function(t){a.getRootWOfPredicates().then(function(t){for(let t=0;t<e.tagRelationship_predicates.length;t++){let r=e.tagRelationship_predicates[t].uri,n=A._attributesMap[r],i={cardDiv:A.tagRelationshipCards,textOnCard:n,uri:r,tabName:"SearchControl_6WTags",operator:e.tagRelationship_predicates[t].operator};a.renderTagRelationshipRow(i)}A.tagRelationshipCards.childNodes[0].hidden=!1,u.disableButtons()})}))}else t.is(A.checkboxActivateTagRelationship)&&(A.checkboxActivateTagRelationship.checkFlag=!1),t.is(A.tagRelationshipCards)&&(this.cleanUpTagRelationCards(),a.getPredicatesObject().then(function(e){a.getRootWOfPredicates().then(function(e){if(t.is(a._listOfDefaultAndTags)&&a._listOfDefaultAndTags.length>0){for(let e=0;e<a._listOfDefaultAndTags.length;e++){let t=a._listOfDefaultAndTags[e],r=A._attributesMap[t],n={cardDiv:A.tagRelationshipCards,textOnCard:r,uri:t,tabName:"SearchControl_6WTags",operator:"AND"};a.renderTagRelationshipRow(n)}A.tagRelationshipCards.childNodes[0].hidden=!1,u.disableButtons()}if(t.is(a._listOfIrrelevantAndTags)&&a._listOfIrrelevantAndTags.length>0){for(let e=0;e<a._listOfIrrelevantAndTags.length;e++){let t=a._listOfIrrelevantAndTags[e],r=A._attributesMap[t],n={cardDiv:A.tagRelationshipCards,textOnCard:r,uri:t,tabName:"SearchControl_6WTags",operator:"OR"};a.renderTagRelationshipRow(n)}A.tagRelationshipCards.childNodes[0].hidden=!1,u.disableButtons()}})}));if(!0===C.getOption("activate_hierarchical_tag_depth")){let e=r.hierarchical_predicates;t.is(e)?(A.checkboxHierarchicalTagsDisplay.checkFlag=e.specify_hierarchical_predicates,a._prev_hierarchical_predicates=e):t.is(A.checkboxHierarchicalTagsDisplay)&&(A.checkboxHierarchicalTagsDisplay.checkFlag=!1),a._cleanupHiearchicalPredicatesCardBlock(),a._buildHiearchicalPredicatesCardBlock(r,c)}C.getOption("tagsColorCustomize")&&h.onRender(e.tagColorization),C.getOption("controlledVocabulary")&&_.getInputFromStore(e.controlledVocabulary),!0===this._isOntologyActivated()&&p.getInputFromStore(e.enterprise_ontology),A.scrollerText=e.enterprise_ontology_history,A.scrollerText=A.scrollerText?A.scrollerText:"",A.scrollerBody.setText(A.scrollerText)}},_buildTagRelationshipCards:function(e){if(t.is(e)&&e.length>0){for(let t=0;t<e.length;t++){let r=e[t].uri,a=A._attributesMap[r],n={cardDiv:A.tagRelationshipCards,textOnCard:a,uri:r,tabName:"SearchControl_6WTags",operator:e[t].operator};this.renderTagRelationshipRow(n)}A.tagRelationshipCards.childNodes[0].hidden=!1}},_buildHiearchicalPredicatesCardBlock:function(e,a){r.all([this._rootWOfPredicatesPromise.promise,this._filter6WRootPredicatesPromise.promise]).then(function(){let r=e.hierarchical_predicates;if(t.is(r)){let e=r.hierarchical_predicates;if(t.is(e)&&e.length>0)for(let t=0;t<e.length;t++){let r=e[t].uri,n=A._get6WDiv(r,"PreferredHierarchical"),i=A._attributesMap[r],s={cardDiv:n,datasource:a,type:"",textOnCard:i,uri:r,tabName:"SearchControl_6WTags",deleteOption:!0};u.buildCardBlockRow(s)}}})},_cleanupHiearchicalPredicatesCardBlock:function(){let e=A.preferredHierarchicalWhatCards.parentElement.childElementCount;for(let r=0;r<e;r++){let e=A.preferredHierarchicalWhatCards.parentElement.childNodes[r];if(t.is(e)){for(let t=e.childElementCount-1;t>0;t--)e.childNodes[t].destroy();t.is(e.childNodes[0].childNodes[1])&&(e.childNodes[0].childNodes[1].hidden=!1)}}},_isOntologyActivated:()=>!0===m.isInternalProduction()||!0===C.getOption("allowEnterpriseDictionaryModification"),onUpdateUI:function(e){!0===this._isOntologyActivated()&&p.onUpdateUI()}};return A}),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/Controls/LineEditor","DS/UIKIT/IconDropdown","DS/UIKIT/Popover","DS/Tree/TreeDocument","DS/Tree/TreeNodeModel","DS/SNInfraUX/SNVocabAccess","DS/SNInfraUX/SearchResultCategories","DS/SearchControlCenter/scripts/SearchControlCenterServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchPreferences"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_,p,g,f,C,m,v,y){"use strict";var b="fake:dashboard",S={_categories:null,_parentDiv:null,_vocabPromise:{},render:function(e){this._parentDiv=e},loadCategories:function(){if(S._categories.suggestion=S._categories.suggestion||{},!t.is(S._categories.suggestion.list,"array")){var e=JSON.parse(C);S._categories.suggestion.list=e.result_categories.suggestion.list.concat([])}S._categories.suggestion.list=S._categories.suggestion.list||[];for(var r=S._categories.suggestion.list.length-1;r>=0;r--)!1===S._categories.suggestion.list[r].active&&S._categories.suggestion.list.splice(r,1);return S._categories},getTabInputsToStore:function(e){return-1!==["iphone","ipad","android"].indexOf(v.getDeviceCategory())?(y.setItem("InstantSearchSCC",!1),void y.commit()):m.getOption("deactivate_FUN108944")?void 0:(e.result_categories=S._categories,e.activate_instant_search=S.checkboxActivateInstantSearch.checkFlag,e.activate_instant_search_apps=S.checkboxActivateApplicationCategory.checkFlag,e)},onResetTab:function(e){if(-1!==["iphone","ipad","android"].indexOf(v.getDeviceCategory()))return y.setItem("InstantSearchSCC",!1),void y.commit();m.getOption("deactivate_FUN108944")||(this._categories=t.is(e.result_categories)?t.clone(e.result_categories):{},this.loadCategories(),this.renderInstantSearchSection(this._parentDiv),t.is(e.activate_instant_search)&&(this.checkboxActivateInstantSearch.checkFlag=e.activate_instant_search),t.is(e.activate_instant_search_apps)?this.checkboxActivateApplicationCategory.checkFlag=e.activate_instant_search_apps:this.checkboxActivateApplicationCategory.checkFlag=!0,this.setCategoriesSectionEnableState())},_checkActivateInstantSearch:function(){0==this._categories.suggestion.list.length?(this.checkboxActivateInstantSearch.checkFlag=!1,this.checkboxActivateInstantSearch.disabled=!0):this.checkboxActivateInstantSearch.disabled=!1},renderInstantSearchSection:function(t){this.divInstantSearchSection&&this.divInstantSearchSection.destroy(),this.divInstantSearchSection=e.create("div",{class:"",id:"general-tab-instantsearch-section"}).inject(t);var r=e.create("div",{class:"",id:"general-tab-instantsearch-title"}).inject(this.divInstantSearchSection);e.create("p",{class:"search_center_text_heading",text:f.get("General.Instant_search.Title")}).inject(r),this.renderActivateInstantSearch(this.divInstantSearchSection),this.renderActivateApplicationCategory(this.divInstantSearchSection),this.renderCategoriesSection(this.divInstantSearchSection)},renderActivateInstantSearch:function(t){var r=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"general-tab-activate-instant-search"}).inject(t),a=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-instant-search-toggle"}).inject(r);this.checkboxActivateInstantSearch=new n({type:"checkbox",label:f.get("InstantSearch.Activate_Instant_Search"),className:"primary",touchMode:"true"}).inject(a);var i=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(r);new l({target:i,trigger:"hover",animate:"true",position:"top",body:f.get("InstantSearch.Activate_Instant_Search.popover"),title:""}),this.checkboxActivateInstantSearch.addEventListener("change",function(){S.setCategoriesSectionEnableState(),p.enableButtons()})},renderActivateApplicationCategory:function(t){this.divActivateApplicationCategorySpan&&this.divActivateApplicationCategorySpan.destroy(),this.divActivateApplicationCategorySpan=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"general-tab-activate-application-category"}).inject(t);var r=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-application-category-toggle"}).inject(this.divActivateApplicationCategorySpan);this.checkboxActivateApplicationCategory=new n({type:"checkbox",label:f.get("InstantSearch.Activate_Application_Category"),className:"primary",touchMode:"true"}).inject(r);var a=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(this.divActivateApplicationCategorySpan);new l({target:a,trigger:"hover",animate:"true",position:"top",body:f.get("InstantSearch.Activate_Application_Category.popover"),title:""}),this.checkboxActivateApplicationCategory.addEventListener("change",function(){p.enableButtons()})},renderCategoriesSection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"search_center_category_section"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection),this.renderCategories(this.divCategoriesSection),this._checkActivateInstantSearch()},renderCategories:function(t){var a=this;return this._renderedCategories=[],this.divCreatedCategoriesSection=e.create("div",{class:"search_center_created_categories_section"}).inject(t),this.divCreatedCategoriesSectionHeader=e.create("div",{class:"search_center_created_categories_section_header ",html:f.get("InstantSearch.Categories.section.header")}).inject(this.divCreatedCategoriesSection),new r(function(e,t){var n=a.loadCategories(),i=[];n.suggestion.list.forEach(function(e,t){i.push(a.ensureVocabLoaded(e.source))});var s=[];r.all(i).then(function(t){n.suggestion.list.forEach(function(e,r){s.push(a.renderCategoryRow(e,a.divCreatedCategoriesSection,t[r]))}),r.all(s).then(e)})})},setCategoriesSectionEnableState:function(){1==this.checkboxActivateInstantSearch.checkFlag?(this.divCategoriesSection.removeClassName("search_center_disable"),this.divActivateApplicationCategorySpan.removeClassName("search_center_disable")):(this.divCategoriesSection.addClassName("search_center_disable"),this.divActivateApplicationCategorySpan.addClassName("search_center_disable"))},_createAddCategoryRowSpan:function(t){var r=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return r.addClassName("search_center_add_category_row_span"),r},_createCategoryRowSpan:function(t){var r=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return r.addClassName("search_center_category_row_span"),r},_createCategoryTitleControl:function(t){var r=e.create("div",{class:t.class,id:t.id}).inject(t.divRow),a=new o({placeholder:f.get("InstantSearch.Title_Instant_Search"),touchMode:!0}).inject(r);a.elements.container.setStyle("display","grid"),a.elements.container.setStyle("max-width","unset");var n=this;return a.addEventListener("change",function(){var e=a.value.trim(),r=n._validateCategoryTitle(e,t.category_id);if(e&&r){if(!a.elements.container.hasClassName("result_category_input_error")){a.elements.container.addClassName("result_category_input_error");var i=p.createWdgAlert();i.inject(a.elements.container,"top");var s=f.get("InstantSearch.Category.DuplicateTitle",{title:r});i.add({className:"warning applyChangesAlert",message:s})}}else a.elements.container.removeClassName("result_category_input_error");n.enableAddCategoryButton()}),a},_createCategoryDatasourceControl:function(r){var a=e.create("div",{class:r.class,id:r.id}).inject(r.divRow),n=new i({placeholder:f.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0,elementsList:[]}).inject(a);n.elements.container.setStyle("width","100%"),this.getDataSourceList().then(function(e){if(n.elementsList=e,t.is(r.selectedSource)){var a=e.indexOf(p.getDatasourceDisplayName(r.selectedSource));a>=0&&(n.selectedIndex=a)}});var s=this;return n.addEventListener("change",function(){s.enableAddCategoryButton()}),n},_createCategoryTypeControl:function(r){var a=e.create("div",{class:r.class,id:r.id}).inject(r.divRow),n=new s({placeholder:f.get("Choose_type"),touchMode:!0,disabled:!0,enableSearchFlag:!0}).inject(a);function i(e,t){var r=[];return e.getChildren().forEach(function(e,a){t.indexOf(e.getAttributeValue("uri"))>=0&&r.push(e)}),r}function o(e){if(e.getChildren().length>0)n.elementsTree=e,n.disabled=!1,1==e.getChildren().length&&(n.selectedItems=i(e,e.getChildren()[0].getAttributeValue("uri")?[e.getChildren()[0].getAttributeValue("uri")]:[]),n.disabled=!0);else{n.disabled=!0;var t=p.createWdgAlert(),r=f.get("SearchType.NoTypesWarning");t.add({className:"warning applyChangesAlert",message:r})}c._promiseTypeListLoaded&&c._promiseTypeListLoaded.resolve(e)}n.elements.container.setStyle("max-width","unset");var c=this,l=r.datasourceComboBox;return l&&l.addEventListener("change",function(){var e=p.getDatasourceInternalName(l.currentValue);c.ensureVocabLoaded(e).then(o)}),r.vocabTypesTreeDocument&&(o(r.vocabTypesTreeDocument),t.is(r.selectedTypes,"array")&&(n.selectedItems=i(r.vocabTypesTreeDocument,r.selectedTypes))),n.addEventListener("change",function(){var e=n.selectedItems.length,t=m.getOption("instant_search_category_max_types");if(e>t){if(!n.elements.container.hasClassName("result_category_input_error")){n.elements.container.addClassName("result_category_input_error");var r=p.createWdgAlert();r.inject(n.elements.container,"top");var a=f.get("InstantSearch.Category.TypeCountMax",{max_count:t});r.add({className:"warning applyChangesAlert",message:a})}}else n.elements.container.removeClassName("result_category_input_error");c.enableAddCategoryButton()}),n},_getCategoryRowTitleHtml:function(e){return _.getCategoryTitleNls(e)},_getCategoryRowTitleAndSourceSeparatorHtml:function(){return" - "},_getCategoryRowSourceAndTypesSeparatorHtml:function(){return" - "},_getCategoryRowTypesSeparatorHtml:function(){return", "},_getCategoryRowSourceHtml:function(e){return p.getDatasourceDisplayName(e.source)||"Source Not Found"},_getCategoryRowTypesHtml:function(e,r){var a=this,n="";return t.is(e.types,"array")&&r.getChildren().forEach(function(t,r){var i=t.getAttributeValue("uri");e.types.indexOf(i)>=0?(n&&(n+=a._getCategoryRowTypesSeparatorHtml()),n+=p.getTypesDisplayName(e.source,i)):i==b&&(n+=t.getAttributeValue("nls"))}),n},_getCategoryRowHtml:function(e){var t=this._getCategoryRowTitleHtml(e.category);return t+=this._getCategoryRowTitleAndSourceSeparatorHtml(e),t+=this._getCategoryRowSourceHtml(e.category),t+=this._getCategoryRowSourceAndTypesSeparatorHtml(e),t+=this._getCategoryRowTypesHtml(e.category,e.model)},_createCategoryRowHtmlDiv:function(t){var r=e.create("div",{class:t.class,id:t.id,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return r.addClassName("search_center_category_row_html"),r},_setSelectedDatasource:function(e){var r=this;this.getDataSourceList().then(function(a){if(r.datasourceComboBox.elementsList=a,t.is(e)){var n=a.indexOf(p.getDatasourceDisplayName(e));n>=0&&(r.datasourceComboBox.selectedIndex=n)}})},_setSelectedTypes:function(e,t){var r=[];e.getChildren().forEach(function(e,a){t.indexOf(e.getAttributeValue("uri"))>=0&&r.push(e)}),this.typeAutocomplete.selectedItems=r},_setCategoryInEditMode:function(e){var t=this;e.parentDiv.addClassName("search_category_row_in_edit"),t._categoryInMod=e.category.id,t._disableDeleteModifyAllCategories(),t.categoryTitleLine.value=_.getCategoryTitleNls(e.category),t._promiseTypeListLoaded=r.deferred(),t._promiseTypeListLoaded.promise.then(function(r){t._setSelectedTypes(r,e.category.types),t.divAddCategoriesSection.removeClassName("search_center_disable")}),t._setSelectedDatasource(e.category.source),t.cancelAddCategoryButton.show(),t.addCategoryButton.disabled=!0,t.addCategoryButton.label=f.get("InstantSearch.Category.Action.SaveCategory")},_createCategoryRowActionsDiv:function(t){var r=this,a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);a.addClassName("search_result_category_row_actions");var n=e.create("div",{class:"fonticon fonticon-1x fonticon-pencil search_result_category_row_action"}).inject(a);n.addEventListener("click",function(){r._setCategoryInEditMode(t)},!1),n.addEventListener("mouseover",function(){n.addClassName("search_category_action_mouse_hover")},!1),n.addEventListener("mouseout",function(){n.removeClassName("search_category_action_mouse_hover")},!1);var i=e.create("div",{class:"fonticon fonticon-trash search_result_category_row_action"}).inject(a);return i.addEventListener("click",function(){r._removeCategoryModel(t.category.id),p.enableButtons(),r.renderCategoriesSection()},!1),i.addEventListener("mouseover",r._manageMouseOver,!1),i.addEventListener("mouseout",r._manageMouseOut,!1),a},renderCategoryRow:function(e,t,a){var n=this;return new r(function(r,i){var s=n._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-"+e.id,parentDiv:t});n._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-html-"+e.id,parentDiv:s,category:e,model:a}),n._createCategoryRowActionsDiv({class:"search_center_margin",model:a,category:e,parentDiv:s}),n._renderedCategories.push({id:e.id,div:s}),r()})},enableAddCategoryButton:function(){this.categoryTitleLine.value.trim()&&!this.categoryTitleLine.elements.container.hasClassName("result_category_input_error")&&this.datasourceComboBox.currentValue&&!this.typeAutocomplete.elements.container.hasClassName("result_category_input_error")?this.addCategoryButton.disabled=!1:this.addCategoryButton.disabled=!0},renderAddButtonCategoryRow:function(t){var r=this,n=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_category_add",id:"add-search-result-category"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_cancel",id:"add-search-result-category-cancel-button"}).inject(n);this.cancelAddCategoryButton=new a({touchMode:!0,disabled:!1,label:f.get("InstantSearch.Category.Action.CancelAddCategory")}).inject(i),this.cancelAddCategoryButton.getContent().addEventListener("buttonclick",function(){r.renderCategoriesSection()}),this.cancelAddCategoryButton.hide();var s=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_add",id:"add-search-result-category-add-button"}).inject(n);this.addCategoryButton=new a({emphasize:"primary",touchMode:!0,disabled:!0,label:f.get("InstantSearch.Category.Action.AddNewCategory")}).inject(s);var o=m.getOption("instant_search_category_max_categories");this._categories.suggestion.list.length>=o&&t.addClassName("search_center_disable"),this.addCategoryButton.getContent().addEventListener("buttonclick",function(){function e(e){r.typeAutocomplete.selectedItems&&r.typeAutocomplete.selectedItems.forEach(function(t,r){var a=t.getAttributeValue("uri");a&&(a==b&&(a="Dashboard",e.match_on="context_name"),e.types.push(a))})}if(r._categoryInMod){var t={id:r._categoryInMod,custom:!0,name:r.categoryTitleLine.value,source:p.getDatasourceInternalName(r.datasourceComboBox.currentValue),types:[]};e(t),r._replaceCategoryModel(t)}else{var a={id:(new Date).getTime(),custom:!0,name:r.categoryTitleLine.value,source:p.getDatasourceInternalName(r.datasourceComboBox.currentValue),types:[]};e(a),r._addCategoryModel(a)}p.enableButtons(),r.renderCategoriesSection()})},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{class:"search_center_add_category_section"}).inject(t);var r=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),a=this._createCategoryTitleControl({class:"search_center_category_title",id:"search-result-category-title",divRow:r}),n=this._createCategoryDatasourceControl({class:"search_center_category_source",id:"add-search-result-category-source-combo",divRow:r});n.disabled=!1;var i=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),s=this._createCategoryTypeControl({class:"search_center_category_types",id:"add-search-result-category-type-combo",divRow:i,datasourceComboBox:n});this.categoryTitleLine=a,this.datasourceComboBox=n,this.typeAutocomplete=s,this._categoryInMod=null,this.renderAddButtonCategoryRow(this.divAddCategoriesSection)},_removeCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e){this._categories.suggestion.list.splice(t,1);break}},_replaceCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e.id){this._categories.suggestion.list.splice(t,1,e);break}},_validateCategoryTitle:function(e,t){for(var r=0;r<this._categories.suggestion.list.length;r++){var a=_.getCategoryTitleNls(this._categories.suggestion.list[r]);if(a.toLowerCase()==e.toLowerCase()&&(!this._categoryInMod||this._categoryInMod&&this._categories.suggestion.list[r].id!=this._categoryInMod))return a}return!1},_addCategoryModel:function(e){this._categories.suggestion.list.push(e)},_disableDeleteModifyAllCategories:function(){S._renderedCategories.forEach(function(e,t){e.div.addClassName("search_center_disable")})},ensureVocabLoaded:function(e){var a=this;return this._vocabPromise[e]||(this._vocabPromise[e]=new r(function(r,n){a.getDataSourceList().then(function(){var a={};a.vocabId=p._datSourceToVocabID[e],a.tenantId=p.platformID,h.loadVocabularyClasses(a,function(a){var n=[],i={},s=new d;if(s.prepareUpdate(),"dashboard"==e&&0==a.classInfos.length&&(a.classInfos=[{nlsName:f.get("Type.dashboard"),uri:b}]),"drive"==e){var o=new u({label:""});s.addRoot(o)}else for(let e=0;e<a.classInfos.length;e++)if(t.is(a.classInfos[e].nlsName,"string")&&t.is(a.classInfos[e].uri)){n.push(a.classInfos[e].nlsName),i[a.classInfos[e].uri]=a.classInfos[e].nlsName;o=new u({label:a.classInfos[e].nlsName,grid:{nls:a.classInfos[e].nlsName,uri:a.classInfos[e].uri}});s.addRoot(o)}s.pushUpdate(),p.updateTypesMapping(e,i),r(s)})})})),this._vocabPromise[e]},getDataSourceList:function(){function e(e){for(var t=-1,r=e.concat(),a=0;a<r.length;a++)if("other"===p.getDatasourceInternalName(r[a])){t=a;break}return t>-1&&r.splice(t,1),r}return this._datasourceListPromise||(this._datasourceListPromise=new r(function(r,a){var n=m.getOption("dataSourcesToFilterFromAdvancedSearch");delete n.dashboard;var i=p.getDataSourceList({dataSourcesToFilterFromAdvancedSearch:n});t.is(i,"array")?r(e(i)):i.then(function(t){r(e(t))})})),this._datasourceListPromise}};return S}),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTab",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Editor","DS/UIKIT/Popover","DS/MessageBus/MessageBus","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","i18n!DS/SNResultUX/assets/nls/SNResultUX.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNResultUX/utils/SearchViewOptions","DS/SearchControlCenter/scripts/SCCSynonymsDictonary"],function(e,t,r,a,n,i,s,o,c,l,d,u,h,_,p,g){"use strict";var f={viewModeComboBox:null,deltaTimeComboBox:null,dateModeComboBox:null,csvSeparatorComboBox:null,revisionComboBox:null,numberResultComboBox:null,checkboxAbbreviatedcount:null,checkboxAccessPLMParameters:null,checkboxSuggestions:null,checkboxSnippets:null,checkboxForceAdvSearch:null,_viewModeObject:{},_dateModeObject:{},_csvSeparatorObject:{},_revisionObject:{},onRenderFacet:function(n){var s=_.getOption("OneSearch"),l=e.create("div",{class:"search_center_main_div",id:"search-center-general0"}).inject(n),C=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(l);e.create("p",{class:"search_center_text_heading",text:d.get("General.Results_display")}).inject(C);var m=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-view-mode"}).inject(l),v=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-view-mode-text"}).inject(m),y=e.create("div",{class:"search_center_div_right",id:"general-tab-view-mode-combo"}).inject(m);e.create("p",{class:"search_center_text",text:d.get("Default_View_Mode_After_CacheCleaning")}).inject(v);var b=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(m);new i({target:b,trigger:"hover",animate:"true",position:"top",body:d.get("Default_View_Mode_After_CacheCleaning.popover"),title:""});var S=[],D=s;if(f._viewModeObject=p.getAvailableViews({simple_search_experience:D,getAllViews:!0}),t.is(f._viewModeObject)&&f._viewModeObject.length>0)for(let e=0;e<f._viewModeObject.length;e++){var A={},x=f._viewModeObject[e];A.labelItem=x.title,A.iconItem=x.icon,S.push(A)}f.viewModeComboBox=new a({elementsList:S,nbDisplayedElements:S.length,currentValue:S[0],touchMode:!0,enableSearchFlag:!0}).inject(y),y.setStyle("display","grid"),f.viewModeComboBox.elements.container.setStyle("max-width","unset");var T=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"general-tab-recent-time"}).inject(l),w=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-recent-time-text"}).inject(T),I=e.create("div",{class:"search_center_div_right",id:"general-tab-recent-time-combo"}).inject(T);e.create("p",{class:"search_center_text",text:d.get("Recent_Content_Delta_Time")}).inject(w);var N=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(T);new i({target:N,trigger:"hover",animate:"true",position:"top",body:d.get("Recent_Content_Delta_Time.popover"),title:""});var j=["5"+d.get("Minutes"),"10"+d.get("Minutes"),"15"+d.get("Minutes"),"20"+d.get("Minutes"),"25"+d.get("Minutes"),"30"+d.get("Minutes")];if(f.deltaTimeComboBox=new a({elementsList:j,nbDisplayedElements:j.length,currentValue:j[0],touchMode:!0,enableSearchFlag:!0}).inject(I),I.setStyle("display","grid"),f.deltaTimeComboBox.elements.container.setStyle("max-width","unset"),f._dateModeObject=_.getOption("date_display_mode_array"),t.is(f._dateModeObject,"array")&&f._dateModeObject.length>0){var B=[];for(let e=1;e<f._dateModeObject.length;e++){var O=f._dateModeObject[e];t.is(O,"object")&&t.is(O.id,"string")?B.push(u.get(O.id+".title")):h.error("Bad definition of date_display_mode_array !!!",f._dateModeObject)}if(B.length>0){var W=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-date-mode"}).inject(l),P=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-date-mode-text"}).inject(W),F=e.create("div",{class:"search_center_div_right",id:"general-tab-date-mode-combo"}).inject(W);e.create("p",{class:"search_center_text",text:u.get("Default_Date_Mode")}).inject(P),f.dateModeComboBox=new a({elementsList:B,nbDisplayedElements:B.length,currentValue:B[0],touchMode:!0,enableSearchFlag:!0}).inject(F),F.setStyle("display","grid"),f.dateModeComboBox.elements.container.setStyle("max-width","unset")}}if(f._csvSeparatorObject=_.getOption("csvSeparatorArray"),t.is(f._csvSeparatorObject,"array")&&f._csvSeparatorObject.length>0){var R=[];for(let e=1;e<f._csvSeparatorObject.length;e++){var M=f._csvSeparatorObject[e];t.is(M,"object")&&t.is(M.id,"string")?R.push(u.get(M.id+".title")):h.error("Bad definition of csvSeparatorArray !!!",f._csvSeparatorObject)}if(R.length>0){var k=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-csv-mode"}).inject(l),E=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-csv-mode-text"}).inject(k),U=e.create("div",{class:"search_center_div_right",id:"general-tab-csv-mode-combo"}).inject(k);e.create("p",{class:"search_center_text",text:u.get("Default_Csv_Separator")}).inject(E),f.csvSeparatorComboBox=new a({elementsList:R,nbDisplayedElements:R.length,domId:"combo-csv-mode",currentValue:R[0],touchMode:!0,enableSearchFlag:!0}).inject(U),U.setStyle("display","grid"),f.csvSeparatorComboBox.elements.container.setStyle("max-width","unset")}}if(f._revisionObject=_.getOption("show_search_results_revision_array"),t.is(f._revisionObject)&&f._revisionObject.length>0){var L=[];for(let e=0;e<f._revisionObject.length;e++){var V=f._revisionObject[e];t.is(V,"object")&&t.is(V.id,"string")?L.push(u.get(V.id+".title")):h.error("Bad definition of show_search_results_revision_array !!!",f._revisionObject)}if(L.length>0){var H=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-revision"}).inject(l),J=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-revision-type-text"}).inject(H),X=e.create("div",{class:"search_center_div_right",id:"general-tab-revision-type-combo"}).inject(H);e.create("p",{class:"search_center_text",text:u.get("Show_Search_Results")}).inject(J),f.revisionComboBox=new a({elementsList:L,nbDisplayedElements:L.length,currentValue:L[0],touchMode:!0,enableSearchFlag:!0}).inject(X),X.setStyle("display","grid"),f.revisionComboBox.elements.container.setStyle("max-width","unset")}}var z=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"general-tab-number-result"}).inject(l),G=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-number-result-text"}).inject(z),K=e.create("div",{class:"search_center_div_right",id:"general-tab-number-result-combo"}).inject(z);e.create("p",{class:"search_center_text",text:d.get("max_selection_for_selectall")}).inject(G);var q=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(z);new i({target:q,trigger:"hover",animate:"true",position:"top",body:d.get("max_selection_for_selectall.popover"),title:""});var Q=["200"+d.get("Items"),"400"+d.get("Items"),"600"+d.get("Items"),"800"+d.get("Items"),"1000"+d.get("Items")];f.numberResultComboBox=new a({elementsList:Q,nbDisplayedElements:Q.length,currentValue:Q[0],touchMode:!0,enableSearchFlag:!0}).inject(K),K.setStyle("display","grid"),f.numberResultComboBox.elements.container.setStyle("max-width","unset");var $=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(l);e.create("p",{class:"search_center_text_heading",text:d.get("General.UI_display")}).inject($);var Y=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"general-tab-abbreviated-count"}).inject(l),Z=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-abbreviated-count-toggle"}).inject(Y);f.checkboxAbbreviatedcount=new r({type:"checkbox",label:d.get("QuantityDisplay.Abbreviated_count_display"),className:"primary",touchMode:"true"}).inject(Z);var ee=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(Y);new i({target:ee,trigger:"hover",animate:"true",position:"top",body:d.get("QuantityDisplay.Abbreviated_count_display.popover"),title:""});var te=e.create("div",{class:"search_center_general_tab_div",id:"general-tab-access-PLMParameters"}).inject(l),re=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-PLMParameters-toggle"}).inject(te);f.checkboxAccessPLMParameters=new r({type:"checkbox",label:d.get("Advancedsearch.Access_to_plmparameters.title"),className:"primary",touchMode:"true"}).inject(re);var ae=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(te);new i({target:ae,trigger:"hover",animate:"true",position:"top",body:d.get("Advancedsearch.Access_to_plmparameters.popover"),title:""});var ne=_.getOption("OneSearchOFF");if(t.is(s)&&!0===s&&!0!==ne){var ie=e.create("div",{class:"search_center_general_tab_div",id:"general-tab-suggestions"}).inject(l),se=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Suggestions-toggle"}).inject(ie);f.checkboxSuggestions=new r({type:"checkbox",label:d.get("suggestion.title"),className:"primary",touchMode:"true"}).inject(se);var oe=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ie);new i({target:oe,trigger:"hover",animate:"true",position:"top",body:d.get("suggestion.popover"),title:""});var ce=e.create("div",{class:"search_center_general_tab_div",id:"general-tab-snippets"}).inject(l),le=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Snippets-toggle"}).inject(ce);f.checkboxSnippets=new r({type:"checkbox",label:d.get("search_snippets.title"),className:"primary",touchMode:"true"}).inject(le);var de=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ce);new i({target:de,trigger:"hover",animate:"true",position:"top",body:d.get("search_snippets.popover"),title:""}),f.checkboxSuggestions.addEventListener("change",function(){o.enableButtons()}),f.checkboxSnippets.addEventListener("change",function(){o.enableButtons()})}var ue=e.create("div",{class:"search_center_general_tab_div",id:"general-tab-force-AdvancedSearch"}).inject(l),he=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-AdvancedSearch-toggle"}).inject(ue);f.checkboxForceAdvSearch=new r({type:"checkbox",label:d.get("General.InContextSearch.forceAdvancedSearch.label"),className:"primary",touchMode:"true"}).inject(he);var _e=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ue);new i({target:_e,trigger:"hover",animate:"true",position:"top",body:d.get("General.InContextSearch.forceAdvancedSearch.popover"),title:""}),f.checkboxForceAdvSearch.addEventListener("change",function(){o.enableButtons()}),g.onRender(l),c.render(l),f.viewModeComboBox.addEventListener("change",function(){o.enableButtons()}),f.deltaTimeComboBox.addEventListener("change",function(){o.enableButtons()}),f.numberResultComboBox.addEventListener("change",function(){o.enableButtons()}),f.checkboxAbbreviatedcount.addEventListener("change",function(){o.enableButtons()}),f.checkboxAccessPLMParameters.addEventListener("change",function(){o.enableButtons()}),f.dateModeComboBox.addEventListener("change",function(){o.enableButtons()}),t.is(f.csvSeparatorComboBox)&&f.csvSeparatorComboBox.addEventListener("change",function(){o.enableButtons()}),f.revisionComboBox.addEventListener("change",function(){o.enableButtons()}),o.removeMask(widget.body)},getTabInputsToStore:function(){var e=f.deltaTimeComboBox.currentValue;t.is(e)&&(e=e.replace(d.get("Minutes"),""));var r=f.viewModeComboBox.currentValue;if(t.is(r))for(let e=0;e<f._viewModeObject.length;e++){var a=f._viewModeObject[e];if(r===a.title){r=a.id;break}}var n=f.numberResultComboBox.currentValue;t.is(n)&&(n=n.replace(d.get("Items"),""));var i=f.dateModeComboBox.currentValue;if(t.is(i))for(let e=0;e<f._dateModeObject.length;e++){var s=f._dateModeObject[e];if(i===u.get(s.id+".title")){i=s;break}}var o=t.is(f.csvSeparatorComboBox)?f.csvSeparatorComboBox.currentValue:u.get("COMMA.title");if(t.is(o))for(let e=0;e<f._csvSeparatorObject.length;e++){var l=f._csvSeparatorObject[e];if(o===u.get(l.id+".title")){o=l;break}}var h=f.revisionComboBox.currentValue;if(t.is(h))for(let e=0;e<f._revisionObject.length;e++){var p=f._revisionObject[e];if(h===u.get(p.id+".title")){h=p;break}}var C={defaultViewModeAfterCacheCleaning:r,defaultDateMode:i,defaultCsvSeparator:o,defaultRevision:h,Recent_Content_Delta_Time:e,max_selection_for_selectall:n,preciseCount:!0!==f.checkboxAbbreviatedcount.checkFlag,enablePLM:f.checkboxAccessPLMParameters.checkFlag,forceAdvancedSearch:f.checkboxForceAdvSearch.checkFlag},m=_.getOption("OneSearch"),v=_.getOption("OneSearchOFF");return t.is(m)&&!0===m&&!0!==v&&(C.suggest_admin=f.checkboxSuggestions.checkFlag,C.search_snippet_admin=f.checkboxSnippets.checkFlag),c.getTabInputsToStore(C),g.updateTabInputsToStore(C),C},onResetTab:function(e){var r;if(r=t.is(e,"string")?JSON.parse(e):e,t.is(r)){if(r.hasOwnProperty("defaultViewModeAfterCacheCleaning")){var a=r.defaultViewModeAfterCacheCleaning;if(t.is(a)){for(let e=0;e<f._viewModeObject.length;e++){var n=f._viewModeObject[e];if(a===n.id){a=n.title;break}}f.viewModeComboBox.currentValue=a}}if(r.hasOwnProperty("Recent_Content_Delta_Time")){var i=r.Recent_Content_Delta_Time;t.is(i)&&(i+=d.get("Minutes"),f.deltaTimeComboBox.currentValue=i)}if(r.hasOwnProperty("max_selection_for_selectall")){var s=r.max_selection_for_selectall;t.is(s)&&(s+=d.get("Items"),f.numberResultComboBox.currentValue=s)}if(r.hasOwnProperty("defaultDateMode")){var o=r.defaultDateMode;if(t.is(o)){for(let e=0;e<f._dateModeObject.length;e++){var l=f._dateModeObject[e];if(o.id===l.id){o=u.get(l.id+".title");break}}f.dateModeComboBox.currentValue=o}}else t.is(f._dateModeObject)&&t.is(f._dateModeObject[0])&&(f.dateModeComboBox.currentValue=u.get(f._dateModeObject[0].id+".title"));if(f.csvSeparatorComboBox)if(r.hasOwnProperty("defaultCsvSeparator")){var h=r.defaultCsvSeparator;if(t.is(h)){for(let e=0;e<f._csvSeparatorObject.length;e++){var p=f._csvSeparatorObject[e];if(h.id===p.id){h=u.get(p.id+".title");break}}f.csvSeparatorComboBox.currentValue=h}}else t.is(f._csvSeparatorObject)&&t.is(f._csvSeparatorObject[0])&&(f.csvSeparatorComboBox.currentValue=u.get(f._csvSeparatorObject[0].id+".title"));if(r.hasOwnProperty("defaultRevision")){var C=r.defaultRevision;if(t.is(C)){for(let e=0;e<f._revisionObject.length;e++){var m=f._revisionObject[e];if(C.id===m.id){C=u.get(m.id+".title");break}}f.revisionComboBox.currentValue=C}}else f.revisionComboBox.currentValue=u.get(f._revisionObject[0].id+".title");if(r.hasOwnProperty("preciseCount")){var v=r.preciseCount;t.is(v)&&(f.checkboxAbbreviatedcount.checkFlag=!0!==v)}if(r.hasOwnProperty("enablePLM")){var y=r.enablePLM;t.is(y)&&(f.checkboxAccessPLMParameters.checkFlag=y)}if(r.hasOwnProperty("forceAdvancedSearch")){var b=r.forceAdvancedSearch;t.is(b)&&(f.checkboxForceAdvSearch.checkFlag=b)}var S=_.getOption("OneSearch"),D=_.getOption("OneSearchOFF");if(t.is(S)&&!0===S&&!0!==D){if(r.hasOwnProperty("suggest_admin")){var A=r.suggest_admin;t.is(A)&&(f.checkboxSuggestions.checkFlag=A)}else f.checkboxSuggestions.checkFlag=!0;if(r.hasOwnProperty("search_snippet_admin")){var x=r.search_snippet_admin;t.is(x)&&(f.checkboxSnippets.checkFlag=x)}else f.checkboxSnippets.checkFlag=!0}c.onResetTab(r),g.onResetTab(r.search_synonyms)}}};return f});