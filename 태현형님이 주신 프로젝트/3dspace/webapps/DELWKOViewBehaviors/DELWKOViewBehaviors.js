define("DS/DELWKOViewBehaviors/DELWKOFormUI",["UWA/Core","DS/DELWKOComponentsUI/DELWKOAutoCompleteSearchUI","DS/DELWKOComponentsUI/DELWKOAutoCompleteUI","DS/DELWKOComponentsUI/DELWKOSearchUI","DS/DELWKOComponentsUI/DELWKOSearchButton"],function(e,t,n,i,a){"use strict";return function(n,i,a,l,o,r){var s,u=a.getComponent("Element"),d=a.getComponent("ComboBox"),c=a.getComponent("TreeDocument"),g=a.getComponent("TreeNodeModel"),p=a.getComponent("AutoComplete"),f=a.getComponent("LineEditor"),m=a.getComponent("Editor"),h=a.getComponent("Toggle"),b=a.getComponent("DatePicker"),C=a.getComponent("Accordeon"),y=a.getComponent("UnitsEditor"),I=a.getComponent("TooltipModel"),v=a.getComponent("RichTextEditor"),D=a.getComponent("InclusiveLineEditor"),V=a.getComponent("Chips"),L=!1,T=null,w=null,M={},S="inline-container",E=function(t){var n=i.getPreferenceValue("separator"),a=new f({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:l.getNLSValue("FormUI.Placeholder.EnterAText")});return"Yes"===t.multiValue&&(a.placeholder=l.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:n}),a.autoCorrectFlag=!1),a.fieldType=t.fieldType,a.pattern=t.pattern,M[t.name]=a,a},x=function(t,n,i){var a,l,r,s=function(s){var u={};switch(s){case"magnitude":u.type="unitsEditor",u.value=o.getMagnitudeValue(n,i);break;case"multivalueRange":for(u.type="autoComplete",u.value=n,u.multiValue=!0,u.elementsList=[],a=0;a<i.AuthorizedValues.length;a++)r=o.getAuthorizedValueNLS(i,a),u.elementsList.push({label:r,value:o.getAuthorizedValueNLS(i,a)});i.labelMap=u.elementsList;break;case"range":for(u.type="select",u.value=o.isDate(i)?o.getFormattedDate(n):n,u.options=[],a=0;a<i.AuthorizedValues.length;a++)r=o.getAuthorizedValueNLS(i,a),u.options.push({label:r,value:o.getAuthorizedValueNLS(i,a)});break;case"multivalue":u.type="text",u.value=o.getValueAsString(n,o.getType(i),!1);break;case"date":u.type="date",u.value=e.is(n)&&"NULL"!==n&&""!==n?o.getDate(n):null,"datetime"===u.displayType&&(u.timePickerFlag=!0);break;case"multivalueDate":u.type="text",l=(l=o.getValueAsDateArray(n)).map(function(e){return o.getFormattedDate(e)}),u.value=o.getValueAsString(l,o.getType(i));break;case"boolean":u.type="checkbox",u.value="TRUE"===n;break;case"multiLine":u.type="textarea",u.value="NULL"===n?"":n,u.pattern=o.getPattern(i),u.rows="6";break;case"richTextEditor":u.type="richTextEditor",u.value="NULL"===n?"":n;break;case"inclusiveLineEditor":u.type="inclusiveLineEditor",u.value=n,u.unit=i.unit,u.step=o.isDouble(i)?.1:1;break;case"chips":u.type="chips",u.value=n;break;case"search":u.type="search",u.value="";break;case"select":u.type="select",u.options=n;break;default:u.type="text",o.isDouble(i)||o.isInteger(i)?u.value=o.getValueAsString(n,o.getType(i),!1):u.value="NULL"===n?"":n,u.pattern=o.getPattern(i)}return e.extend(t,u)};return t=o.hasMagnitude(i)?s("magnitude"):o.isMultiValuated(i)?o.hasRangeDefined(i)?s("multivalueRange"):o.isDate(i)?s("multivalueDate"):s("multivalue"):o.hasRangeDefined(i)?s("range"):o.isBoolean(i)?s("boolean"):o.isDate(i)?s("date"):o.isMultiLine(i)?s("multiLine"):o.isString(i)&&"richTextEditor"===t.displayType?s("richTextEditor"):(o.isInteger(i)||o.isDouble(i))&&"inclusiveLineEditor"===t.displayType?s("inclusiveLineEditor"):"chips"===t.displayType?s("chips"):"search"===t.displayType?s("search"):"select"===t.displayType?s("select"):s("text")},A=function(t,n){var i=t,a=function(e){var t="",n=new Date(e);return isNaN(n.getTime())||(t=Math.floor(n.getTime()/1e3)),t.toString()};return o.isMultiValuated(n)?(i=o.getValueAsArray(t),o.isDate(n)&&(i=o.hasRangeDefined(n)?i.map(function(e){return t=e,n.labelMap.some(function(e){return t===e.label&&(i=e.value,!0)}),i;var t,i}):i.map(function(e){return a(e)}))):o.isBoolean(n)?i="true"===t?"TRUE":"FALSE":o.hasRangeDefined(n)?i=o.getAuthorizedValue(n,null,t):o.isDate(n)&&(t="NULL"!==t&&e.is(t)?t:"",i=a(t)),i},O=function(t){var n=new m({requiredFlag:t.mandatory,value:e.is(t.value)?t.value:"",disabled:t.disabled,placeholder:l.getNLSValue("FormUI.Placeholder.EnterAText")});return n.fieldType=t.fieldType,M[t.name]=n,n},P=function(e){var t=new h({type:"switch",checkFlag:e.value,value:e.value,disabled:e.disabled});return t.fieldType=e.fieldType,M[e.name]=t,t},N=function(t){var n=e.is(t)?new b(t):new b;return n.fieldType=t.fieldType,M[t.name]=n,n},R=function(t,n){var i,a,l=[];for(a=0;a<t.elementsList.length;a++)l[a]={labelItem:t.elementsList[a].label,valueItem:t.elementsList[a].value};return(i=new d({elementsList:l,actionOnClickFlag:!1,enableSearchFlag:!1,value:t.value,disabled:t.disabled})).fieldType=t.fieldType,M[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n.bind(null,M)),i},B=function(e,i){var a=new t,l=a.buildUI(n,e);return M[e.name]=a.getAutoComplete(),l},F=function(t,n){var i,a,l;return a=new c({}),t.elementsList.forEach(function(e){l=new g({label:e.label,value:e.value}),a.addChild(l)}),i=new p({elementsTree:a,actionOnClickFlag:!1,enableSearchFlag:!1,multiSearchMode:t.multiValue}),e.is(t.value,"array")&&t.value.length>0&&(i.value=t.value),i.fieldType=t.fieldType,M[t.name]=i,e.is(n,"function")&&i.addEventListener("change",n),i},k=function(t){var n,a,o=i.getPreferenceValue("separator");return n="null"!==t.value?t.value:"",a=new y({value:n,requiredFlag:t.mandatory,disabled:t.disabled,placeholder:l.getNLSValue("FormUI.Placeholder.EnterANumber"),pattern:"^[-+e]?[0-9e]+(.[0-9e]+)?$",autoCorrectFlag:!1}),e.is(t.magnitudeText,"string")&&a.setUnit(t.magnitudeText),"Yes"===t.multiValue&&(a.placeholder=l.getNLSValue("FormUI.Placeholder.MultiValueWithSeparator",{separator:o}),a.pattern="^(([0-9])+(.[0-9]*){0,1}|)*((([0-9])*(.[0-9]*){0,1})[0-9])$",a.autoCorrectFlag=!1),a.fieldType=t.fieldType,M[t.name]=a,a},U=function(e){var t=new v;return""!==e.value&&t.setData(e.value),t.fieldType=e.fieldType,M[e.name]=t,t},W=function(e){var t=new D(e);return t.fieldType=e.fieldType,M[e.name]=t,t},H=function(t){var n=new V({value:t.value,uniqueValue:!0,disabled:t.disabled});return n.addEventListener("change",function(t){e.is(t)&&t.stopPropagation()}),n.fieldType=t.fieldType,M[t.name]=n,n},G=function(t,n){var i,a,l,o,r,s;for(e.is(t,"array")||(t=[t]),a=0;a<t.length;a++){switch(l=t[a],o=new e.Element("div",{class:"wux-field-container "+S}),new e.Element("h6",{class:"wux-textElement",text:l.label}).inject(o).tooltipInfos=new I({shortHelp:l.label}),r={name:l.name,value:l.value,mandatory:l.mandatory,disabled:l.disabled,fieldType:l.type,multiValue:l.multiValue,pattern:l.pattern},l.type){case"text":i=E(r);break;case"textarea":i=O(r);break;case"checkbox":i=P(r);break;case"date":s={timePickerFlag:l.timePickerFlag||!1},e.extend(r,s),i=N(r);break;case"select":s={elementsList:l.options},e.extend(r,s),i=R(r,l.attributeInfo.onChange);break;case"autoComplete":s={elementsList:l.elementsList},e.extend(r,s),i=F(r);break;case"search":r.url=l.url,r.precondition=l.precondition,i=B(r);break;case"unitsEditor":s={magnitudeText:l.magnitudeText,multiValue:l.multiValue},e.extend(r,s),i=k(r);break;case"richTextEditor":i=U(r);break;case"inclusiveLineEditor":r.unit=l.unit,r.stepValue=l.step,i=W(r);break;case"chips":i=H(r);break;default:i=E(r)}i.inject(o),o.inject(n)}},j=function(t,n){var i=l.getNLSValue(t),a=new e.Element("div",{class:"accordeon-section-container"}).inject(T);new C({items:[{header:"Wrong NLS key"!==i?i:t,content:n,expandedFlag:!0}],style:"filled-separate"}).inject(a)},_=function(t){var n,i,a,u,d,c,g,p,f,m=[],h=l.getNLSValue(w,null,"Type");for(e.is(t,"array")||(t=[t]),i=0;i<t.length;i++){if(n=t[i],a=e.is(n.attributeName)?n.attributeName:n.dicoType+"."+n.name,u=e.is(n.attributeInfo)?n.attributeInfo:r.getAttributeInfo(a),e.is(u)?(c=o.getFullName(u),p=e.is(l.getNLSValue(u.Name))&&u.Name!=l.getNLSValue(u.Name)?l.getNLSValue(u.Name):o.getNLS(u),f=o.getNLSForUnit(u)):(u="",c=a=n.name,p=l.getNLSValue(a),f=""),e.is(n.defaultValue))if(n.defaultValue.indexOf(",")>=0){d=[];for(var b=n.defaultValue.split(","),C=b.length,y=0;y<C;y++)d.push({label:l.getNLSValue(b[y]),value:b[y]})}else d=n.defaultValue;else d=e.is(s&&s[c])?s[c]:"PLMEntity.V_Name"===c&&w?h:o.getDefaultValue(u);g={name:c,mandatory:n.mandatory,label:p,attributeInfo:u,magnitudeText:f,multiValue:u.MultiValuated,disabled:n.readOnly||o.isReadOnly(u),defaultValue:d},e.is(n.value)?d=n.value:e.is(n.objectToBeModified)&&(d=n.objectToBeModified.get(n.dataIndex)),e.is(w)&&"ProcessContinuousProvide"===w&&e.is(n.readOnly)&&(g.disabled=n.readOnly),o.isDate(u)&&(g.displayType="DateTime"===n.displayType?"datetime":"date"),o.isString(u)&&e.is(n.displayType)&&"richText"===n.displayType?g.displayType="richTextEditor":(o.isInteger(u)||o.isDouble(u))&&e.is(n.displayType)&&"inclusiveEditor"===n.displayType?g.displayType="inclusiveLineEditor":e.is(n.displayType)&&"chips"===n.displayType?(g.displayType="chips",g.valueType=u.Type):e.is(n.displayType)&&"select"===n.displayType?g.displayType="select":e.is(n.displayType)&&"search"===n.displayType&&(g.displayType="search",g.url=n.defaultValue,g.dicoType=n.dicoType,g.precondition=n.precondition),g=x(g,d,u),m.push(g)}return m},K=function(t,n){var a,l,o=new u("div",{class:"section-container"});for(a in!1===n.headerAccordean?o.inject(T):t.name||(t.name=""),t)if(e.is(a))switch(a.toLowerCase()){case"name":j(t[a],o);break;case"attribute":if(l=_(t[a]),!e.is(l))return void i.debug("attributeInfo is not available");G(l,o)}o.addEvent("resize",function(){var t,n,i,a;a=o.getElements(".wux-field-container"),(i=o.clientWidth)<290?(t="inline-container",n="block-container"):i>290&&"block-container"===S?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(a)&&a.forEach(function(e){e.removeClassName(t),e.addClassName(n)})})},X=function(t){var n,a=t.sections;for(n in a)if(e.is(n))switch(n.toLowerCase()){case"section":e.is(a[n])&&(Array.isArray(a[n])?a[n].forEach(K):K(a[n],t));break;case"formstyle":e.is(a[n])&&("Vertical"===a[n]?S="block-container":"Horizontal"===a[n]&&(S="inline-container"))}!0===L&&(L=!1,i.debug(l.getNLSValue("InsertCmd.WarningConfiguration")))};return{createUI:function(t){t=t||{},T=new u("div",{class:"data-collection-form-UI"}),e.is(t.renderTo)?(e.is(t.type)&&(w=t.type.split("/")[1]||""),e.is(t.defaultValues)&&(s=t.defaultValues),X(t),T.inject(t.renderTo)):i.debug("no parent container is present to inject the mainContainer")},getFormStyle:function(){return S},destroy:function(){e.is(T)&&T.destroy(),M={}},getValues:function(){var t,n,i,a={};for(n in M)Object.prototype.hasOwnProperty.call(M,n)&&(i=r.getAttributeInfo(n),e.is(n)&&("select"===M[n].fieldType?t=A(M[n].currentValue,i):"autoComplete"===M[n].fieldType?t=M[n].value?A(M[n].value.join("|"),i):A(M[n].value,i):"checkbox"===M[n].fieldType?(t=(t=M[n].checkFlag).toString(),t=A(t,i)):"date"===M[n].fieldType?t=A(M[n].value,i):"richTextEditor"===M[n].fieldType?t=M[n].getData():"inclusiveLineEditor"===M[n].fieldType?t=M[n].getValue():"chips"===M[n].fieldType?0===(t=M[n].value).length&&(t=""):t="search"===M[n].fieldType?M[n].value:A(M[n].valueToCommit,i),e.is(t)&&(a[n]=t)));return a},validate:function(){var t,n,i,a,s={result:!0,message:null,more:null},u=[],d=[];for(t in M)e.is(M[t])&&(a=l.getNLSValue(t),!0===M[t].requiredFlag&&""===M[t].value&&(s.result=!1,u.push(a)),"DELLmiProductionPlanReference.ProductionPlan"!==t&&"DELLmiWorkPlanSystemReference.MfgProcess"!==t&&"DELFmiFunctionReference.MfgItem"!==t||void 0===M[t].value&&(d.push(l.getNLSValue(t.substring(t.indexOf(".")+1))),s.result=!1),"OrderQuantity"===t&&("EACH"===M.Magnitude.value&&(M[t].pattern=o.getPattern(r.getAttributeInfo("DELLmiWOQuantity_Each.V_OrderQuantity"))),"VOLUME"===M.Magnitude.value&&(M[t].pattern=o.getPattern(r.getAttributeInfo("DELLmiWOQuantity_Volume.V_OrderQuantity"))),"AREA"===M.Magnitude.value&&(M[t].pattern=o.getPattern(r.getAttributeInfo("DELLmiWOQuantity_Area.V_OrderQuantity"))),"LENGTH"===M.Magnitude.value&&(M[t].pattern=o.getPattern(r.getAttributeInfo("DELLmiWOQuantity_Length.V_OrderQuantity"))),"WEIGHT"===M.Magnitude.value&&(M[t].pattern=o.getPattern(r.getAttributeInfo("DELLmiEOQuantity_Weight.V_OrderQuantity")))),e.is(M[t].pattern)&&(n=new RegExp(M[t].pattern),""===(i=e.is(M[t].valueToCommit)?M[t].valueToCommit:"")||i.test(n)||(d.push(a),s.result=!1)));return s.result||(u.length>0&&d.length>0?s.message=l.getNLSValue("ModelBehavior.CreateReference.Failure.Multiple",{missingFields:u.join(","),invalidFields:d.join(",")}):u.length>0?s.message=l.getNLSValue("ModelBehavior.CreateReference.Failure.ValueMissing",{fields:u.join(",")}):d.length>0&&(s.message=l.getNLSValue("ModelBehavior.CreateReference.Failure.InvalidValue",{fields:d.join(",")}))),s},updateToDefaultValues:function(t){var n;for(n in M)e.is(M[n])&&e.is(t[n])&&(M[n].value=t[n])},updateAuthorizedList:function(t,n){!function(t,n,i){var a,l,r,s,u=[];if(e.is(n)&&(r=M[n],e.is(r)&&"select"===r.fieldType)){for(l=0;l<t.AuthorizedValues.length;l++)a=o.getAuthorizedValueNLS(t,l),u.push({labelItem:a,valueItem:o.getAuthorizedValueNLS(t,l)});s=e.is(i)?i:"",r.setProperties({elementsList:u,value:s})}}(t,n)}}}}),define("DS/DELWKOViewBehaviors/DELWKOEditAttributeBehavior",["UWA/Core","text!DS/DELWKOViewBehaviors/assets/json/MockAttributeInfo.json","text!DS/DELWKOViewBehaviors/assets/json/DELLmiExecTimeConstraintRelation.json","text!DS/DELPPWViewBehaviors/assets/json/EditAttributeFormEvents.json"],function(e,t,n,i){"use strict";return{plugins:["UXComponentsPlugin","AttributePlugin","ResourcePlugin","DatabasePlugin","WebServicePlugin"],creator:function(a,l,o,r,s,u,d){var c,g,p,f,m=o.getComponent("Button"),h=null,b=null,C=null,y=e.Json.decode(i),I=function(t,n){var i=g.createElement("div",{class:"section-container"}),a={attribute:t},l={};return e.is(n)&&e.is(n.formStyle)&&(l.formStyle=n.formStyle),l.section=a,b=g.create("FormUI",{sections:l,renderTo:i,headerAccordean:!1}),i},v=function(t,n){c=g.createElement("div",{class:"EditAttribute-Dialog"}),e.is(g)?(C=g.create("Dialog",e.merge(t,{domId:"EditAttributeUI-Dialog",content:c,resizableFlag:!0,modalFlag:!0,width:400,minWidth:290,buttons:{Cancel:new m({onClick:function(){C.close()}}),Ok:new m({disabled:!1,emphasize:"primary",onClick:function(){C.close()}})}}))).close=function(){this.destroy(),e.is(b)&&b.destroy(),e.is(c)&&c.destroy(),C=null}:l.debug("uxFactoryBehavior is not available.")},D=function(t){return new Promise(function(n,i){var a={},o=function(){l.notify("stopProgress",a),l.warn(s.getNLSValue("EditAttributeUI.retrieveDataFailure")),i()};if(!e.is(t))return l.debug("objectToBeModified is not available."),void i();l.notify("startProgress",a),u.fetchAttributes(t,{onComplete:function(){l.notify("stopProgress",a),n()},onFailure:o,onTimeout:o})})},V=function(t){var n=u.getReference(t);return e.is(n)||(n=u.getInstance(t)),e.is(n)||(n=u.getConnection(t)),n};return{name:"EditAttributeBehavior",onStart:function(i){var a;g=l.getBehavior("UXFactoryBehavior"),l.getBehavior("ModelBehavior"),p=l.getBehavior("LinkBehavior"),e.is(i.editFormAttributesXML)&&(a=d.getXMLValues(i.editFormAttributesXML),h=a.convert("AttributesDescriptionList.Type","name")),f=e.Json.decode(t),e.Json.decode(n)},onStop:function(){},hasEditConfiguration:function(t){var n=!1,i=null;return e.is(h)?(i=V(t),e.is(i)&&e.is(h[i.get("type")])&&(n=!0)):l.debug("_editFormAttrsConfig is not available."),n},editConfiguredAttributes:function(t){var n,i,o,d,g,m,b,C,L=null,T={};m=u.getConnection(t),b=e.is(m)?m.get("type"):null,e.is(h)?(L=V(t),e.is(L)?(n=h[L.get("type")],y[L.get("type")]&&(C=y[L.get("type")]),e.is(n)?(o=n.Attribute,e.is(n.formStyle)&&(T.formStyle=n.formStyle),(d=r.getObjectAndAttributeInfos(o)).forEach(function(n){"ProcessImplementLinkOcc"===b&&"V_usage"===n.dataIndex&&(n.attributeInfo=f[n.dataIndex],n.attributeInfo.AuthorizedValues=function(t){var n,i,l,o,r,u,d=[];return i=(n=a.getPlugins("ImplementPlugin").instance).getRolesForTargrtObject(t),l=p.getConnection(t),o=n.getRoleFromModelOrComputed(l.get("PID")),e.is(o)&&"NULL"!==o&&(u=o.replace("*",""),r=i.indexOf(u),i.splice(r,1),i.unshift(o)),i.forEach(function(e){d.push({NLS:s.getNLSValue("Role."+e),Name:e})}),d}(t)),"DELLmiExecTimeConstraintRelation"===b&&"kind"===n.dataIndex&&(n.attributeInfo.NLS=s.getNLSValue("DELLmiExecTimeConstraintRelation.kind"))}),d.forEach(function(t,n){t.objectToBeModified=L,e.is(o[n].displayType)&&(t.displayType=o[n].displayType)}),D(L).then(function(){var t;(t=d.filter(function(t,n){return t.readOnly=!0,e.is(t.attributeNLSTitle)?t.attributeNLSTitle:r.getNLS(t.attributeInfo),(r.doesAttributeExist(L,t.dataIndex)||r.isAttrApplicableForType(L,t.attributeName))&&e.is(C)&&e.is(C[t.dataIndex])&&(t.events=C[t.dataIndex]),!0})).length>0?(g=I(t,T),i={title:s.getNLSValue("AttributeUI.HeaderMulti")},u.isWorkInstruction(L)&&(i=e.merge({position:{my:"top",at:"top"},height:500,width:600},i)),v(i),g.inject(c)):l.warn(s.getNLSValue("EditAttributeUI.ConfigAttrNotAvilaibleOnObject"))})):l.warn(s.getNLSValue("EditAttributeUI.NoAttributesConfigured"))):l.debug("objectToBeModified is not available.")):l.debug("_editFormAttrsConfig is not available.")},editAttribute:function(t,n){var i,a,o,u,d,g;e.is(n,"array")||(n=[n]),e.is(t,"array")||(t=[t]),d=n[0].objectToBeModified,D(d).then(function(){var p=!0;n.forEach(function(c){r.doesAttributeExist(d,c.dataIndex)||r.isAttrApplicableForType(d,c.dataIndex)?(a=e.is(c.attributeNLSTitle)?c.attributeNLSTitle:r.getNLS(c.attributeInfo),o=[],t.forEach(function(t){i=null,i="reference"===c.instOrRef&&e.is(t.referencePID)?t.referencePID:"instance"===c.instOrRef&&e.is(t.instancePID)?t.instancePID:t.id,e.is(i)&&o.push(i)}),u=n.length>1?s.getNLSValue("EditAttributeUI.HeaderMulti"):s.getNLSValue("EditAttributeUI.Header",{attributeName:a})):(p=!1,l.warn(s.getNLSValue("TableView.AvailabilityFailure",{key:a})))}),p&&(e.is(C)||(g=I(n),v({title:u}),g.inject(c)))})}}}}}),define("DS/DELWKOViewBehaviors/DELWKOCellManager",["UWA/Core","DS/Utilities/Utils"],function(e,t){"use strict";return function(n,i,a,l,o,r){var s=r.getGroupingAdditonalColumns(),u=n.getBehavior("ModelBehavior"),d=n.getBehavior("WUXNodeModelBehavior"),c=function(t){var n;return e.is(t.nodeModel)&&Object.prototype.hasOwnProperty.call(t.nodeModel.options,t.dataIndex)&&(n=t.nodeModel.options[t.dataIndex]),n},g=function(e,t){var n={};n.node=t.nodeModel,e.command&&r.executeCommand(e.command,n)},p=function(t,n){var a,o,r,s,u={cellValue:"",isAttrExists:!1,unit:""},d=l.getAttributeInfoFromColumn(t);if(e.is(t.dicoType,"array")&&t.dicoType.length>0)for(r=t.dicoType.length,a=0;a<r;a++)if(o=t.dicoType[a]+"."+t.dataIndex,e.is(n.nodeModel)&&Object.prototype.hasOwnProperty.call(n.nodeModel.options.grid,o)){s=i.getAttributeInfo(t.dicoType[a]+"."+d.dataIndex),e.is(s)&&l.hasMagnitude(s)&&(u.unit=l.getNLSForUnit(s)),u.cellValue=n.nodeModel.options.grid[o],u.isAttrExists=!0;break}return u};return{getBICellValue:function(e){return c(e).colorCode},getMultiTypeCellValue:function(e){var t=this.getColumnOrGroup(e.columnID);return p(t,e).cellValue},getMultiTypeCellSemantics:function(e){var t=this.getColumnOrGroup(e.columnID);return{units:p(t,e).unit}},getMultiTypeCellEditableState:function(e){var t,i;return r.areModuleColumnsImmutable(n.getId())?i=!1:(t=this.getColumnOrGroup(e.columnID),i=p(t,e).isAttrExists),i},getBICellValueForExport:function(t){var n="";return e.is(t.cellModel,"string")?n=t.cellModel:(n=c(t),n=e.is(n)?n.tooltip:""),n},setValue:t.debounce(function(t,i){var r,s,d,c,g,p,f=this,m=[];if(p=this.getColumnOrGroup(t.columnID),c=l.getNodeAndColumnInfos(t.nodeModel,p),g=l.isMultiValuated(c.attributeInfo),!l.doesAttributeExist(c.objectToBeModified,c.dataIndex)&&!l.isAttrApplicableForType(c.objectToBeModified,c.dataIndex))return n.warn(o.getNLSValue("TableView.AvailabilityFailure",{key:c.attributeNLSTitle})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});if(l.isBoolean(c.attributeInfo))g&&(i=l.getValueAsArray(i,l.getType(c.attributeInfo)));else if(l.hasRangeDefined(c.attributeInfo,c.attributeDef)){if(!e.is(i))return;i=l.getAuthorizedValue(c.attributeInfo,c.attributeDef,i)}else if(l.isDate(c.attributeInfo)){if(i=e.is(i)?i:"",g)for(m=l.getValueAsArray(i),i=[],d=0;d<m.length;d++){if(s=new Date(m[d]),isNaN(s.getTime()))return n.warn(o.getNLSValue("TableView.InvalidDateMessage",{date:m[d]})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});i.push(Math.floor(s.getTime()/1e3))}else{if(s=new Date(i),isNaN(s.getTime()))return n.warn(o.getNLSValue("TableView.InvalidDateMessage",{date:i})),void this._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0});i=Math.floor(s.getTime()/1e3)}t.nodeModel.setAttribute(t.dataIndex,i),this.updateRenderedRow(t.rowID)}else if(g)i=l.getValueAsArray(i,l.getType(c.attributeInfo));else if(e.is(t.cellModel)){if(l.isInteger(c.attributeInfo)&&!Number.isInteger(i))return void n.warn(o.getNLSValue("TableView.InvalidIntegerValue",{attr:c.attributeNLSTitle,value:i}))}else if((r=l.getMaxLength(c.attributeInfo))>0&&i.length>r)return void n.warn(o.getNLSValue("TableView.MaxLengthFailure",{length:i.length,maxLength:r}));"V_SequencingMode"===c.dataIndex?a.setSequencingMode(c.objectToBeModified.id,i,{onFailure:function(){n.warn(o.getNLSValue("SetSequencingModeUI.UpdateFailure"))},onComplete:function(){n.info(o.getNLSValue("SetSequencingModeUI.UpdateSuccess")),n.notify("setSequencingMode")}}):e.is(u)&&u.updateModelAttribute(c.objectToBeModified.id,c,i,{onFailure:function(){var n;n=t.nodeModel,e.is(n.options.oldLabel)&&(n.prepareUpdate(),n.setLabel(n.options.oldLabel),delete n.options.oldLabel,n.pushUpdate()),f._renderCell(t.cellID,{updateCellContent:!0,updateCellLayout:!0})}})},100,!0),getCellValue:function(t,n){var i=l.getNodeAndColumnInfos(n.nodeModel,t),a=l.isMultiValuated(i.attributeInfo),r=l.hasMagnitude(i.attributeInfo),s=l.hasRangeDefined(i.attributeInfo),u=n.nodeModel.options.grid[t.dataIndex];if("type"===i.attributeName&&(u=o.getNLSValue("Type."+u)),r)u=l.getMagnitudeValue(u,i.attributeInfo,!1);else if(a)l.isDate(i.attributeInfo)&&u&&(u=u.map(function(e){return l.getFormattedDate(e)})),u=l.getValueAsString(u,l.getType(i.attributeInfo));else if(l.isDate(i.attributeInfo))return u=s?e.is(u)?l.getFormattedDate(u):null:e.is(u)?l.getDate(u):null;return e.is(u)?u:""},getCustomStringCellValue:function(e){var t=e.nodeModel.getAttributeValue(e.dataIndex),n=o.getNLSValue("Column.MakeOrBuy.Make"),a=o.getNLSValue("Column.MakeOrBuy.Buy");return i.isAKindOf(t,"CreateKit")||i.isAKindOf(t,"CreateAssembly")||i.isAKindOf(t,"CreateMaterial")||i.isAKindOf(t,"Installation")?n:i.isAKindOf(t,"Provide")?a:""},getURLCellValue:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex);return(!e.is(i)||e.is(i,"string")&&0===i.length)&&(i=n.defaultValue),{label:i,func:g.bind(this,n,t),getLabel:function(){return this.label}}},getFullOwnerURL:function(t){var n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),l=e.is(i)?a.getReferenceModel(t.nodeModel._referencePID):null,o=e.is(l)?l.get("ds6w:responsible"):"";return{label:e.is(o)?o:e.is(i)?i:"",func:g.bind(this,n,t),getLabel:function(){return this.label}}},hasCellValue:function(t){var n,i,o,r,s,u;if(d.isFakeNodeModel(t.nodeModel))return!1;switch((n=this.getColumnOrGroup(t.columnID)).displayType){case"ALTERNATES_AND_SUBSTITUTES":case"hideShow3D":case"NonEditable":case"URL":o=!0;break;case"BIEssentials":case"BIEssentialsAltSub":r=c(t),o=!(!e.is(r)||"transparent"===r.colorCode);break;case"DocMgmt":r=t.nodeModel.getAttributeValue(t.dataIndex),o=e.is(r,"array")&&r.length>0;break;case"NonEditableMultiType":case"MultiType":o=(r=p(n,t)).isAttrExists;break;default:i=l.getNodeAndColumnInfos(t.nodeModel,n),e.is(i.objectToBeModified)?(o=l.doesAttributeExist(i.objectToBeModified,i.dataIndex),u=l.isAttrApplicableForType(i.objectToBeModified,i.dataIndex),s=i.objectToBeModified.getAdditionalInfo("isFetched"),o=o||!o&&a.getNavigateOnIndex()&&e.is(s)&&!s||u):o=!1}return o},getCellValueForDocMgt:function(e){var t;if(!e.isHeader&&(t=e.nodeModel.getAttributeValue(e.dataIndex),Array.isArray(t))){const e=t.length;if(1===e)return t[0].title;if(e>1)return`${t[0].title} ...`}return""},getURLCellValueForExport:function(t){var n=t.cellModel;return t.rowID>=0&&e.is(t.cellModel)&&(n=t.cellModel.getLabel()),n},getGroupingColumnCellValue:function(e){var t,n=this.getColumnOrGroup(e.columnID);return n.dataIndex===s.Type?(t=e.nodeModel.getReferenceType(),o.getNLSValue("Type."+t)):n.dataIndex===s.Reference?e.nodeModel.getReferencePID():void 0}}}}),define("DS/DELWKOViewBehaviors/DELWKOViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/UXFactoryBehavior/FormUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/SelectionControl","DS/DELPPWViewBehaviors/UXFactoryBehavior/DataCollectionUI","DS/DELWKOComponentsFactory/DELWKOCreateWorkOrderFromProcessDataCollectionUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ImplementedRevChooserUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/MfgItemCreateReportUI","DS/DELPPWViewBehaviors/UXFactoryBehavior/ConfirmationDialog","DS/DELPPWViewBehaviors/UXFactoryBehavior/MessageDialog"],function(e,t,n,i,a,l,o,r,s,u){"use strict";return{plugins:["UXComponentsPlugin","ResourcePlugin","WebServicePlugin","AttributePlugin","DicoPlugin","DatabasePlugin","SelectionPlugin","ImplementPlugin","PlatformPlugin"],creator:function(d,c,g,p,f,m,h,b,C,y,I){var v=function(e,t){var n=[null].concat(t),i=g.getComponent(e);return new(Function.prototype.bind.apply(i,n))};return{onStart:function(){},onStop:function(){},getComponent:function(e){return g.getComponent(e)},showConfirmation:function(e,t,n,i,a){new s(this,a).show(e,t,n,i)},showMessage:function(e,t){new u(this,c).show(e,t)},showWithMessage:function(e,t,n){new u(this,c).showWithMessage(e,t,n)},createElement:function(){var e=Array.prototype.slice.call(arguments);return v("Element",e)},create:function(s,u){var D,V,L,T,w,M=[],S=Array.prototype.slice.call(arguments,1);switch(s){case"Panel":w=this.getComponent("WUXDockAreaEnum"),(D=new(g.getComponent("Panel"))(u)).allowedDockAreas=w.LeftDockArea|w.RightDockArea;break;case"Tree":D=new(g.getComponent("Tree"))({height:"inherit",width:"100%",apiVersion:2,selection:{toggle:!1,canMultiSelect:!1},styles:{height:"100%",width:"100%"}});break;case"Dialog":L=g.getComponent("WUXFrameWindowsManager").getFrameWindow(c.getAppContext()),V={position:{my:"center",at:"center"},immersiveFrame:d.getConfig().isFacet?d.getConfig().immersiveFrame:L.getImmersiveFrame()},e.extend(u,V),(D=new(g.getComponent("CustomDialog"))(u)).addEventListener("contextmenu",function(e){e.preventDefault()}),e.is(D.buttons.Ok)?D.buttons.Ok._giveFocus():D.buttons.Cancel&&D.buttons.Cancel._giveFocus(),D.addEventListener("keypress",function(e){"Enter"===e.key&&(D.buttons.Ok&&!D.buttons.Ok.disabled&&D.buttons.Ok._isFocused()?D.buttons.Ok.onClick():D.buttons.Cancel&&!D.buttons.Cancel.disabled&&D.buttons.Cancel._isFocused()&&D.buttons.Cancel.onClick())});break;case"Filter":(Array.isArray(u.filterToolbarSections)?u.filterToolbarSections:["PROCESS","SYSTEM","RESOURCE","PART","PRODUCT","PARENT"]).forEach(function(e){"PARENT"===e?M.push({item:e,iconElemName:"CreateInstance",isSelected:!1}):M.push({item:e,iconElemName:e,isSelected:!0})}),T=M.reduce(function(t,n){var i=p.getNLSValue("PPRTYPE."+n.item),a=p.getIconElem(n.iconElemName),l=!!e.is(n.isSelected,"boolean")&&n.isSelected;return t[n.item]={text:i,tooltipText:i,title:a,pinned:l},t},{}),D=new(g.getComponent("Segmented"))({multiSelect:!0,data:T});break;case"SelectionControl":(D=new n(d,c,g,p,h)).createUI(u);break;case"FormUI":(D=new t(d,c,g,p,m,h)).createUI(u);break;case"DataCollectionUI":(D=new i(d,c,g,p,f,m,h)).createUI(u);break;case"DELWKOCreateWorkOrderFromProcessDataCollectionUI":(D=new a(d,c,g,p,f,m,h)).createUI(u);break;case"ImplementUI":(D=new l(d,c,this,p,b,C,y)).createUI(u);break;case"ImplementedRevChooserUI":(D=new o(d,c,this,p,b,I,C)).createUI(u);break;case"MfgItemCreateReportUI":(D=new r(d,c,this,p,b,g)).displayReport(u);break;default:D=v(s,S)}return D}}}}}),define("DS/DELWKOViewBehaviors/DELWKOMfgProcessCrossHighlightBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin"],creator:function(t,n,i){var a,l,o,r,s,u,d,c,g,p,f,m,h,b,C,y,I,v="DELWKOMfgProcessCrossHighlightBehavior";return r=function(t){var i=n.getBehavior(t);return e.is(i)||n.debug(v+" : "+t+"behavior is not available "),i},u=function(){a=Object.create(null)},s=function(e,t){a[e.toString()]=t},d=function(e){delete a[e.toString()]},c=function(){return Object.keys(a).reduce(function(e,t){return e.concat(a[t])},[])},g=function(){var t=r("WUXNodeModelBehavior"),i=l;return i&&e.is(t)&&t.isDocumentEmpty()&&(i=!1,n.debug(v+" : Not computing crossHighlight as document is empty")),i},p=function(t,a){var l,s,u=r("LinkBehavior"),d=[];if(e.is(u))if(l=i.getPPRType(t),s=o[l],Array.isArray(s)){var c=u.getConnectedObjects(t,a,{relationTypes:s});if(d=d.concat(c),"PROCESS"===l&&d.length>0)d.forEach(function(e){var t=u.getConnectedObjects(e,[],{relationTypes:"DELIsSerializedFromOp"});d=d.concat(t)});else if("WORKORDER"===l&&d.length>0){d=[];var g=u.getConnectedObjects(t,[t],{relationTypes:s});(d=d.concat(g)).forEach(function(e){if(e instanceof Array){var t=e[0],n=i.getReferenceIdFromInstance(t),a=u.getConnectedObjects(n,[n],{relationTypes:s});d=d.concat(a);var l=u.getConnectedObjects(t,[t],{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]});d=d.concat(l)}else l=u.getConnectedObjects(e,[e],{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]}),d=d.concat(l)})}}else n.debug(v+" : Couldnt _computeConnectedObjs as crossHighLightLinkTypes config is not available for "+l);return d},f=function(t,n){var i,a,l,o,r;if(t.isVisible()){if(l=t,e.is(n))for(i=1;i<n.length&&(o=!1,r=l.getVisibleChildren(!1,!0),e.is(r)&&0!==r.length);i++){for(a=0;a<r.length;a++)if(r[a].getInstancePID()===n[i]){l=r[a],o=!0;break}if(!o)break}}else for(l=t.getParent();!l.isVisible();)l=l.getParent();return l},m=function(t){var n=r("WUXNodeModelBehavior"),a=[],l={},o={};return e.is(n)&&(n.getAllDescendants().forEach(function(t){var n,i,a;n=t.getReferencePID(),t.isRoot()?a=n:(i=t.getInstancePID(),a=t.getAbsolutePath().toString()),e.is(n)&&(e.is(l[n])||(l[n]=[]),l[n].push(a)),e.is(i)&&(e.is(l[i])||(l[i]=[]),l[i].push(a)),e.is(a)&&(o[a]=t)}),t.forEach(function(t){var n,r,s;Array.isArray(t)?(n=t[0],e.is(l[n])&&l[n].forEach(function(e){a.push(f(o[e],t))}),s=i.getInstance(n),e.is(s)&&(r=s.get("isAggregatedBy"),e.is(r)&&e.is(l[r])&&l[r].forEach(function(e){0===o[e].getChildren(!0).length&&a.push(f(o[e]))}))):e.is(l[t])&&l[t].forEach(function(e){a.push(f(o[e]))})})),a},h=function(e){var t,n=r("WUXNodeModelBehavior");n&&Array.isArray(e)&&e.length>0&&(t=m(e)).length>0&&n.withTransactionUpdate(function(){t.forEach(function(e){e.highlight()})})},b=function(){var e,t=r("WUXNodeModelBehavior");t&&(e=t.getHighlightedNodes(),Array.isArray(e)&&e.length>0&&t.withTransactionUpdate(function(){e.forEach(function(e){e.unhighlight()})}))},C=function(){u()},y=function(t){var n;g()&&e.is(t)&&((t=Array.isArray(t)?t:[t]).forEach(function(t){var n,i,a=t.nodeId,l=t.isSelected,o=t.absPath;e.is(a)&&e.is(l)&&e.is(o)&&(i=o.length>0?o:a,l?(n=p(a,o),s(i,n)):d(i))}),b(),n=c(),h(n))},I=function(t){var i,a=r("WUXNodeModelBehavior");g()&&e.is(a)&&e.is(t)&&e.is(t.sourceId)&&e.is(t.changed)&&(i=t.changed,t.sourceId!==n.getId()&&i.isSelected&&a.unSelectAll(),y(i))},{listenTo:function(){return{refreshAll:C,select:I,reComputeCrossHighlight:y,onNodeExpanded:this.reHighlightMyView,onNodeCollapsed:this.reHighlightMyView}},onStart:function(t){l=!!e.is(t.enableCrossHighlight)&&t.enableCrossHighlight,o=e.is(t.crossHighLightLinkTypes)?t.crossHighLightLinkTypes:{},u()},onStop:function(){a=null},reHighlightMyView:function(){var e;g()&&a&&Object.keys(a).length>0&&(b(),e=c(),h(e))}}}}}),define("DS/DELWKOViewBehaviors/DELWKORelationsColumnManager",["UWA/Core"],function(e){"use strict";return function(t,n,i){var a,l,o={"SerializedFrom.relation":{command:"DELWKOWorkBookCmdHdr"},"AssetContext.relation":{command:"DELWKOFAMCmdHdr"}};return a=function(e){var n=t.getBehavior("LinkBehavior").getImpactedConnections(e.nodeModel.getReferencePID()),a={};o[e.dataIndex]?(a.cellInfos=e,a.connections=n,i.executeCommand_V2(o[e.dataIndex].command,a)):(a.node=e.nodeModel,i.executeCommand("Relations",a))},l=function(l){var o,r,s=void 0,u=this,d=this.getColumnOrGroup(l.columnID),c=l.nodeModel.getAttributeValue(d.dataIndex);return e.is(c,"array")&&c.length>0&&(r=(o=c)[0],s={icon:{iconPath:n.getIconURLFromKey(r.Icon),iconSize:{width:"22px",height:"22px"}},label:r.Value,iconName:r.Icon,func:i.areModuleColumnsImmutable(t.getId())?null:a.bind(u,l),relations:o}),s},{getCellValueForExport:function(t){var n,i,a="";return t.rowID<0?t.cellModel:(n=this.getColumnOrGroup(t.columnID),i=t.nodeModel.getAttributeValue(n.dataIndex),e.is(i,"array")&&i.forEach(function(t,n){e.is(t.Value)?a+=t.Value:a+=t.toString(),n!==i.length-1&&(a+=", ")}),a)},getCellValue:function(e){return l.call(this,e)},hasCellValue:function(e){var t=this.getColumnOrGroup(e.columnID),n=e.nodeModel.options.grid;return Array.isArray(n[t.dataIndex])&&0!==n[t.dataIndex].length},getCellClassName:function(t){var n,i="";return e.is(t.nodeModel)&&(n=t.nodeModel.getAttributeValue(t.dataIndex),i=Array.isArray(n)&&n.length>1?"relation-column-multivalued":"relation-column"),i}}}}),define("DS/DELWKOViewBehaviors/DELWKOColumnManager",["UWA/Core","DS/DELWKOViewBehaviors/DELWKOCellManager","DS/DELWKOViewBehaviors/DELWKORelationsColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/MIL/MILColumnManagerMFN","DS/DELPPWViewBehaviors/TreeListViewBehavior/RWU/RWUColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MCRColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/ManageCapableResources/MSOColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/DataCollectRowColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/HideShow3DColumnManager","DS/DELPPWViewBehaviors/CfgColumnsBehavior/CfgCellManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/RPColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/CoProduct/CoProductColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/Compensation/CompensationMaterialColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeColumnManager"],function(e,t,n,i,a,l,o,r,s,u,d,c,g,p,f){"use strict";return function(m,h,b,C,y,I,v,D,V,L,T,w){var M,S,E,x,A,O,P,N,R,B=T.getGroupingAdditonalColumns(),F=h.getBehavior("WUXNodeModelBehavior"),k=new u(h,D),U=new t(h,I,y,v,D,T),W=new l(h,y,D,w,V),H=new c(h,I,y,D),G=new n(h,D,T),j=(new g(h,v,y,I,D),new p(h,v,y,I,D)),_=(new f(h,v,y,I),new r(h,I,y,v,D,T));return O=(O=(O=(O=(O=[]).concat(W.getNonModelDataIndexes())).concat(k.getNonModelDataIndexes())).concat(j.getNonModelDataIndexes())).concat(H.getNonModelDataIndexes()),S=function(t){var n,i,a,l,o={treeDataIndex:null,label:null,labelIsOnRef:null,dicoType:null},r=h.getPreferenceValue("separator");if(e.owns(t,"name")&&"Auxiliary"===t.name&&e.owns(t,"Label")&&e.is(t.Label.length)&&t.Label.length>1)for(o.treeDataIndex="",o.label="",o.dicoType="",a=t.Label,i=0;i<a.length;i++)o.treeDataIndex+=t.Label.dataIndex,o.dicoType+=t.Label.dicoType,n=o.treeDataIndex.split("."),o.label+=n[0],l=n[1],o.labelIsOnRef="instance"===l?!!e.is(o.labelIsOnRef)&&o.labelIsOnRef&&!1:!e.is(o.labelIsOnRef)||o.labelIsOnRef&&!0,i+1!==a.length&&(o.label+=r,o.type+=r,o.dicoType+=r,o.treeDataIndex+=r);else e.owns(t,"Label")&&(o.treeDataIndex=t.Label.dataIndex,o.dicoType=t.Label.dicoType,n=o.treeDataIndex.split("."),o.label=n[0],l=n[1],o.labelIsOnRef="instance"!==l);return o},E=function(t){var n=[];return e.is(t.dicoType,"array")&&(n=t.dicoType.map(function(t){return e.is(t,"object")&&e.owns(t,"dicoType")?t.dicoType:t})),n},x=function(t){let n=t;Array.isArray(n)||(n=[n]);const l=h.getBehavior("CfgColumnsBehavior");if(e.is(l)){const e=l.computeVisibleConfigColDataIndices(n);l.setVisibleCfgColDataIndices(e),n=l.filterCFGColumnsBasedOnAvailability(n)}return n.map(function(t){var n,l,r,u,c=!1,g=!1,p=!1,f={sortableFlag:!1,groupableFlag:!0,dataIndex:t.dataIndex,dicoType:t.dicoType,displayType:t.displayType,visibleFlag:!e.is(t.isHidden)||!t.isHidden,width:isNaN(t.width)?"auto":parseInt(t.width),minWidth:isNaN(t.minWidth)?100:parseInt(t.minWidth),text:v.getColumnDisplayValue(t),editionPolicy:"EditionOnClick",tooltipIndex:t.Tooltip,hasCellValue:U.hasCellValue,getCellValue:U.getCellValue.bind(U,t),getCellValueForExport:function(n){var i,a="",l=n.cellModel;return n.rowID<0?a=l:e.is(l)&&(c&&!g?(i=n.nodeModel.getAttributeValue(t.dataIndex),Array.isArray(i)&&(a=i.join())):a=e.is(l,"array")?l.join():l.toString()),a}};u=function(){return{units:l}};const m=v.getAttributeInfoFromColumn(t),b=I.getAttributeInfo(m.attributeName);if(e.is(b)&&(g=v.hasRangeDefined(b),c=v.isMultiValuated(b),(p=v.hasMagnitude(b))&&(l=v.getNLSForUnit(b))),e.is(t.displayType)&&t.displayType.contains("URL")&&(r=T.getURLColumnInfo(t.dataIndex))&&(t.command=r.command,e.owns(r,"defaultValue")?t.defaultValue=r.defaultValue:t.defaultValue=""),!e.is(t.displayType)&&e.is(m)&&v.isDate(b)&&!g&!c&&(t.displayType="Date"),e.is(t.displayType))switch(f.editableFlag=!1,t.displayType){case"FullOwnerURL":f.typeRepresentation="url",f.className=T.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=U.getFullOwnerURL,f.command=T.areModuleColumnsImmutable(h.getId())?null:t.command,f.getCellValueForExport=U.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"CustomString":f.typeRepresentation="string",f.getCellValue=U.getCustomStringCellValue;break;case"URL":f.typeRepresentation="url",f.className=T.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.getCellValue=U.getURLCellValue,f.command=T.areModuleColumnsImmutable(h.getId())?null:t.command,f.defaultValue=t.defaultValue,f.getCellValueForExport=U.getURLCellValueForExport,f.getCellGroupingKey=function(e){return e.nodeModel.getAttributeValue(e.dataIndex)};break;case"IconText":f.typeRepresentation="url",f.className="icon-text-column",f.hasCellValue=function(){return!0},f.getCellValue=function(e){var t=e.nodeModel.options.grid;return{label:t[e.dataIndex],getLabel:function(){return this.label},icon:{iconPath:t.cellInfo.IconUrl,iconSize:{width:"22px",height:"22px"}}}};break;case"Relation":f.typeRepresentation="url",f.className=T.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=G.getCellValue,f.hasCellValue=G.hasCellValue,f.getCellValueForExport=G.getCellValueForExport;break;case"DocMgmt":f.className=T.areModuleColumnsImmutable(h.getId())?"icon-text-column":"url-column",f.groupableFlag=!1,f.getCellValue=U.getCellValueForDocMgt,f.getCellValueForExport=function(t){return e.is(t.cellModel,"array")&&t.cellModel.join(", "),e.is(t.cellModel)?t.cellModel.toString():""};break;case"BIEssentials":case"BIEssentialsAltSub":f.typeRepresentation="color",f.className="biessentials",f.groupableFlag=!1,f.getCellValue=U.getBICellValue,f.getCellValueForExport=U.getBICellValueForExport;break;case"MIL":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=i.getCellTypeRepresentation,f.setCellValue=i.setMILValue.bind(null,t),f.getCellClassName=i.getCellClassName,f.getCellValue=i.getCellValue,f.getCellSemantics=i.getCellSemantics,f.hasCellValue=i.hasMILCellValue,f.getCellEditableState=i.getCellEditableState;break;case"MANAGECAPABLERESOURCESMOD":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=o.getCellTypeRepresentation,f.setCellValue=o.setValue.bind(null,t),f.getCellClassName=o.getCellClassName,f.getCellValue=o.getCellValue,f.getCellSemantics=o.getCellSemantics,f.hasCellValue=o.hasCellValue,f.getCellEditableState=o.getCellEditableState;break;case"MANAGESTEPOPERATIONSUI":f.editionPolicy="EditionOnClick",f.getCellTypeRepresentation=_.getCellTypeRepresentation,f.setCellValue=_.setValue.bind(null,t),f.getCellClassName=_.getCellClassName,f.getCellValue=_.getCellValue,f.getCellSemantics=_.getCellSemantics,f.hasCellValue=_.hasCellValue,f.getCellEditableState=_.getCellEditableState;break;case"DataCollectRow":f.getCellTypeRepresentation=s.getCellTypeRepresentation,f.getCellClassName=s.getCellClassName,f.getCellValue=s.getCellValue,f.getCellSemantics=s.getCellSemantics,f.hasCellValue=s.hasCellValue;break;case"CIM":f.editionPolicy="EditionInPlace",f.getCellTypeRepresentation=a.getCellTypeRepresentation,f.setCellValue=a.setMILValue.bind(null,t),f.getCellClassName=a.getCellClassName,f.getCellValue=a.getCellValue,f.getCellSemantics=a.getCellSemantics,f.hasCellValue=a.hasMILCellValue,f.getCellEditableState=a.getCellEditableState;break;case"RWU":f.editionPolicy="RWU_Replace"===t.dataIndex?null:"EditionInPlace",f.getCellTypeRepresentation=W.getCellTypeRepresentation,f.setCellValue=W.setRWUValue.bind(null,t),f.getCellClassName=W.getCellClassName,f.getCellValue=W.getCellValue,f.getCellSemantics=W.getCellSemantics,f.hasCellValue=W.hasRWUCellValue,f.getCellEditableState=W.getCellEditableState,f.getCellGroupingKey=W.getRWUGroupingKeyForURLColumn;break;case"MultiType":f.dicoType=E(t),f.typeRepresentation="float",f.groupableFlag=!1,f.getCellValue=U.getMultiTypeCellValue,f.getCellSemantics=U.getMultiTypeCellSemantics,f.setCellValue=U.setValue,f.getCellEditableState=U.getMultiTypeCellEditableState;break;case"CFG":f.groupableFlag=!1,f.getCellTypeRepresentation=d.getCellTypeRepresentation,f.getCellValue=d.getCellValue,f.hasCellValue=d.hasCellValue;break;case"Date":case"DateTime":f.editionPolicy="EditionInPlace",f.editableFlag=!v.isReadOnly(b),f.typeRepresentation="datetime",f.setCellValue=U.setValue,f.getCellValueForExport=function(e){var n="",i=e.cellModel,a="DateTime"===t.displayType;return e.rowID<0?n=i:i&&(n=v.getFormattedDate(i,a)),n};break;case"NonEditable":f.editableFlag=!1,v.isBoolean(b)&&(f.typeRepresentation="boolean");break;case"NonEditableMultiType":f.editableFlag=!1,f.dicoType=E(t),f.typeRepresentation="float",f.groupableFlag=!1,f.getCellValue=U.getMultiTypeCellValue,f.getCellSemantics=U.getMultiTypeCellSemantics,f.setCellValue=U.setValue}else f.editableFlag=!v.isReadOnly(b),n=v.getNodeAndColumnInfos(null,t),c&&!g?(f.typeRepresentation="string",f.editionPolicy="EditionInPlace"):g?(f.allowResetToUndefinedByUIFlag=!0,f.hasRangeDefined=!0,f.editionPolicy="EditionInPlace",f.typeRepresentation=t.dataIndex.replaceAll(".",""),f.authorizedValues=v.getAuthorizedValuesNLSList(n.attributeInfo,n.attributeDef),p&&(f.getCellSemantics=u)):p?(f.typeRepresentation="number",f.getCellSemantics=u):v.isBoolean(b)?f.typeRepresentation="boolean":v.isInteger(n.attributeInfo)?f.typeRepresentation="integer":v.isDouble(n.attributeInfo)&&(f.typeRepresentation="float"),f.setCellValue=U.setValue;return T.areModuleColumnsImmutable(h.getId())&&(f.editableFlag=!1),f})},A=function(t,n){var i,a,l,o;return n=n||!1,R=t.Label.dataIndex,o=e.is(t.Label.minWidth)?t.Label.minWidth:null,a=T.getLabelInfo(h.getId()),l=e.is(t)&&e.is(t.name)?D.getNLSValue("Column."+t.name):v.getColumnDisplayValue(t.Label),(i={sortableFlag:!0,groupableFlag:!0,text:l,dataIndex:"tree",width:e.is(o)?"auto":n?"100%":"30%",minWidth:e.is(o)?o:150,dicoType:a.dicoType,label:a.attributeName,labelIsOnRef:a.labelIsOnRef,getCellValue:function(t){var n,i,a=t.nodeModel,l=null;return e.is(a)&&(F.isFakeNodeModel(a)&&a.getProperty()===B.Reference?(i=this.getColumnOrGroup(B.Reference),n=y.getReference(a.getIdentifier()),l=i.text+": "+n.get("V_Name")+" ("+a.getOriginalChildrenInformation().notHiddenNotFilteredChildrenCount+")"):l=a.getLabel()),l}}).editableFlag="NonEditable"!==t.Label.displayType,i.setCellValue=U.setValue,T.areModuleColumnsImmutable(h.getId())&&(i.editableFlag=!1),i},P=function(){var e,t,n=[];for(e in B)Object.prototype.hasOwnProperty.call(B,e)&&((t={sortableFlag:!1,editableFlag:!1,groupableFlag:!0,dataIndex:B[e],visibleFlag:!1,width:"auto",minWidth:100,editionPolicy:"EditionOnClick",hasCellValue:function(e){return!F.isFakeNodeModel(e.nodeModel)},getCellValue:U.getGroupingColumnCellValue}).text=v.getColumnDisplayValue(t),n.push(t));return n},N=function(){return{sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,dataIndex:"hide_show_3D",displayType:"hideShow3D",editionPolicy:"EditionInPlace",typeRepresentation:"visibility",alignment:"center",text:"",width:30,icon:D.getIconURLFromKey("3DColumnIcon"),hasCellValue:k.hasCellValue,getCellValue:k.getCellValue,setCellValue:k.setCellValue}},{getBlockAttributes:function(t){var n,i,a={boAttrName:[],roAttrName:[],otherAttrName:[]},l=!1,o=e.is(t.Columns)?t.Columns.Column:[],r=S(t),s=function(e,t){switch(t){case"reference":-1===a.boAttrName.indexOf(e)&&a.boAttrName.push(e);break;case"instance":-1===a.roAttrName.indexOf(e)&&a.roAttrName.push(e);break;default:-1===a.otherAttrName.indexOf(e)&&a.otherAttrName.push(e)}};return e.is(r.label)&&(e.is(r.labelIsOnRef,"boolean")?r.labelIsOnRef?s(r.label,"reference"):s(r.label,"instance"):s(r.label,null)),e.is(o,"array")||(o=[o]),o.forEach(function(t){var n=v.getAttributeInfoFromColumn(t),a=n.dataIndex,o=n.objType;if(!e.owns(t,"displayType")||"MultiType"!==t.displayType&&"NonEditableMultiType"!==t.displayType&&"OPTime"!==t.displayType)"instance"===o||"reference"===o?s(a,o):"relation"===o&&(l=!0,s(a,o));else switch(t.displayType){case"MultiType":case"NonEditableMultiType":t.dicoType=E(t),t.dicoType.forEach(function(e){s(i=e+"."+a,o)});break;case"OPTime":s(i,o)}}),l&&(n=L.getAllRelationDisplayAttributes(),e.is(n,"array")&&n.forEach(function(e){s(e,"reference")})),a},setReusablecontent:function(t){var n=function(n,i){var a,l={forceDBMode:!0,onComplete:function(){e.is(a)&&e.is(a.objectToBeModified)&&(a.objectToBeModified.setAdditionalInfo({isFetched:!0}),v.doesAttributeExist(a.objectToBeModified,a.dataIndex)||v.isAttrApplicableForType(a.objectToBeModified,a.dataIndex)||-1===O.indexOf(a.dataIndex)&&h.warn(D.getNLSValue("TableView.AvailabilityFailure",{key:a.attributeNLSTitle}))),e.is(i)&&e.is(i.cellView)&&t.updateRenderedRow(i.rowID,{updateCellContent:!0})}};n.preventDefault(),n.stopPropagation(),i&&(a=v.getNodeAndColumnInfos(i.nodeModel,i.cellView.collectionView.getColumnOrGroup(i.columnID)),!e.is(a.objectToBeModified)||v.doesAttributeExist(a.objectToBeModified,a.dataIndex)||a.objectToBeModified.getAdditionalInfo("isFetched")||("instance"===a.instOrRef?y.fetchInstance({PID:a.objectToBeModified.id},l):y.fetchRoot(a.objectToBeModified.id,l)))};C||(t.addEventListener("show",function(e,t){h.debug("onEventShow fired"),n(e,t)}),t.addEventListener("activeCellChange",function(t){const i=t.dsModel,a=i.getActiveCellID();if(a>=0&&i.isCellInEdition(a)){let l=i.getCellInfosAt(a);e.is(l)&&l.rowID>=0&&l.columnID>=0&&e.is(l.nodeModel)&&e.is(l.nodeModel.getReferencePID)&&(e.is(l.cellView)||(l.cellView={collectionView:i}),n(t,l))}h.debug("activeCellChange fired")}))},getColumnDataIndexByDisplayType:function(t,n){var i,a,l,o=[];if(!e.is(n))return this.getColumnsDataIndex(t);for(a=t.columns.length,i=1;i<a;i++)l=t.columns[i],e.is(l)&&e.owns(l,"dataIndex")&&e.owns(l,"displayType")&&l.displayType===n&&o.push(l.dataIndex);return o},getColumnsDataIndex:function(t,n){var i,a,l,o,r=[],s=!!e.is(n,"boolean")&&n;if(s||!e.is(M)){for(l=t.columns.length,e.is(t._treeDataIndex)&&r.push(t._treeDataIndex),i=1;i<l;i++)o=t.columns[i],a=!e.is(o.isExportable)||o.isExportable,e.is(o)&&e.owns(o,"dataIndex")&&a&&(s&&o.isHidden||(!e.owns(o,"displayType")||"MultiType"!==o.displayType&&"NonEditableMultiType"!==o.displayType?r.push(o.dataIndex):o.dicoType.forEach(function(e){r.push(e+"."+o.dataIndex)})));s||(M=r)}else r=M;return r},createTreeListViewColumns:function(t,n,i,a){var l,o,r=[];return t.Columns&&t.Columns.Column&&(r=x(t.Columns.Column)),t.Label&&((l=A(t,0===r.length)).isExportable=!1,r.splice(0,0,l)),Array.isArray(b)&&(o=r.filter(function(e){return b.includes(e.dataIndex)})).length>0&&(r=r.filter(function(e){return!b.includes(e.dataIndex)}),o.length>0&&r.unshift.apply(r,o)),(!e.is(t.addDefaultGroupingColumns)||e.is(t.addDefaultGroupingColumns,"boolean")&&!0===t.addDefaultGroupingColumns)&&(r=r.concat(P())),e.is(a)&&!0===a&&r.splice(0,0,N()),{columns:r,labelIsOnRef:e.is(t.Label)?l.labelIsOnRef:null,label:e.is(t.Label)?l.label:null}},manageColumn:function(e,t,n){n&&(!0===n.visible?e.showColumn(t):e.hideColumn(t))},getLabelColumnDataIndex:function(){return R}}}}),define("DS/DELWKOViewBehaviors/DELWKOTreeListViewBehavior",["UWA/Core","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/ContextualMenu","DS/DELWKOViewBehaviors/DELWKOColumnManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXActionDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXGenericLinksDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WUXManageCapableRscDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/WKI/WUXDataCollectRowDragDrop","DS/DELPPWViewBehaviors/TreeListViewBehavior/Relations/RelationsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/Documents/DocumentsUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/OperationTime/OperationTimeUtil","DS/DELPPWViewBehaviors/TreeListViewBehavior/ToolTipManager","DS/DELPPWViewBehaviors/TreeListViewBehavior/DataGridViewManager","DS/Utilities/Dom","DS/Core/PointerEvents"],function(e,t,n,i,a,l,o,r,s,u,d,c,g,p,f){"use strict";return{plugins:["ResourcePlugin","UXComponentsPlugin","DatabasePlugin","DicoPlugin","AttributePlugin","RelationsPlugin","DocumentPlugin","WebServicePlugin","ChangeActionPlugin","TreeViewPlugin","ImplementPlugin","PlatformPlugin","SelectionPlugin"],creator:function(m,h,b,C,y,I,v,D,V,L,T,w,M,S,E){var x,A,O,P,N,R,B,F,k,U,W,H,G,j,_,K,X,z,q,Q,J,Y,$,Z,ee,te,ne,ie,ae,le,oe,re,se,ue,de,ce,ge={},pe=new s(h,y,D,M,b,S),fe=new u(h,y,V),me=(new d(h,v,y,I),C.getComponent("DataGridView")),he=new c(h,L,b,y,I,v),be={placeholder:"",apiVersion:2,showSelectionCheckBoxesFlag:!0,rowSelection:"multiple",cellSelection:"none",showRowIndexFlag:!1,defaultColumnDef:{sortableFlag:!0,editionPolicy:"EditionOnDoubleClick",typeRepresentation:"string"},isEditable:!1,selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",rowGroupingOptions:{depth:0,hideGroupedColumns:!1},getCellTooltip:function(t){var n,i,a,l,o=this.getColumnOrGroup(t.columnID),r={longHelp:""},s=[],u=v.getAttributeInfoFromColumn(o),d=I.getAttributeInfo(u.attributeName),c=t.cellModel;if(!t.isHeader&&e.is(t.nodeModel)&&!e.is(t.nodeModel.getReferencePID))return r;switch(!e.is(o.displayType)&&e.is(u)&&v.isMultiValuated(d)&&(o.displayType="Multivalue"),o.displayType){case"URL":!t.isHeader&&e.is(t.cellModel)?r.longHelp=t.cellModel.label:r.longHelp=t.cellModel;break;case"MIL":a=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(a)?a.getLabel():a:(l=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(l)?e.is(l.tooltip)?l.tooltip:l.getLabel():"");break;case"RWU":a=t.cellModel,t.isHeader||"RWU_Action"!==t.dataIndex?r.longHelp="object"===e.typeOf(a)?a.getLabel():a:(l=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(l)?e.is(l.tooltip)?l.tooltip:e.is(l.getLabel)?l.getLabel():"":"");break;case"CIM":a=t.cellModel,t.isHeader||"MIL_suggestion"!==t.dataIndex&&"MIL_rerouting"!==t.dataIndex?r.longHelp="object"===e.typeOf(a)?a.getLabel():a:(l=t.nodeModel.options.grid[t.dataIndex],r.longHelp=e.is(l)?e.is(l.tooltip)?l.tooltip:l.getLabel():"");break;case"Relation":case"Multivalue":if("Multivalue"!==o.displayType||t.isHeader||(c=v.getValueAsArray(t.nodeModel.options.grid[t.dataIndex])),"Relation"!==o.displayType||t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){for(v.isDate(d)&&(c=c.map(function(e){return v.getFormattedDate(e)})),i=0;i<c.length;i++)n=c[i],s.push(e.is(n.Value)?n.Value:n);r.longHelp=v.getValueAsString(s,v.getType(d)).split(h.getPreferenceValue("separator")).join("\n")}else t.isHeader&&(r.longHelp=c);break;case"DocMgmt":if(t.isHeader||(c=t.nodeModel.getAttributeValue(t.dataIndex)),Array.isArray(c)&&0!==c.length){s=c.reduce((e,t)=>("Reference Document"===t.type?e.Attachments.push(t.title):e.Specifications.push(t.title),e),{Specifications:[],Attachments:[]});let e="";for(const[t,n]of Object.entries(s))Array.isArray(n)&&n.length>0&&(e+=t+":",n.forEach(t=>{e+="\n\t"+t}),e+="\n");r.longHelp=e}else t.isHeader&&(r.longHelp=c);break;case"hideShow3D":t.isHeader?r.longHelp=b.getNLSValue("HideShow3D.tooltip"):(a=t.cellModel,e.is(a,"boolean")&&(r.longHelp=a?b.getNLSValue("HideShow3D.hide3D"):b.getNLSValue("HideShow3D.show3D")));break;case"BIEssentials":case"BIEssentialsAltSub":t.isHeader?r.longHelp=t.cellModel:(a=t.nodeModel.options[t.dataIndex],r.longHelp=e.is(a)?a.tooltip:"");break;case"OPTime":t.isHeader?r.longHelp=t.cellModel:(a=t.nodeModel.getAttributeValue("V_OperationTime"),r.longHelp="string"===e.typeOf(a)&&"FetchInProgress"!==a?a:"");break;default:a=t.cellModel,t.isHeader||(e.is(a)?"object"===e.typeOf(a)?a=a.getLabel():v.isBoolean(d)?a="TRUE"===a?b.getNLSValue("TRUE"):b.getNLSValue("FALSE"):v.isDate(d)?a=v.getFormattedDate(a):v.hasRangeDefined(d)?a=t.cellModel:(v.isDouble(d)||v.isInteger(d))&&(a=v.getValueAsString(a,v.getType(d))):a=""),r.longHelp=a}return!t.isHeader&&e.is(t.nodeModel)&&(a=he.getTooltipValue(t),e.is(r.longHelp)&&(r.longHelp+=r.longHelp.length>0&&a.length>0?"\n\n":"",r.longHelp+=a)),r},getCellEditableState:function(e){var t,n=!0;return!0===e.isHeader?n=!1:"selection"===e.dataIndex?n=!0:(t=v.getNodeAndColumnInfos(e.nodeModel,e.parent.options.columns[e.virtualColumnID]),n=!v.isReadOnly(t.attributeInfo,t.attributeDef)),n}};return X=function(s){var u;if(U=e.is(s.columnConfig)?s.columnConfig:w.getViewColumnPreferences(h.getId(),R),H=(s=s||{}).dataGridViewOptions?e.extend(be,s.dataGridViewOptions,!0):be,!e.is(U))throw new Error("_createTreeListView options not defined");if(H.contextualCommands&&(_=new n(h,C,b,v,S,y,w,I,M),H.onContextualEvent=function(t){var n,i,a,l,o=this,r=[],s={};if(e.is(t.cellInfos)&&(n=(a=t.cellInfos).nodeModel,l=a.manager,e.is(a.rowID))){if(-1===a.rowID)e.is(H.headerContextualCommands)&&(i=o.getColumnOrGroup(a.columnID),(s={node:n,selectedNodes:o.getTreeDocument().getXSO().get(),column:i,virtualColumnID:a.columnID,dataIndex:i.dataIndex,manager:l,handlers:{onSizeColumnToFit:function(e){l.sizeColumnToFit(e)},onSortColumnContentAsc:function(){l.sortColumn(i.dataIndex,"asc")},onSortColumnContentDesc:function(){l.sortColumn(i.dataIndex,"desc")},onClearSort:function(){l.clearSort()},onHideColumn:function(e){w.updateViewPreferences(h.getId(),i.dataIndex,{visibility:!1}),o.hideColumn(e,{isUserInteraction:!1})},onGroupRows:function(e,t){var n;w.doesModuleHaveRecursiveGrouping(h.getId())?(n=i.dataIndex!==e?o.getColumnOrGroup(l.getColumnIndexByDataIndex(e)):i,oe(n)):ne(e,t)},onRemoveGrouping:function(){w.doesModuleHaveRecursiveGrouping(h.getId())?re():ie()},onGroupByCriteria:function(e){h.getBehavior("GroupingViewBehavior").group(e)},onUngroupByCriteria:function(e){h.getBehavior("GroupingViewBehavior").ungroup(e)}}}).params=t,r=_.buildContextualMenu(H.headerContextualCommands,s),"selection"===a.dataIndex||"taggerColor"===a.dataIndex||"hide_show_3D"===a.dataIndex?r.forEach(function(e){e.state="disabled"}):"tree"===a.dataIndex&&r.forEach(function(e){"Hide"===e.title&&(e.state="disabled")}));else if(0<=a.rowID){if(!e.is(n.getReferencePID))return;e.is(n)&&(n.isSelected()||n.select()),i=o.getColumnOrGroup(a.columnID),(s={node:n,selectedNodes:o.getTreeDocument().getXSO().get(),column:i,getColumnIDFromDataIndex:function(e){return l.getColumnIndexByDataIndex(e)},getColumnOrGroup:function(e){return a.cellView.collectionView.getColumnOrGroup(e)},handlers:{onGroupRows:function(e,t){ne(e,t)},onRemoveGrouping:function(){ie()}}}).infos=v.getNodeAndColumnInfos(n,i),r=_.buildContextualMenu(H.contextualCommands,s)}return r}}),e.is(s.dataGridViewOptions)&&e.is(s.dataGridViewOptions.enableDragAndDrop,"boolean")&&!0===s.dataGridViewOptions.enableDragAndDrop){switch(H.cellDragEnabledFlag=!0,H.rowDragEnabledFlag=!0,u={acceptedTypes:s.pprTypes,pprTypesWithSupportedViews:e.is(s.pprTypesWithSupportedViews)?s.pprTypesWithSupportedViews:[]},s.dragDropManager){case"WUXActionDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),N=new a(m,h,b,y,I,L,T,S);break;case"WUXGenericLinksDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),N=new l(m,h,b,y,I,L,T,C);break;case"WUXManageCapableRscDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),N=new o(m,h,b,y,I,L,T,C);break;case"WUXDataCollectRowDragDrop":u=e.extend(u,{linkTypes:s.linkTypes}),N=new r(m,h,b,L,y);break;default:N=new t(m,h,b,y,I,L,T,S)}N.init(u),H=e.extend(H,N.getDDBehavior())}O=new i(m,h,W,j,y,I,v,b,C,D,w,E),G=O.createTreeListViewColumns(U,H.showTagger,H.showSelection,H.show3DHideShow)},K=function(t){var n,i,a=h.getPreferenceValue("separator");if(P=t,e.is(G)&&e.is(G.columns,"array")?H.columns=G.columns:H.columns=[],e.is(x))x.setProperties({columns:H.columns});else{H.treeDocument=t,x=new me(H),A=new g(x),x.registerColumnsEnum();const n=h.getBehavior("CfgColumnsBehavior");if(e.is(n)){const e=n.getRequiredTypeRepresentations();x.registerColumnTypeRepresentations(e)}}if(p.addEventOnElement(x,x,f.POINTERUP,function(e,t){var n=h.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"desc")}),p.addEventOnElement(x,x,f.POINTERDOWN,function(e,t){var n=h.getBehavior("WUXNodeModelBehavior");null!=n&&n.setSortOptions(0,"asc")}),e.is(H.toolbarOptions)&&Array.isArray(H.toolbarOptions.items)&&x.setToolbar(se(H.toolbarOptions.items)),U.Label)if("Auxiliary"===U.name&&e.is(U.Label.length)){for(x._treeDataIndex="",x._label="",x._types="",i=0;i<U.Label.length;i++)x._treeDataIndex+=i<U.Label.length-1?U.Label[i].dataIndex+a:U.Label[i].dataIndex,x._label+=i<U.Label.length-1?U.Label[i].dataIndex.split(".")[0]+a:U.Label[i].dataIndex.split(".")[0],x._types+=i<U.Label.length-1?U.Label[i].type+a:U.Label[i].type;x._labelIsOnRef=!0,x.isMultipleLabel=U.Label.length>1}else x._treeDataIndex=U.Label.dataIndex,x._label=G.label,x._labelIsOnRef=G.labelIsOnRef,x.isMultipleLabel=!1;e.is(H.setReusablecontent)&&!1===H.setReusablecontent||O.setReusablecontent(x),n=O.getBlockAttributes(U),y.setSelectPredicate(h.getId(),n)},q=function(t){var n,i,a,l,o,r,s,u=t.type,d={icons:"",label:"",grid:{},useAsyncPreExpand:!0},c=h.getPreferenceValue("separator"),g=O.getColumnsDataIndex(x);if(x._labelIsOnRef){if(o="VPMReference"===u&&(e.is(t.V_usage,"array")&&t.V_usage.includes("3DPart")||e.is(t.V_usage,"string")&&"3DPart"===t.V_usage)?b.getIconURLFromKey("3DPart"):b.getIconURLFromKey(u),d.icons=[o],d.label="",e.is(x.isMultipleLabel)&&x.isMultipleLabel)for(a=x._label.split(c),l=x._types.split(c),s=0;s<a.length;s++)e.is(t.type)&&("undefined"===l[s]||"undefined"!==l[s]&&I.isAKindOf(t.type,l[s]))&&(r=""===d.label?"":c,e.owns(t,a[s])&&e.is(t[a[s]])&&(d.label+="NULL"!==t[a[s]]?r+t[a[s]]:""));e.owns(t,x._label)&&(d.label="NULL"!==t[x._label]?t[x._label]:"")}for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i=t[n],e.is(i)&&"NULL"!==i&&(g&&g.indexOf(n+".reference")>=0?d.grid[n+".reference"]=t[n]:"PID"===n&&(d.referencePID=t[n]),"type"===n&&(d.referenceType=t[n]),"defType"===n&&(d.defType=i)));return pe.fillNodeOptions(d,g),fe.fillNodeOptions(d,g),e.is(ge.show3DHideShow)&&!0===ge.show3DHideShow&&(d.hideShow3D=!0),d},z=function(t,n,i){var a,l,o=O.getColumnsDataIndex(x),r=q(t);for(a in!x._labelIsOnRef&&e.owns(n,x._label)&&(r.label="NULL"!==n[x._label]?n[x._label]:""),n)Object.prototype.hasOwnProperty.call(n,a)&&(l=n[a],e.is(l)&&"NULL"!==l&&(o&&o.indexOf(a+".instance")>=0?r.grid[a+".instance"]=n[a]:"PID"===a?r.instancePID=n[a]:"V_TreeOrder"===a&&(r.grid.V_TreeOrder=parseFloat(n[a]))));return pe.fillNodeOptions(r,o,n,i),r},Q=function(t){var n,i,a,l=t.changedAttributes(),o=t.isInstance()?".instance":".reference",r=x._labelIsOnRef?".reference":".instance",s=O.getColumnsDataIndex(x),u={};if(!t.isConnection()&&e.is(l)){for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(a=n+o,-1!==s.indexOf(a)&&(u[a]="NULL"!==l[n]?l[n]:""),n===x._label&&r===o&&(i="NULL"!==l[n]?l[n]:""));return{label:i,attributes:u}}},J=function(){var e,t,n=[],i=A.getNumberOfRows();for(e=0;e<i;e++)t=A.getTreeNodeModelFromRowID(e),n.push(t.getReferencePID());return n},Y=function(){var t,n,i,a,l,o,r,s,u,d;if(F)for(i=w.getViewColumnPreferences(h.getId()),n=e.is(i)?i.Columns.Column:[],l=x.getColumnIndexByDataIndex("tree")+1,t=0;t<n.length;t++)s={},(a=n[t]).isHidden?x.isColumnHidden(a.dataIndex)||x.hideColumn(a.dataIndex):(d=isNaN(a.width)?"auto":parseInt(a.width),x.getColumnWidth(a.dataIndex)!==d&&(s.width=d),d=isNaN(a.minWidth)?"100":parseInt(a.minWidth),x.getColumnMinWidth(a.dataIndex)!==d&&(s.minWidth=d),x.isColumnHidden(a.dataIndex)&&(s.visibleFlag=!0),e.Object.keys(s).length>0&&x.layout.setColumnOrGroupProperties(a.dataIndex,s),u=x.getColumnIndexByDataIndex(a.dataIndex),r=x.layout.getOrderedColumnsReverseIndexes(),o=x.layout.getOrderedColumnsIndexes(),r[u]!==l&&x.moveColumn(a.dataIndex,o[l])),l++},$=function(e){var t,n,i="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(63&n|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(63&n|128));return i},Z=function(e){return'"'+$(e).replace(/"/g,'""')+'"'},ee=function(e){H.showTagger&&x.updateNodeKPIColor(e)},te=function(t){var n,i,a=[],l=t.collectionView;if(t.startNodeIndex>=0&&t.endNodeIndex>=0){for(n=t.startNodeIndex;n<=t.endNodeIndex;n++)i=l.model[n],e.is(i)&&a.push(i);a.length>0&&h.notify("visibleNodesChanged",[h.getId(),a])}},ae=function(t){var n=w.getColumnsForGrouping(h.getId());((t=!!e.is(t,"boolean")&&t)||n.length>0)&&x.groupRows({dataIndexesToGroup:n})},le=function(t){var n;e.is(t.options)&&t.options.updateType===WUXModelUpdateTypes.Grouping&&(w.isGroupingExist()||h.notify("manageCommandsOnGrouping"),n=w.getColumnsForGrouping(h.getId()),e.is(B)&&0===n.length&&(h.getBehavior("WUXNodeModelBehavior").removeEventListener(B),B=void 0))},ne=function(t,n){var i;w.getColumnsForGrouping(h.getId(),!0).length>0&&x.rowGroupingOptions.depth!==n?h.warn(b.getNLSValue("TableView.InvalidGrouping")):(e.is(B)||(i=h.getBehavior("WUXNodeModelBehavior"),e.is(i)&&(B=i.addEventListener("pushUpdate",le))),x.rowGroupingOptions.depth=n,w.addColumnForGrouping(h.getId(),t),ae(),h.notify("manageCommandsOnGrouping"))},ie=function(){w.resetColumnsForGrouping(h.getId()),ae(!0)},oe=function(t){var n,i=h.getBehavior("GroupingViewBehavior"),a=t.dataIndex;e.is(i)&&!0===t.groupableFlag&&(w.resetColumnsForGrouping(h.getId()),w.addColumnForGrouping(h.getId(),a),"tree"===a&&(a=O.getLabelColumnDataIndex()),a.endsWith(".group")&&(a=w.getCollectionSpecificDataIndex(a)),n={dataIndex:a,title:t.text},i.group(n))},re=function(){var t=h.getBehavior("GroupingViewBehavior");e.is(t)&&(w.resetColumnsForGrouping(h.getId()),t.clearGrouping())},se=function(t){return{entries:t.map(function(t){var n,i=b.getIconURLFromKey(t.icon);return e.is(t.tooltip)&&(n={title:b.getNLSValue(t.tooltip.title),shortHelp:b.getNLSValue(t.tooltip.shortHelp)}),{id:t.id,dataElements:{typeRepresentation:e.is(t.typeRepresentation)?t.typeRepresentation:"functionIcon",position:e.is(t.position)?t.position:"far",category:e.is(t.category)?t.category:"0",icon:{iconPath:i,iconSize:{width:"22px",height:"22px"}},value:ue.bind(null,t.id),disabled:!!e.is(t.disabled)&&t.disabled,tooltip:n}}})}},ce=function(e,t){var n,i,a;i=_.buildContextualMenu(e.children),n={position:{x:(a=t.dsModel.elements.container.getBoundingClientRect()).left+5,y:a.top+(a.height-5)}},WUXMenu.show(i,n)},ue=function(t,n){var i;i=H.toolbarOptions.items.find(function(e){return t===e.id}),e.is(i)&&e.is(i.children)?ce(i,n):e.is(H.toolbarOptions.actionHandler,"function")?H.toolbarOptions.actionHandler.call(null,t,n):e.is(_)&&_.onContextMenuCallback(t)},de=function(t){var n;t=Array.isArray(t)?t:[t],x&&(n=x.getToolbar(),e.is(n)&&n.items.getChildren().forEach(function(e){var n=e.options.id,i=t.indexOf(n);e.updateOptions({disabled:-1===i})}))},{viewName:"treeListView",listenTo:function(){return{TreeViewPrefModified:Y,LoadDropContent:this.processDropContent}},onStart:function(t,n){t=t||{},e.is(t.pprTypes)&&e.is(t.columnConfigName)&&(e.is(t.hasReadOnlyTypes,"boolean")&&t.hasReadOnlyTypes&&(be.defaultColumnDef.getCellEditableState=function(t){let n=null;return e.is(t)&&e.is(t.nodeModel)&&e.is(t.nodeModel.object)&&(n=t.nodeModel.object.type||null),(!e.is(n)||!I.isReferencesHasReadOnlyType(n))&&x.getColumnOrGroup(t.dataIndex).editableFlag}),e.is(t.views)&&e.is(t.views.treeListView)&&(ge=t.views.treeListView,Object.prototype.hasOwnProperty.call(ge,"show3DHideShow")&&S.isSuppressHideShow3DColumn()&&(ge.show3DHideShow=!1)),e.is(t.views.treeListView.toolTipConfigXML)&&he.init(t.views.treeListView.toolTipConfigXML),R=t.columnConfigName,(F=!!e.is(t.registerViewPreference)&&t.registerViewPreference)&&w.registerViewforColumnPref({viewID:h.getId(),columnConfigName:t.columnConfigName,viewIcon:t.moduleIcon}),W=Array.isArray(t.columnsBeforeTitle)?t.columnsBeforeTitle:null,!!e.is(t.immutableColumns,"boolean")&&t.immutableColumns&&w.registerModuleColumnsAsImmutable(h.getId()),j=!!e.is(t.noActiveCellChange,"boolean")&&t.noActiveCellChange,X({pprTypes:t.pprTypes,dataGridViewOptions:e.merge(ge,{isEditable:!!e.is(t.isAuthoringAllowed)&&t.isAuthoringAllowed}),dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,pprTypesWithSupportedViews:Array.isArray(t.pprTypesWithSupportedViews)?t.pprTypesWithSupportedViews:null}),!0===(k=!!e.is(t.registerLayoutPreference)&&t.registerLayoutPreference)&&w.registerViewforWidgetLayout({viewID:h.getId(),viewType:this.viewName})),n()},onStop:function(){e.is(x)&&x.remove(),F&&w.unRegisterViewforColumnPref(h.getId()),!0===k&&w.unregisterViewforWidgetLayout(h.getId(),this.viewName)},has3DHideShowColumn:function(){return!!e.is(ge.show3DHideShow,"boolean")&&ge.show3DHideShow},createTreeListView:function(t){var n,i,a="",l=ge;t=t||{},e.is(t.dataGridViewOptions.identifier)&&(a=t.dataGridViewOptions.identifier),e.is(t.columnConfig)&&(i=t.columnConfig),e.is(t.dataGridViewOptions)&&(l=t.dataGridViewOptions),X({columnConfig:i,pprTypes:t.pprTypes,dataGridViewOptions:l,dragDropManager:t.dragDropManager,linkTypes:t.linkTypes,identifier:a}),e.is(t.treeDocument)&&(K(t.treeDocument),e.is(x.onDelayedModelDataRequest,"function")||(x.onDelayedModelDataRequest=te),e.is(t.treeListViewContainer)&&x.getContent().inject(t.treeListViewContainer),e.is(t.toolbarContainer)&&(n=x.getToolbar(),e.is(n)&&n.getContent().inject(t.toolbarContainer)))},getColumnsByDisplayType:function(e){var t,n,i=[],a=O.getColumnDataIndexByDisplayType(x,e),l=a.length;for(t=0;t<l;t++)n=a[t],i.push(n.split(".")[0]);return i},loadDocument:function(t){K(t),e.is(x.onDelayedModelDataRequest,"function")||(x.onDelayedModelDataRequest=te)},getContent:function(){var t=void 0;return e.is(x)&&(t=x.getContent()),t},manageColumn:function(t,n){if("taggerColor"!==t)return e.is(x)&&e.is(O)?O.manageColumn(x,t,n):void 0;ee(n.visible)},processDropEffect:function(e){return N.processDropEffect(e)},processDropContent:function(e,t){var n=new Event("Drag");return n.dataTransfer=new DataTransfer,n.dataTransfer.setData("Text",e),N.onTreeListViewDrop(n,t)},getTreeListViewManager:function(){var t=null;return e.is(A)&&(t=A),t},getLabelAttribute:function(){return x._label},getReferenceNodeOptions:function(t){var n;return e.is(t)&&(n=q(t.toJSON())),n},getInstanceNodeOptions:function(t,n,i){var a;return e.is(t)&&e.is(n)&&(a=z(t.toJSON(),n.toJSON(),i)),a},getRelationNodeOptions:function(e,t){var n=O.getColumnsDataIndex(x);return pe.getRelationAttributes(e,n,t)},getDocumentNodeOptions:function(e){var t=O.getColumnsDataIndex(x);return{attributes:fe.getDocumentNodeOptions(e,t)}},getUpdateNodeOptions:function(t){var n;return e.is(t)&&(n=Q(t)),n},getVisibleTableContentAsCSV:function(e){return $(x.getAsCSV({columnSeparator:e,addLevelInformation:!0,allColumns:!1,forceQuotes:!0}))},getConfiguredAttributesAsCSV:function(t,n){var i,a,l,o,r,s=[],u="";function d(e,n){var i,a;for(i=t[n].Attribute,a=0;a<i.length;a++)if((o=i[a].name)===e)return!0;return!1}for(i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(a=t[i].Attribute,l=0;l<a.length;l++)o=a[l].name,-1===s.indexOf(o)&&s.push(o);for(r=0;r<s.length;r++)0!==r&&(u+=n),u+=Z(s[r]);return u+="\r\n",J().forEach(function(a){var l,o,c;if(l=y.getReference(a),e.is(l)&&function(e){return Object.prototype.hasOwnProperty.call(t,e)}(i=l.get("type"))){for(r=0;r<s.length;r++)0!==r&&(u+=n),c=d(o=s[r],i)&&e.is(l.get(o))?String(l.get(o)):"",u+=Z(c);u+="\r\n"}}),u},isInverseRelationColumnPresent:function(){var t,n=!1,i=D.getInverseRelationNameSet();return i.size>0&&e.is(O)&&(t=O.getColumnsDataIndex(x),e.is(t,"array")&&(n=t.some(function(e){return i.has(e)}))),n},getDataGridView:function(){return x},getTreeDocument:function(){return P},getToolBarContent:function(){var e,t=null;return x&&(e=x.getToolbar())&&(t=e.getContent()),t},enableToolBarItems:function(e){de(e)}}}}});